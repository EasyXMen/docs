==============
DoIP
==============

ç›®æ ‡
====

æœ¬é›†æˆæ‰‹å†Œç”¨äºæŒ‡å¯¼å®¢æˆ·è¿›è¡ŒDoIPé›†æˆï¼Œæ–‡æ¡£ä¸»è¦åŒ…æ‹¬çš„å†…å®¹ä¸ºï¼šåè®®æ ˆé›†æˆæŒ‡å¯¼ã€åŸºäºæ™®é€šåº”ç”¨çš„é›†æˆç¤ºä¾‹è®²è§£ã€é¡¹ç›®é›†æˆç‰¹æ®Šè¯´æ˜ã€‚

ç”±äºå„é¡¹ç›®çš„éœ€æ±‚ä¸åŒï¼Œé›†æˆç¤ºä¾‹ä¸ä¼šé’ˆå¯¹äºç‰¹å®šçš„å•†ä¸šé¡¹ç›®åšè¯¦ç»†è®²è§£ã€‚

ç¼©å†™è¯å’Œæœ¯è¯­
============

.. table:: è¡¨ ç¼©å†™è¯å’Œæœ¯è¯­

   +-----------------+------------------------------------------------------+
   | **ç¼©å†™è¯/æœ¯è¯­** | **æè¿°**                                             |
   +=================+======================================================+
   | DoIP            | Diagnostic over IPåŸºäºIPçš„è¯Šæ–­                       |
   +-----------------+------------------------------------------------------+
   | SoAd            | Socket Adapter Socketé€‚é…å™¨                          |
   +-----------------+------------------------------------------------------+
   | TcpIp           | Transmission Control Protocol/Internet               |
   |                 | Protocolä¼ è¾“æ§åˆ¶åè®®/ç½‘é™…åè®®                        |
   +-----------------+------------------------------------------------------+
   | Dcm             | Diagnostic Communication Manager è¯Šæ–­é€šä¿¡ç®¡ç†        |
   +-----------------+------------------------------------------------------+
   | Dem             | Diagnostic Event Managerè¯Šæ–­æ—¶é—´ç®¡ç†                 |
   +-----------------+------------------------------------------------------+
   | BswM            | Basic Software Mode Manager åŸºç¡€è½¯ä»¶æ¨¡å¼ç®¡ç†å™¨       |
   +-----------------+------------------------------------------------------+
   | Rte             | Runtime Environment è¿è¡Œæ—¶ç¯å¢ƒ                       |
   +-----------------+------------------------------------------------------+
   | iRte            | i-Soft Runtime Environment æ™®ååŸºç¡€æ¨¡å—è¿è¡Œæ—¶ç¯å¢ƒ    |
   +-----------------+------------------------------------------------------+

å‚è€ƒæ–‡æ¡£
========

[1] å‚è€ƒæ‰‹å†Œ_DoIP.pdf

[2] å‚è€ƒæ‰‹å†Œ_TCPIP.pdf

[3] å‚è€ƒæ‰‹å†Œ_DCM.pdf

[4] å‚è€ƒæ‰‹å†Œ_EthIf.pdf

[5] å‚è€ƒæ‰‹å†Œ_SoAd.pdf

[7] é›†æˆæ‰‹å†Œ_UDSonCAN.pdf

åè®®æ ˆé›†æˆ
==========

é¡¹ç›®äº¤ä»˜çš„å†…å®¹ä¸ºï¼šDoIPåè®®æ ˆæºç å’ŒORIENTAIS
Studioé…ç½®å·¥å…·ã€‚åè®®æ ˆç»†åˆ†ä¸ºåè®®æ ˆçš„å„æ¨¡å—åŠå…¶å¯¹åº”çš„é…ç½®å·¥å…·æ¨¡å—ã€‚

DoIPåè®®æ ˆå„é…ç½®æ¨¡å—çš„åŠŸèƒ½ä»‹ç»ï¼Œå‚è§è¡¨ DoIPåè®®æ ˆå„é…ç½®æ¨¡å—ä»‹ç»ã€‚

ä½¿ç”¨åè®®æ ˆæºç å’Œé…ç½®å·¥å…·ï¼Œè¿›è¡Œåè®®æ ˆçš„é›†æˆçš„æ­¥éª¤ï¼Œå‚è§

è¡¨ DoIPåè®®æ ˆé›†æˆçš„æ­¥éª¤ã€‚

.. table:: è¡¨ DoIPåè®®æ ˆå„é…ç½®æ¨¡å—ä»‹ç»

   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | **æ¨¡å—å** |                                                                 **åŠŸèƒ½**                                                                |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | Eth        | ETHé©±åŠ¨é…ç½®                                                                                                                             |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | EthIf      | EthIfæ¨¡å—ä½¿ç”¨EthIfCtrlIdxæ¥æŠ½è±¡ä»¥å¤ªç½‘æ”¶å‘å™¨å’Œæ§åˆ¶å™¨çš„åº•å±‚é€šä¿¡ç³»ç»Ÿå¯¹VLANçš„è®¿é—®ï¼Œä»¥æ­¤ä»¥å¤ªç½‘æ¥å£å®ç°ä»EthCtrlIdxåˆ°å„è‡ªç¡¬ä»¶èµ„æºæ§åˆ¶å™¨çš„æ˜ å°„ |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | EcuC       | ç”¨äºè¾…åŠ©é…ç½®å·¥å…·å®Œæˆé…ç½®çš„æ¨¡å—ã€‚ä¸»è¦æä¾›Pduçš„å®šä¹‰ï¼Œå…¶å®ƒæ¨¡å—é€šè¿‡å…³è”EcuCä¸­Pduï¼Œç›¸äº’å…³è”èµ·æ¥                                              |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | PduR       | PduRæ¨¡å—ç”¨äºPduåœ¨TPå±‚å’ŒIFå±‚çš„ä¼ è¾“ï¼Œä¸ºCOMå’ŒDCMçš„ä¸‹å±‚                                                                                     |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | TcpIp      | TcpIpæ¨¡å—ä½œä¸ºä»¥å¤ªç½‘åŸºæœ¬åè®®æ¨¡å—ï¼Œæä¾›äº†å‘é€å’Œæ¥æ”¶äº’è”ç½‘åè®®æ•°æ®çš„åŠŸèƒ½ï¼Œå¤„äºSoAdå’ŒEthIfä¸­é—´                                              |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | SoAd       | SoAdæ¨¡å—ä½¿ç”¨PDUå’Œsocketåœ¨TCPIPæ ˆä¹‹é—´åˆ›å»ºæ¥å£ï¼Œå°†Pduä¸socket connection å½¢æˆæ˜ å°„å…³ç³»                                                     |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | Dcm        | Dcmæ¨¡å—ä¸ºDoIPæä¾›è¯Šæ–­é€šè®¯ç®¡ç†                                                                                                           |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | Dem        | Demæ¨¡å—ä¸ºDoIPæä¾›è¯Šæ–­äº‹ä»¶ç®¡ç†                                                                                                           |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | DoIP       | DoIPå³åŸºäºä»¥å¤ªç½‘çš„è¯Šæ–­                                                                                                                  |
   +------------+-----------------------------------------------------------------------------------------------------------------------------------------+

.. table:: è¡¨ DoIPåè®®æ ˆé›†æˆçš„æ­¥éª¤

   +----------+----------------------------------------+------------------------------------------------------+
   | **æ­¥éª¤** | **æ“ä½œ**                               | **è¯´æ˜**                                             |
   +==========+========================================+======================================================+
   | 1        | ORIENTAIS                              | è‹¥é…ç½®å·¥å…·å·²ç»æ­å»ºï¼Œåˆ™ä»…éœ€è¿›è¡Œåè®®æ ˆæ¨¡å—çš„åŠ è½½æ“ä½œã€‚ |
   |          | Studioé…ç½®å·¥å…·å·¥ç¨‹æ­å»ºå’Œåè®®æ ˆæ¨¡å—åŠ è½½ |                                                      |
   +----------+----------------------------------------+------------------------------------------------------+
   | 2        | æ¨¡å—é…ç½®åŠé…ç½®æ–‡ä»¶ç”Ÿæˆ                 | NA                                                   |
   +----------+----------------------------------------+------------------------------------------------------+
   | 3        | ä»£ç é›†æˆ                               | ç°æœ‰å·¥ç¨‹ã€åè®®æ ˆæºä»£ç å’Œé…ç½®ç”Ÿæˆæ–‡ä»¶çš„é›†æˆã€‚         |
   +----------+----------------------------------------+------------------------------------------------------+
   | 4        | éªŒè¯æµ‹è¯•                               | NA                                                   |
   +----------+----------------------------------------+------------------------------------------------------+

.. note::
   **åè®®æ ˆé›†æˆä¹‹å‰ï¼Œç”¨æˆ·é¡»ç¡®ä¿å·²ç»æœ‰åŸºç¡€å·¥ç¨‹ï¼Œä¸”æœ¬åè®®æ ˆç›¸å…³çš„å…¶ä»–åè®®æ ˆèƒ½æ­£å¸¸å·¥ä½œã€‚**

æ–°å»ºORIENTAIS Studioé…ç½®å·¥ç¨‹åŠæ¨¡å—åŠ è½½
--------------------------------------

#. å®‰è£…ORIENTAIS Studioè½¯ä»¶åï¼ŒåŒå‡»è½¯ä»¶å›¾ä»¶å¹¶è®¾ç½®workspaceã€‚

   |image1|

   å›¾ æ–°å»ºå·¥ç¨‹-1

#. èœå•æ FileğŸ¡ªNewğŸ¡ªProjectï¼Œæ–°å»ºå·¥ç¨‹ã€‚

   |image2|

   å›¾ æ–°å»ºå·¥ç¨‹-2

#. åœ¨å¼¹å‡ºçš„æ–°å»ºçª—å£ä¸­é€‰æ‹©Autosarä¸‹çš„ [BSW Project]ï¼Œé€‰æ‹©Nextã€‚

   |image3|

   å›¾ æ–°å»ºå·¥ç¨‹-3

#. åœ¨å¼¹å‡ºçš„çª—å£ä¸­è¾“å…¥å·¥ç¨‹åï¼Œé€‰æ‹©Finish

   |image4|

   å›¾ æ–°å»ºå·¥ç¨‹-4

#. é€‰æ‹©[Bsw_Builder]ï¼Œå³é”®å•å‡»ï¼Œé€‰æ‹©New ECU Configurationã€‚

   |image5|

   å›¾ æ–°å»ºå·¥ç¨‹-5

#. åœ¨å¼¹å‡ºçš„çª—å£ä¸­è¾“å…¥ECUåï¼Œç„¶åé€‰æ‹©Nextã€‚

   |image6|

   å›¾ æ–°å»ºå·¥ç¨‹-6

#. é€‰æ‹©[BSW_Builder]->é€‰æ‹©ç›®æ ‡ECU->å³é”®å•æœºé€‰æ‹©[Add Module]ã€‚

   |image7|

   å›¾ æ–°å»ºå·¥ç¨‹-7

#. åœ¨å¼¹å‡ºçš„çª—å£ä¸­å‹¾é€‰éœ€æ·»åŠ çš„æ¨¡å—ï¼Œç‚¹å‡»Finishã€‚

   |image8|

   å›¾ æ–°å»ºå·¥ç¨‹-8

#. æ–°å»ºå·¥ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸Šä¸€æ­¥æ·»åŠ çš„æ¨¡å—å·²ç»è¢«åŠ å…¥åˆ°å·¥ç¨‹ä¸­ã€‚

   |image9|

   å›¾ æ–°å»ºå·¥ç¨‹-9

#. MCALé…ç½®å¯¼å…¥ï¼ŒBSWæ¨¡å—éœ€è¦ä¾èµ–MCALç”Ÿæˆçš„Ethæ¨¡å—

   #. ä»MCALé…ç½®å·¥å…·ç”Ÿæˆarxml
    
      |image10|

      å›¾ æ–°å»ºå·¥ç¨‹-10

      |image11|

      å›¾ æ–°å»ºå·¥ç¨‹-11

   #. å¯¼å…¥BSWå·¥å…·

      |image12|

      å›¾ æ–°å»ºå·¥ç¨‹-12

      |image13|

      å›¾ æ–°å»ºå·¥ç¨‹-13

æ¨¡å—é…ç½®åŠç”Ÿäº§ä»£ç 
------------------

æ¨¡å—é…ç½®
~~~~~~~~

EcuCé…ç½®
~~~~~~~~~~~~~~

|image14|

å›¾ EcuCé…ç½®

æ–°å»ºæºåœ°å€(Source address)å’Œç›®æ ‡åœ°å€(Target
address)çš„æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«é€‰æ‹©SOURCE_ADDRESS_16å’ŒTARGET_ADDRESS_16

|image15|

å›¾ Pdué…ç½®

æ·»åŠ DoIPéœ€è¦çš„Pdu

EthIfé…ç½®
~~~~~~~~~~~~~~

EthIfGeneral
'''''''''''''

|image16|

å›¾ EthIfé…ç½®-EthIfGeneral

EthIfConfigSet
'''''''''''''''

|image17|

å›¾ EthIfé…ç½®-EthIfConfigSet

|image18|

å›¾ EthIfé…ç½®- EthIfConfigSet

æ·»åŠ ä»¥å¤ªç½‘å¯¹åº”çš„å¸§ç±»å‹ï¼Œé€‰æ‹©å¯¹åº”çš„EthIfOwner,è¿™é‡ŒOwnerä¸ºä¸Šå±‚æ¨¡å—ç¼–å·ï¼Œæ­¤å¤„å¯¹åº”EthRxIndicationConfigsä¸­çš„ä»¥å¤ªç½‘æŠ¥æ–‡æ¥æ”¶å›è°ƒå‡½æ•°ã€‚

Eth_DriverApiConfigSet
'''''''''''''''''''''''

|image19|

å›¾ EthIfé…ç½®-Eth_DriverApiConfigSet

å¯¹Ethé©±åŠ¨ä¸­çš„ä»£ç åŸå‹è¿›è¡Œæ˜ å°„ï¼Œéœ€å‚è€ƒMCALæºç è¿›è¡Œä¿®æ”¹ï¼Œä¸€äº›æœªä½¿ç”¨çš„Api(å¦‚TimestampåŠŸèƒ½)éœ€æ”¹ä¸ºNULL_PTRã€‚å¦‚å­˜åœ¨EthTrcvæ¨¡å—ï¼ŒåŒç†åœ¨EthTrcv_DriverApiConfigSetä¸­è¿›è¡Œä¿®æ”¹ã€‚

TcpIpé…ç½®
^^^^^^^^^^

TcpIpGeneral
'''''''''''''

ä½¿èƒ½IPv4(æš‚æ—¶åªæ”¯æŒIPv4)

|image20|

å›¾ TcpIpé…ç½®-TcpIpGeneral

   ä½¿èƒ½TCPå’ŒUDPï¼Œè®¾ç½®å¯¹åº”çš„æœ€å¤§socketæ•°é‡ã€‚

|image21|

å›¾ TcpIpé…ç½®-TcpIpGeneral

TcpIpConfig
''''''''''''

   é€‰æ‹©TcpIpIpConfigæ·»åŠ Arpé…ç½®

|image22|

å›¾ TcpIpé…ç½®-TcpIpConfig

TcpIpLocalAddrs æ·»åŠ DoIPä½¿ç”¨çš„IPåœ°å€

|image23|

å›¾ TcpIpé…ç½®-TcpIpConfig

TcpIpSocketOwnerConfigs
'''''''''''''''''''''''

æ·»åŠ SoAdæ¨¡å—å¯¹åº”çš„æ¥å£Api

|image24|

å›¾ TcpIpé…ç½®-TcpIpConfig

TcpIpTcpConfig
'''''''''''''''

|image25|

å›¾ TcpIpé…ç½®-TcpIpConfig

TcpIpUdpConfig
'''''''''''''''

|image26|

å›¾ TcpIpé…ç½®-TcpIpConfig

SoAdé…ç½®
^^^^^^^^^

SoAdBswModules
'''''''''''''''

|image27|

å›¾ SoAdé…ç½®-SoAdBswModules

å…³è”SoAdç›¸å…³çš„Bswæ¨¡å—

SoAdConfig
'''''''''''

é…ç½®DoIPæ‰€éœ€çš„SoAdPduè·¯ç”±

|image28|

å›¾ SoAdé…ç½®-SoAdConfigs

æ·»åŠ SoAdSocketConnectionGroupsï¼Œè®¾ç½®å¯¹åº”çš„æœ¬åœ°portä»¥åŠä¸åŒè¿æ¥çš„è¿œç«¯åœ°å€

|image29|

å›¾ SoAdé…ç½®-SoAdConfigs

|image30|

å›¾ SoAdé…ç½®-SoAdConfigs

åœ¨SoAdPduRoutesä¸­å…³è”é…ç½®çš„SoAdSocketConnectionGroups

|image31|

å›¾ SoAdé…ç½®-SoAdConfigs

æœ€åè®¾ç½®SoAdSocketRoutes

é€‰æ‹©SoAdSocketè·¯ç”±å¯¹åº”çš„SCGroupConnection

|image32|

å›¾ SoAdé…ç½®-SoAdConfigs

é…ç½®å¯¹åº”çš„RouteDest

|image33|

å›¾ SoAdé…ç½®-SoAdConfigs

DoIPé…ç½®
^^^^^^^^^

DoIPGeneral
''''''''''''

è®¾ç½®DoIPç›¸å…³çš„è®¾ç½®

|image34|

|image35|

å›¾ DoIPé…ç½®-DoIPGenerals

DoIPConfigSet
''''''''''''''

|image36|

å›¾ DoIPé…ç½®-DoIPConfigSets

è®¾ç½®DoIPçš„äº‹ä»¶idï¼Œç»„idå’Œé€»è¾‘åœ°å€ã€‚

|image37|

å›¾ DoIPé…ç½®-DoIPConfigSets

è®¾ç½®DoIPåŠŸèƒ½å¯»å€å’Œç‰©ç†å¯»å€çš„é€šé“ï¼Œé€‰æ‹©é€šé“åœ¨DoIPä¸­çš„Roleï¼Œä»¥åŠå¯¹åº”çš„æºåœ°å€å’Œç›®æ ‡åœ°å€çš„å‚è€ƒç‚¹(åœ¨DoIPConnectionsä¸­è®¾ç½®)ï¼Œä»¥åŠå¯¹åº”çš„æ¥æ”¶å‘é€Pduã€‚

|image38|

å›¾ DoIPé…ç½®-DoIPConfigSets

æ·»åŠ DoIPConnectionsä¸­çš„DoIPTcp&UdpConnectionsï¼Œå¹¶åˆ†åˆ«é…ç½®å¯¹åº”çš„SoAdæ¥æ”¶Pduå’Œå‘é€Pduï¼Œä»¥åŠUdpè¿æ¥åˆ°SoAdçš„ç»„æ’­(å¹¿æ’­)è¿æ¥Pduã€‚

|image39|

å›¾ DoIPé…ç½®-DoIPConfigSets

åœ¨DoIPConnectionsä¸­è®¾ç½®DoIPçš„ç›®æ ‡åœ°å€ã€‚

|image40|

å›¾ DoIPé…ç½®-DoIPConfigSets

åœ¨DoIPRoutingActivationsä¸­æ·»åŠ DoIPConnectionsä¸­è®¾ç½®çš„DoIPç›®æ ‡åœ°å€å‚è€ƒç‚¹

|image41|

å›¾ DoIPé…ç½®-DoIPConfigSets

æ·»åŠ DoIPçš„è¯Šæ–­ä»ªå¹¶é€‰æ‹©å¯¹åº”çš„æºåœ°å€ï¼Œå‚è€ƒè·¯ç”±æ¿€æ´»æ–¹å¼ã€‚

PduRé…ç½®
^^^^^^^^^

PduRBswModules
'''''''''''''''

|image42|

å›¾ PduRé…ç½®-PduRBswModules

æ·»åŠ PduRæœåŠ¡çš„Bswæ¨¡å—ï¼Œé€‰æ‹©å¯¹åº”çš„PduRBswModulesRefåï¼Œå·¥å…·å°†è‡ªåŠ¨å‹¾é€‰æ‰€éœ€Api

PduRoutingTables
'''''''''''''''''

|image43|

å›¾ PduRé…ç½®-PduRRoutingTables

PduRçš„è·¯ç”±è¡¨ï¼Œåœ¨DoIPåè®®æ ˆï¼Œéœ€è¦é…ç½®ä»¥ä¸Šè·¯ç”±ï¼Œè·¯ç”±ç±»å‹é€‰æ‹©TPï¼Œé€‰æ‹©è·¯ç”±ä¸­çš„ç›®æ ‡Pdu(PduRDestPdus)å’ŒæºPdu(PduRSrcPdus)ï¼ŒåŒç†æ·»åŠ åŠŸèƒ½å¯»å€è¯·æ±‚è·¯ç”±å’Œå“åº”è·¯ç”±ã€‚

ComMé…ç½®
^^^^^^^^^

æ·»åŠ ä¸€è·¯ComMçš„é€šé“ï¼Œåé¢Dcmæ¨¡å—éœ€è¦ç”¨åˆ°è¿™é‡Œ

|image44|

å›¾ ComMé…ç½®-ComMConfigSet

Dcmé…ç½®
^^^^^^^^

Dcmæ¨¡å—é…ç½®å¯å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonCAN.pdfã€‹ä¸­Dcmçš„é…ç½®ï¼ŒåŸºäºDoIPçš„è¯Šæ–­é…ç½®åªéœ€ä¿®æ”¹DcmDslæ¨¡å—ï¼š

æ·»åŠ å¯¹åº”çš„DoIPè¯Šæ–­çš„bufferï¼š

|image45|

å›¾ DCMé…ç½®-DCMConfigSets

æ·»åŠ DcmDslProtocol:

|image46|

å›¾ DCMé…ç½®-DCMConfigSets

Demé…ç½®
^^^^^^^^

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonCAN.pdfã€‹ä¸­çš„Demé…ç½®ã€‚

BswMé…ç½®
^^^^^^^^

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonCAN.pdfã€‹ä¸­çš„BswMé…ç½®ã€‚

é…ç½®ä»£ç ç”Ÿæˆ
~~~~~~~~~~~~

#. åœ¨ORIENTAIS
   Stuidoä¸»ç•Œé¢å·¦æ–¹ï¼Œé€‰æ‹©å¯¹åº”çš„åè®®æ ˆï¼Œæˆ–è€…é€‰æ‹©æ•´ä¸ªECUï¼Œå•å‡»å³é”®å¼¹å‡ºValidate
   Allå’ŒGenerate Allèœå•ã€‚

   |image47|

   å›¾ é…ç½®ä»£ç çš„ç”Ÿæˆ-1

#. é€‰æ‹©Validate
   Allå¯¹æœ¬åè®®æ ˆå„é…ç½®é€‰é¡¹è¿›è¡Œæ ¡éªŒï¼Œæ²¡æœ‰é”™è¯¯æç¤ºä¿¡æ¯å³æ ¡éªŒé€šè¿‡ã€‚è‹¥æœ‰é”™è¯¯ä¿¡æ¯ï¼Œè¯·æŒ‰ç…§é”™è¯¯æç¤ºä¿®æ”¹ã€‚

#. é€‰æ‹©Generate
   Allï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚å³ä¸‹è§’çš„Consoleçª—å£è¾“å‡ºç”Ÿæˆçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ã€‚

   |image48|

   å›¾ é…ç½®ä»£ç çš„ç”Ÿæˆ-2

#. å°†ORIENTAIS Studioåˆ‡æ¢åˆ°Resourceæ¨¡å¼ï¼Œå³å¯æŸ¥çœ‹ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ã€‚

   |image49|

   å›¾ é…ç½®ä»£ç çš„ç”Ÿæˆ-3

åŠŸèƒ½é›†æˆ
--------

ä»£ç é›†æˆ
~~~~~~~~

åè®®æ ˆä»£ç åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šé¡¹ç›®æä¾›çš„åè®®æ ˆæºç å’ŒORIENTAIS
Studioé…ç½®ç”Ÿæˆä»£ç ã€‚

ç”¨æˆ·é¡»å°†åè®®æ ˆæºç å’Œç« èŠ‚ï¼ˆé…ç½®ä»£ç ç”Ÿæˆï¼‰ç”Ÿæˆçš„æºä»£ç æ·»åŠ åˆ°é›†æˆå¼€å‘å·¥å…·çš„å¯¹åº”æ–‡ä»¶å¤¹ã€‚åè®®æ ˆé›†æˆçš„æ–‡ä»¶ç»“æ„ï¼Œè§ç« èŠ‚ï¼ˆæºä»£ç é›†æˆï¼‰ã€‚

.. note::
   **åè®®æ ˆé›†æˆä¹‹å‰ï¼Œç”¨æˆ·é¡»ç¡®ä¿å·²ç»æœ‰åŸºç¡€å·¥ç¨‹ï¼Œä¸”æœ¬åè®®æ ˆç›¸å…³çš„å…¶ä»–åè®®æ ˆèƒ½æ­£å¸¸å·¥ä½œã€‚**

é›†æˆæ³¨æ„äº‹é¡¹
~~~~~~~~~~~~

ç”¨æˆ·é¡»æå‰é…ç½®å¥½Ethçš„MCALé©±åŠ¨ï¼Œå¦‚æœä»¥å¤ªç½‘é€šè¿‡ä¸­æ–­å®Œæˆæ¥æ”¶å‘é€ï¼Œåˆ™åœ¨é›†æˆOSä¸­å‰åœ¨OSä¸­é…ç½®å¥½ç›¸å…³çš„ä»¥å¤ªç½‘ä¸­æ–­ã€‚

é›†æˆç¤ºä¾‹
========

æœ¬ç« èŠ‚é€šè¿‡DoIPåè®®æ ˆä¸ºä¾‹ï¼Œå‘ç”¨æˆ·å±•ç¤ºDoIPåè®®æ ˆçš„é›†æˆè¿‡ç¨‹ã€‚ç”¨æˆ·å¯ä»¥æ®æ­¤ç†Ÿæ‚‰DoIPåè®®æ ˆé…ç½®å·¥å…·çš„é…ç½®è¿‡ç¨‹ï¼Œä»¥åŠå¦‚ä½•åº”ç”¨é…ç½®å·¥å…·ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ã€‚

ä¸ºè®©ç”¨æˆ·æ›´æ¸…æ™°çš„äº†è§£å·¥å…·çš„ä½¿ç”¨ï¼Œæ‰€ç”¨çš„é…ç½®å‡é€ä¸€æ‰‹åŠ¨å®Œæˆã€‚å…³äºEthé©±åŠ¨çš„é…ç½®ï¼Œè¯·å‚è€ƒEthé…ç½®æ‰‹å†Œã€‚

.. note::
   **æœ¬ç¤ºä¾‹ä¸ä»£è¡¨ç”¨æˆ·çš„å®é™…é…ç½®æƒ…å†µï¼Œç”¨æˆ·éœ€è¦æ ¹æ®è‡ªå·±çš„å®é™…éœ€æ±‚ï¼Œå†³å®šå„ä¸ªå‚æ•°çš„é…ç½®ã€‚**

é›†æˆç›®æ ‡
--------

DoIPé›†æˆå®Œæˆåéœ€æ ¹æ®ä»¥ä¸‹ç¤ºä¾‹æµ‹è¯•ï¼š

DoIPè¯Šæ–­å‚æ•°

è¡¨ DoIPè¯Šæ–­å‚æ•°

+----------------------+-----------------------------------------------+
| å‚æ•°                 | å€¼                                            |
+======================+===============================================+
| Local IP Address     | 192.168.0.200                                 |
+----------------------+-----------------------------------------------+
| Local Port           | 13400                                         |
+----------------------+-----------------------------------------------+
| Tester SA            | 0x0E80                                        |
+----------------------+-----------------------------------------------+
| ç‰©ç†å¯»å€TA           | 0x16D7                                        |
+----------------------+-----------------------------------------------+
| åŠŸèƒ½å¯»å€TA           | 0xE400                                        |
+----------------------+-----------------------------------------------+
| ActiveLine           | ä¸Šç”µå¼€å¯Active                                |
+----------------------+-----------------------------------------------+
| RoutingActiveNumber  | 0                                             |
+----------------------+-----------------------------------------------+
| DoIP Protocol        | 0x02                                          |
| Version              |                                               |
+----------------------+-----------------------------------------------+
| è¯Šæ–­ç¤ºä¾‹DID          | 0xF183ï¼ˆRï¼šAll                                |
|                      | Sessionï¼ŒWï¼š1003Sessionï¼ŒLevel3Securityï¼‰     |
+----------------------+-----------------------------------------------+

DoIPæŠ¥æ–‡ç¤ºä¾‹

è¡¨ DoIPè¯Šæ–­ç¤ºä¾‹æŠ¥æ–‡

+----------------------+-----------------------------------------------+
| æŠ¥æ–‡ç±»å‹             | æŠ¥æ–‡æ ¼å¼                                      |
+======================+===============================================+
| è·¯ç”±æ¿€æ´»è¯·æ±‚         | 02 FD 00 05 00 00 00 07 0E 80 00 00 00 00 00  |
+----------------------+-----------------------------------------------+
| ç‰©ç†å¯»å€1003è¯Šæ–­è¯·æ±‚ | 02 FD 80 01 00 00 00 06 0E 80 16 D7 10 03     |
+----------------------+-----------------------------------------------+
| åŠŸèƒ½å¯»å€1003è¯Šæ–­è¯·æ±‚ | 02 FD 80 01 00 00 00 06 0E 80 E4 00 10 03     |
+----------------------+-----------------------------------------------+
| è¯·æ±‚Level3 Seed      | 02 FD 80 01 00 00 00 06 0E 80 16 D7 27 05     |
+----------------------+-----------------------------------------------+
| å‘é€Level3 Key       | 02 FD 80 01 00 00 00 0A 0E 80 16 D7 27 06 XX  |
|                      | XX XX XX                                      |
+----------------------+-----------------------------------------------+
| å†™DIDä¿¡æ¯            | 02 FD 80 01 00 00 00 0B 0E 80 16 D7 2E F1 83  |
|                      | 00 00 00 00                                   |
+----------------------+-----------------------------------------------+
| è¯»DIDä¿¡æ¯            | 02 FD 80 01 00 00 00 07 0E 80 16 D7 22 F1 83  |
+----------------------+-----------------------------------------------+

æºä»£ç é›†æˆ
----------

é¡¹ç›®äº¤ä»˜ç»™ç”¨æˆ·çš„å·¥ç¨‹ç»“æ„å¦‚ä¸‹ï¼š

|image50|

å›¾å·¥ç¨‹ç»“æ„ç›®å½•

- ./BSW/Config/BSW_Configç›®å½•ï¼Œè¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ORIENTAIS
  studioé…ç½®å·¥å…·ç”Ÿæˆçš„é…ç½®æ–‡ä»¶

- ./BSWç›®å½•å­˜æ”¾æ¨¡å—ç›¸å…³çš„æºä»£ç ï¼ˆé™¤./BSW/Configç›®å½•ä¹‹å¤–ï¼‰ã€‚å¯ä»¥çœ‹åˆ°Sourceç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶å¤¹ä¸‹æ˜¯å„ä¸ªæ¨¡å—çš„æºä»£ç ã€‚

åè®®æ ˆè°ƒåº¦é›†æˆ
--------------

DoIPåè®®æ ˆè°ƒåº¦é›†æˆæ­¥éª¤å¦‚ä¸‹ï¼š

#. åè®®æ ˆè°ƒåº¦é›†æˆã€‚

#. ç¼–è¯‘é“¾æ¥ä»£ç ï¼Œå°†ç”Ÿæˆçš„elfæ–‡ä»¶çƒ§å†™è¿›èŠ¯ç‰‡ã€‚

ä½¿ç”¨iRteé›†æˆ
~~~~~~~~~~~~

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonCAN.pdfã€‹ä¸­çš„ä½¿ç”¨iRteé›†æˆã€‚

ä½¿ç”¨Rteé›†æˆ
~~~~~~~~~~~

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonCAN.pdfã€‹ä¸­çš„ä½¿ç”¨Rteé›†æˆã€‚

éªŒè¯ç»“æœ
--------

ç¨‹åºè¿è¡Œåä½¿ç”¨ç½‘ç»œè°ƒè¯•åŠ©æ‰‹å‘é€ä»¥ä¸‹æŒ‡ä»¤éªŒè¯DoIPè¯Šæ–­åŠŸèƒ½ï¼š

|image51|

|image52|

|image53|

|image54|

å›¾DoIPæŠ¥æ–‡äº¤äº’ç»“æœç¤ºä¾‹

.. |image1| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image2.png
   :width: 5.76736in
   :height: 3.10347in
.. |image2| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image3.png
   :width: 5.76736in
   :height: 3.10694in
.. |image3| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image4.png
   :width: 3.79528in
   :height: 3.62205in
.. |image4| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image5.png
   :width: 3.8072in
   :height: 2.92887in
.. |image5| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image6.png
   :width: 5.76736in
   :height: 3.10694in
.. |image6| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image7.png
   :width: 3.82677in
   :height: 3.51969in
.. |image7| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image8.png
   :width: 5.76736in
   :height: 3.10694in
.. |image8| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image9.png
   :width: 4.29138in
   :height: 8.50899in
.. |image9| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image10.png
   :width: 4.37363in
   :height: 5.05676in
.. |image10| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image11.png
   :width: 4.75486in
   :height: 2.975in
.. |image11| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image12.png
   :width: 5.76319in
   :height: 4.34722in
.. |image12| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image13.png
   :width: 3.78745in
   :height: 4.07111in
.. |image13| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image14.png
   :width: 5.00311in
   :height: 4.46673in
.. |image14| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image15.png
   :width: 5.76736in
   :height: 2.62222in
.. |image15| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image16.png
   :width: 5.76736in
   :height: 2.62222in
.. |image16| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image17.png
   :width: 5.76736in
   :height: 2.62569in
.. |image17| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image18.png
   :width: 5.76736in
   :height: 2.62569in
.. |image18| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image19.png
   :width: 5.76736in
   :height: 2.62222in
.. |image19| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image20.png
   :width: 5.76736in
   :height: 2.62222in
.. |image20| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image21.png
   :width: 5.76736in
   :height: 2.62222in
.. |image21| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image22.png
   :width: 5.76736in
   :height: 2.62222in
.. |image22| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image23.png
   :width: 5.76736in
   :height: 2.62222in
.. |image23| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image24.png
   :width: 5.76736in
   :height: 2.62222in
.. |image24| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image25.png
   :width: 5.76736in
   :height: 2.62222in
.. |image25| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image26.png
   :width: 5.76736in
   :height: 2.62222in
.. |image26| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image27.png
   :width: 5.76736in
   :height: 2.62222in
.. |image27| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image28.png
   :width: 5.76736in
   :height: 2.62222in
.. |image28| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image29.png
   :width: 5.76736in
   :height: 2.62222in
.. |image29| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image30.png
   :width: 5.76736in
   :height: 2.62222in
.. |image30| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image31.png
   :width: 5.76736in
   :height: 2.62222in
.. |image31| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image32.png
   :width: 5.76736in
   :height: 2.62222in
.. |image32| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image33.png
   :width: 5.76736in
   :height: 2.62222in
.. |image33| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image34.png
   :width: 5.76736in
   :height: 2.62222in
.. |image34| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image35.png
   :width: 5.76736in
   :height: 2.62222in
.. |image35| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image36.png
   :width: 5.76736in
   :height: 2.62222in
.. |image36| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image37.png
   :width: 5.76736in
   :height: 2.62222in
.. |image37| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image38.png
   :width: 5.76736in
   :height: 2.62222in
.. |image38| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image39.png
   :width: 5.76736in
   :height: 2.62222in
.. |image39| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image40.png
   :width: 5.76736in
   :height: 2.62222in
.. |image40| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image41.png
   :width: 5.76736in
   :height: 2.62222in
.. |image41| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image42.png
   :width: 5.76736in
   :height: 2.62222in
.. |image42| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image43.png
   :width: 5.76736in
   :height: 2.62222in
.. |image43| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image44.png
   :width: 5.76736in
   :height: 2.62222in
.. |image44| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image45.png
   :width: 5.76736in
   :height: 2.62222in
.. |image45| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image46.png
   :width: 5.76736in
   :height: 2.62222in
.. |image46| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image47.png
   :width: 5.76736in
   :height: 2.62222in
.. |image47| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image48.png
   :width: 3.6415in
   :height: 4.21147in
.. |image48| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image49.png
   :width: 5.76736in
   :height: 2.19931in
.. |image49| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image50.png
   :width: 5.76736in
   :height: 3.10347in
.. |image50| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image51.png
   :width: 2.90625in
   :height: 4.44792in
.. |image51| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image52.png
   :width: 5.76736in
   :height: 4.80139in
.. |image52| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image53.png
   :width: 5.76736in
   :height: 2.91458in
.. |image53| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image54.png
   :width: 5.76736in
   :height: 4.67639in
.. |image54| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_DoIP/image55.png
   :width: 5.76736in
   :height: 3.09236in
