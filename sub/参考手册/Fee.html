<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Fee &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../genindex.html" />
            <link rel="search" title="Search" href="../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
            <link rel="next" title="FiM" href="FiM.html" />
            <link rel="prev" title="EthTSyn" href="EthTSyn.html" />
    </head>
<body>
    <script type="text/javascript" src="../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="CanTrcv.html">CanTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="ComXf.html">ComXf</a></li>
<li class="toctree-l1"><a class="reference internal" href="CRC.html">CRC</a></li>
<li class="toctree-l1"><a class="reference internal" href="CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="Crypto.html">Crypto</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSM.html">CSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="DCM.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="Det.html">DET</a></li>
<li class="toctree-l1"><a class="reference internal" href="Dlt.html">DLT</a></li>
<li class="toctree-l1"><a class="reference internal" href="DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="E2EL.html">E2EL</a></li>
<li class="toctree-l1"><a class="reference internal" href="E2EXf.html">E2EXf</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ea.html">EA</a></li>
<li class="toctree-l1"><a class="reference internal" href="EcuC.html">EcuC</a></li>
<li class="toctree-l1"><a class="reference internal" href="EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="Eep.html">EEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="FiM.html">FiM</a></li>
<li class="toctree-l1"><a class="reference internal" href="FOTA%20handler.html">FOTA Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="IoHwAb.html">IoHwAb</a></li>
<li class="toctree-l1"><a class="reference internal" href="IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="NmIf.html">NmIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="OS.html">OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="SomeIpXf.html">SomeIpXf</a></li>
<li class="toctree-l1"><a class="reference internal" href="StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="XCP.html">XCP</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16 Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397 Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148 Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Fee</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="https://github.com/wagtail/sphinx_wagtail_theme/blob/main/docs/sub/参考手册/Fee.rst" rel="nofollow">
        <span class="btn-icon"><span class="fab fa-github"></span></span>
        <span class="btn-text">Edit on GitHub</span>
    </a>
    <a class="btn btn-sm btn-light text-decoration-none" href="../../_sources/sub/参考手册/Fee.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="fee">
<h1>Fee<a class="headerlink" href="#fee" title="Link to this heading">¶</a></h1>
<p><strong>缩写词注解</strong></p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>缩写词</strong></p></td>
<td><p><strong>英文全称</strong></p></td>
<td><p><strong>中文解释</strong></p></td>
</tr>
<tr class="row-even"><td><p>EA</p></td>
<td><p>EEPROM Abstraction</p></td>
<td><p>Eeprom抽象模块</p></td>
</tr>
<tr class="row-odd"><td><p>FEE</p></td>
<td><p>Flash EEPROM Emulation</p></td>
<td><p>Flash模拟Eeprom抽象模块</p></td>
</tr>
<tr class="row-even"><td><p>MemIf</p></td>
<td><p>Memory Abstraction
Interface</p></td>
<td><p>存储抽象接口模块</p></td>
</tr>
<tr class="row-odd"><td><p>NvM</p></td>
<td><p>NVRAM Manager</p></td>
<td><p>非易失性存储管理模块</p></td>
</tr>
<tr class="row-even"><td><p>(Logical)
block</p></td>
<td><p>Smallest writable /
erasable unit as seen by
the modules user.
Consists of one or</p>
<p>more virtual pages.</p>
</td>
<td><p>上层模块
可操作单元（虚拟页的整数倍）</p></td>
</tr>
<tr class="row-odd"><td><p>Virtual
page</p></td>
<td><p>May consist of one or
several physical pages</p></td>
<td><p>虚拟页（物理页的整数倍）</p></td>
</tr>
<tr class="row-even"><td><p>Bank</p></td>
<td><p>May consist of one or
several physical sectors</p></td>
<td><p>Fee实现模拟Eeprom的擦除块</p></td>
</tr>
</tbody>
</table>
<section id="id1">
<h2>简介<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>Fee模块通过模拟Eeprom（不用先擦除再写入）主要实现基于Block的非易失性数据读、写功能，同时支持Immediate
Block的擦除，支持Block的无效操作，支持存储快慢模式的切换，支持任务的取消机制，支持模块状态及任务结果的获取。</p>
<p><a class="reference internal" href="../../_images/image1103.png"><img alt="image1" src="../../_images/image1103.png" style="width: 5.76736in; height: 3.00764in;" /></a>图 Fee模块层次图</p>
<p>Fee模块处于AUTOSAR架构中的存储硬件抽象层，其下层模块为Flash驱动模块，上层模块为MemIf、NvM。</p>
<p>Fee模块实现上层模块基于Block在Flash上的读写、无效、擦除（Immediate）操作。</p>
<section id="id2">
<h3>参考资料<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>[1] AUTOSAR_SWS_FlashEEPROMEmulation.pdf，R19-11</p>
<p>[2] AUTOSAR_SWS_FlashDriver.pdf，R19-11</p>
<p>[3] AUTOSAR_SWS_MemoryAbstractionInterface.pdf，R19-11</p>
<p>[4] AUTOSAR_SWS_NVRAMManager.pdf，R19-11</p>
</section>
</section>
<section id="id3">
<h2>功能描述<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<section id="id4">
<h3>模块初始化<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<section id="id5">
<h4>模块初始化功能介绍<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<p>Fee模块的初始化会加载Flash中存储的所有Block的状态及其存储地址等信息，以及计算存储新Block数据及管理信息的地址。</p>
</section>
<section id="id6">
<h4>模块初始化功能实现<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<p>因为Fee初始化可能涉及大量的Flash读操作，以及可能发生的Flash擦除、写入操作，通常耗时较长。所以Fee的初始化通过异步实现，Fee_Init加载初始化任务，由Fee_MainFunction来实际执行。</p>
</section>
</section>
<section id="block">
<h3>Block操作功能<a class="headerlink" href="#block" title="Link to this heading">¶</a></h3>
<section id="id7">
<h4>Block操作功能介绍<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h4>
<p>Fee提供基于Block的读、写、无效、擦除（Immediate）操作，实现Block数据在Flash上的非易失性存储功能。</p>
</section>
<section id="id8">
<h4>Block操作功能实现<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Fee模块对Block的操作是单任务的，同一时间只能处理一个任务，任务</p></li>
</ol>
<p>处理过程中不能加载新的任务。</p>
<ol class="arabic simple" start="2">
<li><p>Fee模块对Block的操作都是通过异步机制实现，通过调用Fee_Read，</p></li>
</ol>
<p>Fee_Write，Fee_InvalidateBlock，Fee_EraseImmediateBlock加载任务，在Fee_MainFunction中实际执行。</p>
<ol class="arabic simple" start="3">
<li><p>Block的区分通过参数BlockNumber决定，各个Block的BlockNumber</p></li>
</ol>
<p>唯一，存储栈集成时BlockNumber的配置需要与NvMDatasetSelectionBits及关联NvM模块中Block的NvMBlockManagementType适配。</p>
<ol class="arabic simple" start="4">
<li><p>任务的结果支持两种机制反馈给上层模块：</p></li>
</ol>
<ul class="simple">
<li><p>Polling：实现接口Fee_GetJobResult供上层随时获取Job结果；</p></li>
<li><p>Notification：任务成功/失败通过调用上层回调函数通知，如NvM_JobEndNotification/NvM_JobErrorNotification；</p></li>
</ul>
<ol class="arabic simple" start="5">
<li><p>配置为Immediate的Block才支持Fee_EraseImmediateBlock操作，且在</p></li>
</ol>
<p>调用Fee_Write前需要先执行完Fee_EraseImmediateBlock任务。</p>
</section>
</section>
<section id="flash">
<h3>Flash访问功能<a class="headerlink" href="#flash" title="Link to this heading">¶</a></h3>
<section id="id9">
<h4>Flash访问功能介绍<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h4>
<p>Fee功能的实现依赖于通过Flash驱动实现Flash的擦除、读、写功能，以及任务取消，任务结果获取，快慢模式设置等机制。</p>
</section>
<section id="id10">
<h4>Flash访问功能实现<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h4>
<p>Flash驱动中Flash数据的擦除、读、写同样通过异步机制实现，Fee模块与Flash驱动之间任务结果的交互同样分两种机制：</p>
<ul class="simple">
<li><p>Polling：Fee_MainFunction中调用Fls_GetJobResult获取Job结果；</p></li>
<li><p>Notification：任务成功/失败Flash驱动通过调用Fee回调函数通知（Fee_JobEndNotification/Fee_JobErrorNotification）；</p></li>
</ul>
</section>
</section>
<section id="id11">
<h3>错误检测功能<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<section id="id12">
<h4>错误检测功能介绍<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h4>
<p>Fee模块实现DET开发错误和DET运行时错误检测及报错。</p>
</section>
<section id="id13">
<h4>错误检测功能实现<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Type or error</p></td>
<td><p>Relevance</p></td>
<td><p>Related error code</p></td>
<td><p>Val
ue[hex]</p></td>
</tr>
<tr class="row-even"><td><p>未初始化</p></td>
<td><p>De
velopment</p></td>
<td><p>FEE_E_UNINIT</p></td>
<td><p>0x01</p></td>
</tr>
<tr class="row-odd"><td><p>BlockNumber错误</p></td>
<td><p>De
velopment</p></td>
<td><p>FEE_E_INVALID_BLOCK_NO</p></td>
<td><p>0x02</p></td>
</tr>
<tr class="row-even"><td><p>Block
offset错误</p></td>
<td><p>De
velopment</p></td>
<td><p>FEE_E_INVALID_BLOCK_OFS</p></td>
<td><p>0x03</p></td>
</tr>
<tr class="row-odd"><td><p>数据指针错误</p></td>
<td><p>De
velopment</p></td>
<td><p>FEE_E_PARAM_POINTER</p></td>
<td><p>0x04</p></td>
</tr>
<tr class="row-even"><td><p>Block
length错误</p></td>
<td><p>De
velopment</p></td>
<td><p>FEE_E_INVALID_BLOCK_LEN</p></td>
<td><p>0x05</p></td>
</tr>
<tr class="row-odd"><td><p>Fee初始化失败</p></td>
<td><p>De
velopment</p></td>
<td><p>FEE_E_I
NIT_FAILED（R20_11已删除）</p></td>
<td><p>0x09</p></td>
</tr>
<tr class="row-even"><td><p>Bus
y状态请求新任务</p></td>
<td><p>Runtime</p></td>
<td><p>FEE_E_BUSY</p></td>
<td><p>0x06</p></td>
</tr>
<tr class="row-odd"><td><p>无任务正在执行
时请求任务取消</p></td>
<td><p>Runtime</p></td>
<td><p>FEE_E_INVALID_CANCEL</p></td>
<td><p>0x08</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id14">
<h2>源文件描述<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h2>
<p>表 Fee组件文件描述</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>文件</strong></p></td>
<td><p><strong>说明</strong></p></td>
</tr>
<tr class="row-even"><td><p>Fee_Cfg.h</p></td>
<td><p>定义Fee模块PC配置的宏定义。</p></td>
</tr>
<tr class="row-odd"><td><p>Fee_Cfg.c</p></td>
<td><p>定义Fee模块PC/PB配置的结构体参数。</p></td>
</tr>
<tr class="row-even"><td><p>Fee.h</p></td>
<td><p>实现Fee模块全部外
部接口（除了回调函数）的声明，以及模块内部宏定义。</p></td>
</tr>
<tr class="row-odd"><td><p>Fee.c</p></td>
<td><p>作为Fee模块的核
心文件，实现Fee模块全部对外接口，以及实现Fee模块功
能所必须的local函数，local宏定义，local变量定义。</p></td>
</tr>
<tr class="row-even"><td><p>Fee_Cbk.h</p></td>
<td><p>实现Fee模块全部回调函数的声明。</p></td>
</tr>
<tr class="row-odd"><td><p>Fee_Types.h</p></td>
<td><p>实现PB/PC配置参数结构体类型的定义。</p></td>
</tr>
<tr class="row-even"><td><p>Fee_MemMap.h</p></td>
<td><p>实现Fee模块内存布局。</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#fee">Fee</a>
InternalTypes.h</p></td>
<td><p>实现Fee内部管理数据类型的定义。</p></td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../../_images/image258.png"><img alt="image2" src="../../_images/image258.png" style="width: 5.76736in; height: 2.78542in;" /></a></p>
<p>图 Fee组件文件交互关系图</p>
</section>
<section id="api">
<h2>API接口<a class="headerlink" href="#api" title="Link to this heading">¶</a></h2>
<section id="id15">
<h3>类型定义<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<section id="fee-configtype">
<h4>Fee_ConfigType类型定义<a class="headerlink" href="#fee-configtype" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>名称</p></td>
<td><p>Fee_ConfigType</p></td>
</tr>
<tr class="row-even"><td><p>类型</p></td>
<td><p>struct</p></td>
</tr>
<tr class="row-odd"><td><p>范围</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-even"><td><p>描述</p></td>
<td><p>Fee模块配置数据结构体类型</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id16">
<h3>输入函数描述<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>输入模块</strong></p></td>
<td><p><strong>API</strong></p></td>
</tr>
<tr class="row-even"><td><p>Fls</p></td>
<td><p>Fls_Cancel</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Fls_Erase</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Fls_GetJobResult</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Fls_Read</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Fls_SetMode</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Fls_Write</p></td>
</tr>
<tr class="row-even"><td><p>SchM</p></td>
<td><p>SchM_Enter_Fee</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>SchM_Exit_Fee</p></td>
</tr>
<tr class="row-even"><td><p>Det</p></td>
<td><p>Det_ReportRuntimeError</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Det_ReportError</p></td>
</tr>
<tr class="row-even"><td><p>NvM</p></td>
<td><p>NvM_JobEndNotification</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>NvM_JobErrorNotification</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id17">
<h3>静态接口函数定义<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h3>
<section id="fee-init">
<h4>Fee_Init函数定义<a class="headerlink" href="#fee-init" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_Init</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(void, FEE_CODE)</p>
<p>Fee_Init(P2C
ONST(Fee_ConfigType,
AUTOMATIC,
FEE_APPL_CONST)
ConfigPtr)</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x00</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同
步/异步：</p></td>
<td><p>异步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>Confi
gPtr：配置设置的指针</p></td>
<td><p>值
域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>F
ee模块初始化任务加载</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-setmode">
<h4>Fee_SetMode函数定义<a class="headerlink" href="#fee-setmode" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_SetMode</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(void,
FEE_CODE)</p>
<p>Fee_SetMode(VA
R(MemIf_ModeType,
AUTOMATIC) Mode)</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x01</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>异步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>Mode</p></td>
<td><p>值
域：</p></td>
<td><p>MEMIF_MODE_SLOW</p>
<p>MEMIF_MODE_FAST</p>
</td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>请求设置存储
模式（SLOW/FAST）</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-read">
<h4>Fee_Read函数定义<a class="headerlink" href="#fee-read" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_Read</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUN
C(Std_ReturnType,
FEE_CODE)</p>
<p>Fee_Read(</p>
<p>VAR(uint16,
AUTOMATIC)
BlockNumber,</p>
<p>VAR(uint16,
AUTOMATIC)
BlockOffset,</p>
<p>P2VAR(uint8,
AUTOMATIC,
FEE_APPL_DATA)
DataBufferPtr,</p>
<p>VAR(uint16,
AUTOMATIC)
Length)</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x02</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>异步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>BlockNumber
BlockOffset</p>
<p>Length</p>
</td>
<td><p>值域：</p></td>
<td><p>0…65535</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>0…65535</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>0…65535</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>DataB
ufferPtr：Pointer
to data buffer</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>Std_ReturnType：</p>
<p>E_OK: The
requested job has
been accepted by
the module.</p>
<p>E_NOT_OK: The
requested job has
not been accepted
by the module.</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>请求Block的读任务</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-write">
<h4>Fee_Write函数定义<a class="headerlink" href="#fee-write" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_Write</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUN
C(Std_ReturnType,
FEE_CODE)</p>
<p><a class="reference internal" href="#fee">Fee</a>
Write(VAR(uint16,
AUTOMATIC)
BlockNumber,
P2CONST(uint8,
AUTOMATIC,
FEE_APPL_CONST)
DataBufferPtr)</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x03</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>异步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>BlockNu
mber：block的序号</p></td>
<td><p>值域：</p></td>
<td><p>0…65535</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Da
taBufferPtr：指向
DataBuffer的指针</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-even"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>返回值：</p></td>
<td><p>Std_ReturnType</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>功能概述：</p></td>
<td><p>请求Block的写任务</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-cancel">
<h4>Fee_Cancel函数定义<a class="headerlink" href="#fee-cancel" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_Cancel</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(void,
FEE_CODE)
Fee_Cancel(void)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x04</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>同步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>无</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>请求正
在执行的任务取消</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-getstatus">
<h4>Fee_GetStatus函数定义<a class="headerlink" href="#fee-getstatus" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_GetStatus</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(
MemIf_StatusType,
FEE_CODE)
Fe
e_GetStatus(void)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x05</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>同步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>无</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>MemIf_StatusType</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>获
取Fee模块当前状态</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-getjobresult">
<h4>Fee_GetJobResult函数定义<a class="headerlink" href="#fee-getjobresult" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_GetJobResult</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(Mem
If_JobResultType,
FEE_CODE)
Fee_G
etJobResult(void)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x06</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>同步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>无</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>MemI
f_JobResultType：</p>
<p>MEMIF_UNINIT:
FEE模块没有初始化</p>
<p>MEMIF_IDLE:
FEE模块
当前处于空闲状态</p>
<p>MEMIF_BUSY:
FEE模块当前正忙</p>
<p>MEM
IF_BUSY_INTERNAL:
FEE模块
忙于内部管理操作</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>获取当前任务结果</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-invalidateblock">
<h4>Fee_InvalidateBlock函数定义<a class="headerlink" href="#fee-invalidateblock" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fe
e_InvalidateBlock</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUN
C(Std_ReturnType,
FEE_CODE)
Fee_Invalidate
Block(VAR(uint16,
AUTOMATIC)
BlockNumber)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x07</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>异步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>Block
Number：block序号</p></td>
<td><p>值域：</p></td>
<td><p>0…65535</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>Std_ReturnType：</p>
<p>E_OK:请求的
任务已被模块接受</p>
<p>E_N
OT_OK：仅当启用了
DET时:所请求的任
务尚未被模块接受</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>请求Block无效任务</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-getversioninfo">
<h4>Fee_GetVersionInfo函数定义<a class="headerlink" href="#fee-getversioninfo" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>F
ee_GetVersionInfo</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(void,
FEE_CODE)</p>
<p>Fee_GetVers
ionInfo(P2VAR(Std
_VersionInfoType,
AUTOMATIC,
FEE_APPL_DATA)
VersionInfoPtr)</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x08</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>同步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>是</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>无</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>VersionInfoPtr</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>获取Fe
e模块软件版本信息</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-eraseimmediateblock">
<h4>Fee_EraseImmediateBlock函数定义<a class="headerlink" href="#fee-eraseimmediateblock" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_Er
aseImmediateBlock</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUN
C(Std_ReturnType,
FEE_CODE)
F
ee_EraseImmediate
Block(VAR(uint16,
AUTOMATIC)
BlockNumber)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x09</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>异步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>Block
Number：block序号</p></td>
<td><p>值域：</p></td>
<td><p>0…65535</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>Std_ReturnType：</p>
<p>E_OK:请求的
任务已被模块接受</p>
<p>E_N
OT_OK：仅当启用了
DET时:所请求的任
务尚未被模块接受</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>请求立
即Block的擦除任务</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-jobendnotification">
<h4>Fee_JobEndNotification函数定义<a class="headerlink" href="#fee-jobendnotification" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_J
obEndNotification</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(void,
FEE_CODE)
Fee_JobEndN
otification(void)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x10</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>同步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>无</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>Flash访问（异
步操作）成功通知</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-joberrornotification">
<h4>Fee_JobErrorNotification函数定义<a class="headerlink" href="#fee-joberrornotification" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_Job
ErrorNotification</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(void,
FEE_CODE)
Fee_JobErrorN
otification(void)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x11</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>同步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>无</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>Flash访问（异
步操作）失败通知</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fee-mainfunction">
<h4>Fee_MainFunction函数定义<a class="headerlink" href="#fee-mainfunction" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>函数名称：</p></td>
<td><p>Fee_MainFunction</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>函数原型：</p></td>
<td><p>FUNC(void,
FEE_CODE)
Fee_M
ainFunction(void)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>服务编号：</p></td>
<td><p>0x12</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>同步/异步：</p></td>
<td><p>同步</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>是
否可重入：</p></td>
<td><p>否</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输入参数：</p></td>
<td><p>无</p></td>
<td><p>值域：</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td><p>输入
输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>输出参数：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>返回值：</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>功能概述：</p></td>
<td><p>Fee模块
的周期调度主函数</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id18">
<h3>可配置函数定义<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h3>
<p>无。</p>
</section>
</section>
<section id="id19">
<h2>配置<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h2>
<section id="feegeneral">
<h3>FeeGeneral<a class="headerlink" href="#feegeneral" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../_images/image340.png"><img alt="image3" src="../../_images/image340.png" style="width: 5.76736in; height: 3.17361in;" /></a></p>
<p>图 FeeGeneral</p>
<p>表 FeeGeneral</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>UI名称</strong></p></td>
<td><p><strong>描述</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Fee
DevErrorDetect</p></td>
<td><p>取值范围</p></td>
<td><p>True/False</p></td>
<td><p>默认
取值</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>是否使能
DET开发错误检测机制</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于Det模块开
发错误报错接口的支持</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeMain
FunctionPeriod</p></td>
<td><p>取值范围</p></td>
<td><p>0 … INF</p></td>
<td><p>默认
取值</p></td>
<td><p>0.01</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>Fee_Ma
inFunction的调度周期</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeNvmJobE
ndNotification</p></td>
<td><p>取值范围</p></td>
<td><p>配置项0-1
属性，配置类型string</p></td>
<td><p>默认
取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>任务执行成功通知</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于上
层模块相应回调函数名</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeNvmJobErr
orNotification</p></td>
<td><p>取值范围</p></td>
<td><p>配置项0-1
属性，配置类型string</p></td>
<td><p>默认
取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>任务执行失败通知</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于上
层模块相应回调函数名</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeePollingMode</p></td>
<td><p>取值范围</p></td>
<td><p>true/false</p></td>
<td><p>默认
取值</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>Fla
sh访问是否使能轮询模
式，反之则为通知模式</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>通知模式需要F
lash驱动相应功能支持</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeSe
tModeSupported</p></td>
<td><p>取值范围</p></td>
<td><p>true/false</p></td>
<td><p>默认
取值</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>是否使能Fee_SetMode</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于Fla
sh驱动相应功能的使能</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Fee
VersionInfoApi</p></td>
<td><p>取值范围</p></td>
<td><p>true/false</p></td>
<td><p>默认
取值</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>是否支
持Fee_GetVersionInfo</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeV
irtualPageSize</p></td>
<td><p>取值范围</p></td>
<td><p>0 … 65535</p></td>
<td><p>默认
取值</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>虚拟页大小</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>关联Flash
驱动的物理页的整数倍</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeUse
rCbkHeaderFile</p></td>
<td><p>取值范围</p></td>
<td><p>配置属性
0-N，配置类型string</p></td>
<td><p>默认
取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>Fee调用上层模块
回调函数声明的头文件</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>回
调函数声明的头文件名</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeCancelApi</p></td>
<td><p>取值范围</p></td>
<td><p>true/false</p></td>
<td><p>默认
取值</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>是否使能Fee_Cancel</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于Fla
sh驱动相应功能的使能</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeInitErr
orNotification</p></td>
<td><p>取值范围</p></td>
<td><p>配置项0-1
属性，配置类型string</p></td>
<td><p>默认
取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>Fee初始化失败通知</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于上
层模块相应回调函数名</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeePageDire
ctWriteSupport</p></td>
<td><p>取值范围</p></td>
<td><p>true/false</p></td>
<td><p>默认
取值</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>是否使
能Flash数据多次写入
（未擦除），以节约B
lock管理数据占用资源</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于FeeVir
tualPageSize的大小以
及Flash硬件特性支持</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="feebank">
<h3>FeeBank<a class="headerlink" href="#feebank" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../_images/image435.png"><img alt="image4" src="../../_images/image435.png" style="width: 5.76736in; height: 1.40625in;" /></a></p>
<p>图 FeeBank</p>
<p>表 FeeBank</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>UI名称</strong></p></td>
<td><p><strong>描述</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeBankIndex</p></td>
<td><p>取值范围</p></td>
<td><p>0…N</p></td>
<td><p>默认取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>Fee Bank的Index</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>从
0开始工具自动排序</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeB
ankStartaddress</p></td>
<td><p>取值范围</p></td>
<td><p>0…N</p></td>
<td><p>默认取值</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>Bank的起始地址</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>当FeeBankRef配置
时，工具从Flash驱
动自动获取填充（
不能手动配置）；</p>
<p>当FeeBa
nkRef未配置时，需
手动配置（手动配
置时由配置人员来
保证配置正确性）</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeBankSize</p></td>
<td><p>取值范围</p></td>
<td><p>0…N</p></td>
<td><p>默认取值</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>Bank的大小</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>当FeeBankRef配置
时，工具从Flash驱
动自动获取填充（
不能手动配置）；</p>
<p>当FeeBa
nkRef未配置时，需
手动配置（手动配
置时由配置人员来
保证配置正确性）</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeBankRef</p></td>
<td><p>取值范围</p></td>
<td><p>配置
属性0-1，关联配置</p></td>
<td><p>默认取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>关
联Flash驱动Secto
rList中某一Sector</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>依赖于Flas
h驱动的Sector配置</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="feeblockconfiguration">
<h3>FeeBlockConfiguration<a class="headerlink" href="#feeblockconfiguration" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../_images/image533.png"><img alt="image5" src="../../_images/image533.png" style="width: 5.76736in; height: 2.25208in;" /></a></p>
<p>图 FeeBlockConfiguration</p>
<p>表 FeeBlockConfiguration</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>UI名称</strong></p></td>
<td><p><strong>描述</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeBlockNumber</p></td>
<td><p>取值范围</p></td>
<td><p>1…65534</p></td>
<td><p>默认取值</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>Bl
ock的Bloc
kNumber号</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>各
个Block的
BlockNum
ber号唯一</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeBlockSize</p></td>
<td><p>取值范围</p></td>
<td><p>1…65535</p></td>
<td><p>默认取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>Bl
ock的大小</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>Block的
大小需为
FeeVirtu
alPageSiz
e的整数倍</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeImmediateData</p></td>
<td><p>取值范围</p></td>
<td><p>t
rue/false</p></td>
<td><p>默认取值</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>表示该Bl
ock是否为
立即Block</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeNum
berOfWriteCycles</p></td>
<td><p>取值范围</p></td>
<td><p>0…4
294967295</p></td>
<td><p>默认取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>该bl
ock所需的
写周期数</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeDeviceIndex</p></td>
<td><p>取值范围</p></td>
<td><p>t
rue/false</p></td>
<td><p>默认取值</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>对存储该
block的设
备的引用</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>无</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="feepublishedinformation">
<h3>FeePublishedInformation<a class="headerlink" href="#feepublishedinformation" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../_images/image633.png"><img alt="image6" src="../../_images/image633.png" style="width: 5.3767in; height: 1.59067in;" /></a></p>
<p>图 FeePublishedInformation</p>
<p>表 FeePublishedInformation</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>UI名称</strong></p></td>
<td><p><strong>描述</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>FeeBlockOverhead</p></td>
<td><p>取值范围</p></td>
<td><p>0…65535</p></td>
<td><p>默认
取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>参数描述</p></td>
<td><p>每个Block的管
理数据长度（byte）</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>依赖关系</p></td>
<td><p>工具自动计算生成（F
eeVirtualPageSize和</p>
<p>FeePageD
irectWriteSupport）</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FeeBankOverhead</p></td>
<td><p>取值范围</p></td>
<td><p>0…65535</p></td>
<td><p>默认
取值</p></td>
<td><p>无</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>参数描述</p></td>
<td><p>每个Bank的管
理数据长度（byte）</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>依赖关系</p></td>
<td><p>工具自动计算生成（F
eeVirtualPageSize和</p>
<p>FeePageD
irectWriteSupport）</p>
</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id20">
<h2>附录：<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h2>
<p>集成注意事项：</p>
<p>在Fee模块使用过程中，需要使用到下层Fls驱动模块，需要包含第三方驱动程序，会涉及到文件名和类型名字不匹配的问题，所以在Fee模块中，始终会包含头文件#include
“Fls.h”。</p>
<p>所以在集成时，需要新建一个Fls.h文件，并在这个文件中做底层驱动的适配，如下图所示：</p>
<p><a class="reference internal" href="../../_images/image726.png"><img alt="image7" src="../../_images/image726.png" style="width: 5.76736in; height: 4.02292in;" /></a></p>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="EthTSyn.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>EthTSyn
    </a>
    <a class="float-right" href="FiM.html" title="Next">
        FiM <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Fee</a><ul>
<li><a class="reference internal" href="#id1">简介</a><ul>
<li><a class="reference internal" href="#id2">参考资料</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">功能描述</a><ul>
<li><a class="reference internal" href="#id4">模块初始化</a><ul>
<li><a class="reference internal" href="#id5">模块初始化功能介绍</a></li>
<li><a class="reference internal" href="#id6">模块初始化功能实现</a></li>
</ul>
</li>
<li><a class="reference internal" href="#block">Block操作功能</a><ul>
<li><a class="reference internal" href="#id7">Block操作功能介绍</a></li>
<li><a class="reference internal" href="#id8">Block操作功能实现</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flash">Flash访问功能</a><ul>
<li><a class="reference internal" href="#id9">Flash访问功能介绍</a></li>
<li><a class="reference internal" href="#id10">Flash访问功能实现</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">错误检测功能</a><ul>
<li><a class="reference internal" href="#id12">错误检测功能介绍</a></li>
<li><a class="reference internal" href="#id13">错误检测功能实现</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id14">源文件描述</a></li>
<li><a class="reference internal" href="#api">API接口</a><ul>
<li><a class="reference internal" href="#id15">类型定义</a><ul>
<li><a class="reference internal" href="#fee-configtype">Fee_ConfigType类型定义</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">输入函数描述</a></li>
<li><a class="reference internal" href="#id17">静态接口函数定义</a><ul>
<li><a class="reference internal" href="#fee-init">Fee_Init函数定义</a></li>
<li><a class="reference internal" href="#fee-setmode">Fee_SetMode函数定义</a></li>
<li><a class="reference internal" href="#fee-read">Fee_Read函数定义</a></li>
<li><a class="reference internal" href="#fee-write">Fee_Write函数定义</a></li>
<li><a class="reference internal" href="#fee-cancel">Fee_Cancel函数定义</a></li>
<li><a class="reference internal" href="#fee-getstatus">Fee_GetStatus函数定义</a></li>
<li><a class="reference internal" href="#fee-getjobresult">Fee_GetJobResult函数定义</a></li>
<li><a class="reference internal" href="#fee-invalidateblock">Fee_InvalidateBlock函数定义</a></li>
<li><a class="reference internal" href="#fee-getversioninfo">Fee_GetVersionInfo函数定义</a></li>
<li><a class="reference internal" href="#fee-eraseimmediateblock">Fee_EraseImmediateBlock函数定义</a></li>
<li><a class="reference internal" href="#fee-jobendnotification">Fee_JobEndNotification函数定义</a></li>
<li><a class="reference internal" href="#fee-joberrornotification">Fee_JobErrorNotification函数定义</a></li>
<li><a class="reference internal" href="#fee-mainfunction">Fee_MainFunction函数定义</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18">可配置函数定义</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id19">配置</a><ul>
<li><a class="reference internal" href="#feegeneral">FeeGeneral</a></li>
<li><a class="reference internal" href="#feebank">FeeBank</a></li>
<li><a class="reference internal" href="#feeblockconfiguration">FeeBlockConfiguration</a></li>
<li><a class="reference internal" href="#feepublishedinformation">FeePublishedInformation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">附录：</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/features/">Features</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/about-wagtail/"> About Wagtail</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/services/"> Services</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/blog/"> Blog</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/packages/"> Packages</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/developers/"> Developers</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <!-- <small>
                    Created using
                    <a href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.4.0
                    </a>
                    and
                    <a href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.1.3
                    </a>
                </small> -->
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>