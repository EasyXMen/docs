<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>StbM &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
            <link rel="next" title="TcpIp" href="../TcpIp/TcpIp.html" />
            <link rel="prev" title="SomeIpTp" href="../SomeIpTp/SomeIpTp.html" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanSM/CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoIP/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EcuM/EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSM/EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Os/Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">StbM</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
        <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/StbM/StbM.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="stbm">
<h1>StbM<a class="headerlink" href="#stbm" title="Link to this heading">¶</a></h1>
<section id="document-information">
<h2>文档信息 Document Information<a class="headerlink" href="#document-information" title="Link to this heading">¶</a></h2>
<section id="version-history">
<h3>版本历史 Version History<a class="headerlink" href="#version-history" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>日期(Date)</p></th>
<th class="head"><p>作者(Author)</p></th>
<th class="head"><p>版本(Version)</p></th>
<th class="head"><p>状态(Status)</p></th>
<th class="head"><p>说明(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2025/2/24</p></td>
<td><p>xiongfei.shi</p></td>
<td><p>V0.1</p></td>
<td><p>发布(Release)</p></td>
<td><p>首次发布(First release)</p></td>
</tr>
<tr class="row-odd"><td><p>2025/04/04</p></td>
<td><p>xiongfei.shi</p></td>
<td><p>V1.0</p></td>
<td><p>发布(Release)</p></td>
<td><p>正式发布(Official release)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="references">
<h3>参考文档 References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
<col style="width: 16.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>编号(Number)</p></th>
<th class="head"><p>分类(Classification)</p></th>
<th class="head"><p>标题(Title)</p></th>
<th class="head"><p>版本(Version)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_FO_RS_TimeSync.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_FO_PRS_TimeSyncProtocol.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_CP_SWS_SynchronizedTimeBaseManager.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="terms-and-abbreviations">
<h2>术语与简写 Terms and Abbreviations<a class="headerlink" href="#terms-and-abbreviations" title="Link to this heading">¶</a></h2>
<section id="terms">
<h3>术语 Terms<a class="headerlink" href="#terms" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>术语(Terms)</p></th>
<th class="head"><p>解释(Explanation)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Current Time Tuple</p></td>
<td><p>当前时间元组，包含全局时间的本地实例和本地虚拟时间(Current time tuple, including the local instance of global time and local virtual time)</p></td>
</tr>
<tr class="row-odd"><td><p>Disciplined HW Clock</p></td>
<td><p>一种可以调整其速率和偏移量的硬件时钟(A hardware clock whose rate and offset can be adjusted)</p></td>
</tr>
<tr class="row-even"><td><p>Global Time</p></td>
<td><p>由全局时间主机提供的时间(Time provided by the global time master)</p></td>
</tr>
<tr class="row-odd"><td><p>Local Instance of the Global Time</p></td>
<td><p>基于本地虚拟时间结合从全局时间主机接收到的时间元组推导出的本地时间(Local time derived based on local virtual time combined with the time tuple received from the global time master)</p></td>
</tr>
<tr class="row-even"><td><p>Main Time Tuple</p></td>
<td><p>用来计算推导全局时间本地实例的时间对(A pair of times used to calculate and derive the local instance of global time)</p></td>
</tr>
<tr class="row-odd"><td><p>Notification Time Base Customer</p></td>
<td><p>当发生如下事件时，时间基客户端将会被同步时间管理器通知：(The time base customer will be notified by the synchronized time manager when the following events occur:)
时间基状态发生了变化(例如，时间基发生了超时)(The time base status changes (for example, the time base times out))
时间基准值已经达到了用户预先设定的一个值(The time base value has reached a value preset by the user)</p></td>
</tr>
<tr class="row-even"><td><p>Offset Correction</p></td>
<td><p>补偿时间偏移所需的偏移值(The offset value required to compensate for time offset)</p></td>
</tr>
<tr class="row-odd"><td><p>Offset Correction by Jump</p></td>
<td><p>在时间同步时应用的一个偏移值，这是值将补偿本地全局时间与从时间主站接收到的全局时间值之间的时差(An offset value applied during time synchronization, which will compensate for the time difference between the local global time and the global time value received from the time master)</p></td>
</tr>
<tr class="row-even"><td><p>Offset Correction by Rate Adaption</p></td>
<td><p>除了速率校准之外还会应用速率偏差校准，这样可以让本地时间平滑的向全局时间过渡(In addition to rate correction, rate deviation correction will also be applied, which can make the local time smoothly transition to the global time)</p></td>
</tr>
<tr class="row-odd"><td><p>Rate Correction</p></td>
<td><p>速率校准(Rate correction)</p></td>
</tr>
<tr class="row-even"><td><p>Rate Deviation</p></td>
<td><p>表示目标时钟频率和参考时钟频率之间相差了多少(Indicates the difference between the target clock frequency and the reference clock frequency)</p></td>
</tr>
<tr class="row-odd"><td><p>Time Base Customer</p></td>
<td><p>同步时间管理器支持下述3种时基客户(The synchronized time manager supports the following three types of time base customers)
活跃客户(Active customers)、
触发客户(Trigger customers)、
通知客户(Notification customers)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="abbreviations">
<h3>简写 Abbreviations<a class="headerlink" href="#abbreviations" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 33.3%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>简写(Abbreviation)</p></th>
<th class="head"><p>全称(Full name)</p></th>
<th class="head"><p>解释(Explanation)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DET</p></td>
<td><p>Default Error Tracer</p></td>
<td><p>默认错误检测模块</p></td>
</tr>
<tr class="row-odd"><td><p>ECU</p></td>
<td><p>Electronic Control Unit</p></td>
<td><p>电子控制器单元</p></td>
</tr>
<tr class="row-even"><td><p>PDU</p></td>
<td><p>Protocol Data Unit</p></td>
<td><p>协议数据单元</p></td>
</tr>
<tr class="row-odd"><td><p>StbM</p></td>
<td><p>Synchronized Time-Base Manager</p></td>
<td><p>同步时基管理</p></td>
</tr>
<tr class="row-even"><td><p>&lt;Bus&gt;TSyn</p></td>
<td><p>A bus specific Time Synchronization Provider module</p></td>
<td><p>基于特定总线的时间同步模块</p></td>
</tr>
<tr class="row-odd"><td><p>CanTSyn</p></td>
<td><p>Time Synchronization Provider module for CAN</p></td>
<td><p>基于CAN总线的时间同步提供者</p></td>
</tr>
<tr class="row-even"><td><p>EthTSyn</p></td>
<td><p>Time Synchronization Provider module for Ethernet</p></td>
<td><p>基于以太网总线的时间同步提供者</p></td>
</tr>
<tr class="row-odd"><td><p>TG</p></td>
<td><p>Time Gateway</p></td>
<td><p>时间网关</p></td>
</tr>
<tr class="row-even"><td><p>TS</p></td>
<td><p>Time Slave</p></td>
<td><p>时间从机</p></td>
</tr>
<tr class="row-odd"><td><p>TM</p></td>
<td><p>Time Master</p></td>
<td><p>时间主机</p></td>
</tr>
<tr class="row-even"><td><p>TD</p></td>
<td><p>Time Domain</p></td>
<td><p>时间域</p></td>
</tr>
<tr class="row-odd"><td><p>TL</p></td>
<td><p>Local Instance of the Global Time</p></td>
<td><p>全局时间的本地实例</p></td>
</tr>
<tr class="row-even"><td><p>TV</p></td>
<td><p>Virtual Local Time</p></td>
<td><p>虚拟本地时间</p></td>
</tr>
<tr class="row-odd"><td><p>Rrc</p></td>
<td><p>Rate (correction) as derived by rate measurement</p></td>
<td><p>速率校正值</p></td>
</tr>
<tr class="row-even"><td><p>Roc</p></td>
<td><p>Rate offset as derived by Offset Correction by Rate Adaption</p></td>
<td><p>通过速率自适应的偏移校正得出的速率偏移值</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="introduction">
<h2>简介 Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>StbM(Synchronization TimeBase Manager，时间同步管理器)，负责在分布式车载系统中实现时间同步，确保相关模块在同一时间基准下运行。时间同步支持多种同步协议，这部分主要在&lt;bus&gt;TSyn模块中实现，StbM对这些模块进行统一的抽象和管理，对上提供服务。StbM在AutoSAR中软件层级架构如下图。</p>
<p>StbM (Synchronization TimeBase Manager) is responsible for implementing time synchronization in distributed in-vehicle systems to ensure that related modules run under the same time base. Time synchronization supports multiple synchronization protocols, which are mainly implemented in the &lt;bus&gt;TSyn module. StbM provides unified abstraction and management for these modules and offers services to the upper layer. The software layer architecture of StbM in AutoSAR is as follows.</p>
<figure class="align-center" id="id1">
<img alt="StbM在AUTOSAR中的位置 (Position of StbM in AUTOSAR)" src="../../../_images/StbM_IN_AUTOSAR.png" />
<figcaption>
<p><span class="caption-text">StbM在AUTOSAR中的位置 (Position of StbM in AUTOSAR)</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>本文主要描述StbM，给CanTSyn, EthTSyn提供接口用来更新同步时间，以及给其他用户提供接口用来获取/通知同步时间。</p>
<p>This document mainly describes StbM, which provides interfaces for CanTSyn and EthTSyn to update synchronization time, and provides interfaces for other users to obtain/notify synchronization time.</p>
</section>
<section id="functional-description">
<h2>功能描述 Functional Description<a class="headerlink" href="#functional-description" title="Link to this heading">¶</a></h2>
<p>StbM 的主要功能包括两个方面， 一是使上层应用间的时间可以同步， 二是提供绝对时间值。</p>
<p>The main functions of StbM include two aspects: one is to enable time synchronization between upper-layer applications, and the other is to provide absolute time values.</p>
<section id="features">
<h3>特性 Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h3>
<section id="global-time-base">
<h4>全局时间基 Global Time Base<a class="headerlink" href="#global-time-base" title="Link to this heading">¶</a></h4>
<p>由于不同的硬件时钟，速率可能会有偏差，这将会导致使用不同硬件时钟的应用，各自的时间会有偏差，为了消除这种偏差，StbM会将一个主节点的时间基作为全局的时间基，并将所有其他节点的时间同步到这一节点，以达成时间同步的目的。</p>
<p>Due to the possible rate deviation of different hardware clocks, applications using different hardware clocks will have time deviations. To eliminate this deviation, StbM will take the time base of a master node as the global time base,and synchronize the time of all other nodes to this node to achieve time synchronization.</p>
</section>
<section id="status-change-notification-function">
<h4>状态变化通知功能 Status Change Notification Function<a class="headerlink" href="#status-change-notification-function" title="Link to this heading">¶</a></h4>
<p>StbM允许客户注册回调函数，StbM将跟踪用户通过掩码配置的状态位，当这些状态位有变化时StbM将通过回调函数通知用户。</p>
<p>StbM allows customers to register callback functions. StbM will track the status bits configured by the user through a mask, and notify the user through the callback function when these status bits change.</p>
</section>
<section id="timing-function">
<h4>定时功能 Timing Function<a class="headerlink" href="#timing-function" title="Link to this heading">¶</a></h4>
<p>StbM实现了定时器功能，允许用户设置定时任务，当时间到达用户设定的时间值时，StbM将通过回调函数触发用户设定的任务。</p>
<p>StbM implements a timer function, allowing users to set timing tasks. When the time reaches the time value set by the user, StbM will trigger the task set by the user through a callback function.</p>
</section>
<section id="time-recording-function">
<h4>时间记录功能 Time Recording Function<a class="headerlink" href="#time-recording-function" title="Link to this heading">¶</a></h4>
<p>时间记录功能将记录StbM发生同步事件的时间点的数据快照，供用户获取用于验证本地时间精度等目的。</p>
<p>The time recording function will record data snapshots of the time points when synchronization events occur in StbM, for users to obtain for purposes such as verifying local time accuracy.</p>
</section>
<section id="time-deviation-correction">
<h4>时间偏差校准 Time Deviation Correction<a class="headerlink" href="#time-deviation-correction" title="Link to this heading">¶</a></h4>
<p>如果开启了时间偏差校准功能，StbM将通过速率校准和偏移校准来减小本地时间和全局时间之间的偏差。StbM管理一个主时间组，这个主时基组用来作为其他从节点时间同步的基准，主时间组由TG和TV组成，TG是全局时间，TV是虚拟本地时间，TG的来源为总线同步模块设置的时间和当前的TV通过时间校正计算而得出的时间，TV的来源是本地的硬件时钟，包括GPT,OS和EthTSyn三种。</p>
<p>If the time deviation correction function is enabled, StbM will reduce the deviation between local time and global time through rate correction and offset correction. StbM manages a main time group, which is used as the reference for time synchronization of other slave nodes.The main time group consists of TG and TV. TG is the global time, and TV is the virtual local time. The source of TG is the time set by the bus synchronization module and the time derived from the current TV through time correction calculation. The source of TV is the local hardware clock, including GPT, OS, and EthTSyn.</p>
<p>时间校正计算包括偏移校正和速率校正，偏移校正包括跳跃校正和速率适应。速率校正，在单位时间不停计算时间差，以得出不同时钟间的速率偏差，而偏移校正是根据本地的时间，速率的偏差以及接受到的时间计算得出的时间来覆盖主时间组。表示成公式为TL = TGSync + (TV - TVSync) * r。其中的跳跃校正为当StbM接收到时间值时，主时间组的值直接更新为接收到的时间。</p>
<p>Time correction calculation includes offset correction and rate correction. Offset correction includes jump correction and rate adaptation. Rate correction continuously calculates the time difference per unit time to derive the rate deviation between different clocks, while offset correction overwrites the main time group based on the local time,rate deviation, and the time calculated from the received time. It is expressed as a formula: TL = TGSync + (TV - TVSync) * r. The jump correction is that when StbM receives a time value, the value of the main time group is directly updated to the received time.</p>
<p>速率适应的偏移校正，则是在一段时间内逐渐校正调整偏移值。</p>
<p>Offset correction with rate adaptation gradually corrects and adjusts the offset value over a period of time.</p>
</section>
</section>
<section id="deviation">
<h3>偏差 Deviation<a class="headerlink" href="#deviation" title="Link to this heading">¶</a></h3>
<p>1.不再支持偏移时间基</p>
<p>1.Offset time base is no longer supported</p>
<p>2.不支持备用时钟功能</p>
<p>2.Standby clock function is not supported</p>
<p>3.不支持时间验证功能</p>
<p>3.Time verification function is not supported</p>
<p>4.不支持时间新鲜度功能</p>
<p>4.Time freshness function is not supported</p>
<p>5.不支持Disciplined HW Clock</p>
<p>5.Disciplined HW Clock is not supported</p>
<p>6.不支持同步时间的NVM存储机制</p>
<p>6.NVM storage mechanism for synchronized time is not supported</p>
<p>7.不支持时间基的克隆</p>
<p>7.Time base cloning is not supported</p>
</section>
<section id="extension">
<h3>扩展 Extension<a class="headerlink" href="#extension" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
</section>
<section id="integration">
<h2>集成 Integration<a class="headerlink" href="#integration" title="Link to this heading">¶</a></h2>
<section id="file-list">
<h3>文件列表 File List<a class="headerlink" href="#file-list" title="Link to this heading">¶</a></h3>
<section id="static-files">
<h4>静态文件 Static Files<a class="headerlink" href="#static-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StbM.h</p></td>
<td><p>StbM模块头文件，包含了API函数的声明(Header file of the StbM module, including declarations of API functions)</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_Internal.h</p></td>
<td><p>StbM模块头文件，包含了内部数据类型定义(Header file of the StbM module, including definitions of internal data types)</p></td>
</tr>
<tr class="row-even"><td><p>StbM_Types.h</p></td>
<td><p>StbM模块头文件，包含了外部数据类型定义(Header file of the StbM module, including definitions of external data types)</p></td>
</tr>
<tr class="row-odd"><td><p>StbM.c</p></td>
<td><p>StbM模块源文件，包含了API函数的实现(Source file of the StbM module, including implementations of API functions)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dynamic-files">
<h4>动态文件 Dynamic Files<a class="headerlink" href="#dynamic-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StbM_MemMap.h</p></td>
<td><p>StbM模块的内存映射(Memory mapping of the StbM module)</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_Cfg.h</p></td>
<td><p>定义StbM模块预编译时用到的配置参数(Defines configuration parameters used in the pre-compilation of the StbM module)</p></td>
</tr>
<tr class="row-even"><td><p>StbM_Cfg.c</p></td>
<td><p>StbM Pre-Compile 配置源文件(Pre-Compile configuration source file of StbM)</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_PBcfg.c</p></td>
<td><p>StbM Post-Build 配置源文件(Post-Build configuration source file of StbM)</p></td>
</tr>
<tr class="row-even"><td><p>StbM_Callout.c</p></td>
<td><p>用户自定义的回调函数实现(Implementation of user-defined callback functions)</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_External.h</p></td>
<td><p>用户自定义回调函数声明(Declarations of user-defined callback functions)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="error-handling">
<h3>错误处理 Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h3>
<section id="development-errors">
<h4>开发错误 Development Errors<a class="headerlink" href="#development-errors" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Value[hex]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>STBM_E_PARAM</p></td>
<td><p>0x0A</p></td>
<td><p>API called with invalid parameters.</p></td>
</tr>
<tr class="row-odd"><td><p>STBM_E_UNINIT</p></td>
<td><p>0x0B</p></td>
<td><p>API called while StbM is not initialized.</p></td>
</tr>
<tr class="row-even"><td><p>STBM_E_PARAM_POINTER</p></td>
<td><p>0x10</p></td>
<td><p>API called with invalid pointer in parameter list.</p></td>
</tr>
<tr class="row-odd"><td><p>STBM_E_INIT_FAILED</p></td>
<td><p>0x11</p></td>
<td><p>STbM_Init initialization failed.</p></td>
</tr>
<tr class="row-even"><td><p>STBM_E_SERVICE_NOT_SUPPORTED</p></td>
<td><p>0x12</p></td>
<td><p>API not supported with current configuration.</p></td>
</tr>
<tr class="row-odd"><td><p>STBM_E_PARAM_TIMESTAMP</p></td>
<td><p>0x25</p></td>
<td><p>API called with invalid timestamp.</p></td>
</tr>
<tr class="row-even"><td><p>STBM_E_PARAM_USERDATA</p></td>
<td><p>0x26</p></td>
<td><p>API called with invalid user data.</p></td>
</tr>
<tr class="row-odd"><td><p>STBM_E_INVALID_PARTITION</p></td>
<td><p>0xF0</p></td>
<td><p>API called in invalid partition.</p></td>
</tr>
<tr class="row-even"><td><p>STBM_E_ALREADY_INITIALIZED</p></td>
<td><p>0xF1</p></td>
<td><p>StbM_Init has already been initialized.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="product-errors">
<h4>产品错误 Product Errors<a class="headerlink" href="#product-errors" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
<section id="runtime-errors">
<h4>运行时错误 Runtime Errors<a class="headerlink" href="#runtime-errors" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
</section>
</section>
<section id="interface-description">
<h2>接口描述 Interface Description<a class="headerlink" href="#interface-description" title="Link to this heading">¶</a></h2>
<section id="stbm-stbm-external-type-definitions">
<h3>StbM对外类型定义 StbM External Type Definitions<a class="headerlink" href="#stbm-stbm-external-type-definitions" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StbM_ConfigType</p></td>
<td><p>struct</p></td>
<td><p>Configuration data structure of the StbM module</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_SynchronizedTimeBaseType</p></td>
<td><p>uint16</p></td>
<td><p>Variables of this type are used to represent the kind of synchronized time-base</p></td>
</tr>
<tr class="row-even"><td><p>StbM_TimeTupleType</p></td>
<td><p>struct</p></td>
<td><p>Variables of this type are used for expressing time tuples</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_UserDataType</p></td>
<td><p>struct</p></td>
<td><p>Current user data of the Time Base</p></td>
</tr>
<tr class="row-even"><td><p>StbM_TimeStampType</p></td>
<td><p>struct</p></td>
<td><p>Variables of this type are used for expressing time stamps including relative time and absolute calendar time.</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_MeasurementType</p></td>
<td><p>struct</p></td>
<td><p>structure which contains additional measurement data</p></td>
</tr>
<tr class="row-even"><td><p>StbM_RateDeviationType</p></td>
<td><p>sint16</p></td>
<td><p>Variables of this type are used to express a rate deviation in ppm</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_TimeDiffType</p></td>
<td><p>sint32</p></td>
<td><p>Variables of this type are used to express time differences / offsets as signed values in in nanoseconds</p></td>
</tr>
<tr class="row-even"><td><p>StbM_TimeBaseStatusType</p></td>
<td><p>uint16</p></td>
<td><p>Variables of this type are used to express if and how a Local Time Base is synchronized to the Global Time Master</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_CustomerIdType</p></td>
<td><p>uint16</p></td>
<td><p>unique identifier of a notification customer</p></td>
</tr>
<tr class="row-even"><td><p>StbM_SyncRecordTableHeadType</p></td>
<td><p>struct</p></td>
<td><p>Synchronized Time Base Record Table Header</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_MasterConfigType</p></td>
<td><p>uint8</p></td>
<td><p>This type indicates if an ECU is configured for a system wide master for a given Time Base is available or not</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-services-provided-externally-by-stbm">
<h3>StbM对外提供的服务 Services Provided Externally by StbM<a class="headerlink" href="#stbm-services-provided-externally-by-stbm" title="Link to this heading">¶</a></h3>
<section id="stbm-init">
<h4>StbM_Init<a class="headerlink" href="#stbm-init" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StbM_Init</span><span class="p">(</span><span class="n">const</span> <span class="n">StbM_ConfigType</span> <span class="o">*</span><span class="n">configPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>Initializes the Synchronized Timebase Manager.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (Reentrant for different partitions. Non reentrant for the same partition.)</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>configPtr</p></td>
<td><p>Pointer to post-build configuration data</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="stbm-getversioninfo">
<h4>StbM_GetVersionInfo<a class="headerlink" href="#stbm-getversioninfo" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StbM_GetVersionInfo</span><span class="p">(</span><span class="n">Std_VersionInfoType</span> <span class="o">*</span><span class="n">versioninfo</span><span class="p">)</span>
</pre></div>
</div>
<p>This function returns the version information of this module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>versioninfo</p></td>
<td><p>Pointer to the memory location holding the version information.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="stbm-getcurrenttime">
<h4>StbM_GetCurrentTime<a class="headerlink" href="#stbm-getcurrenttime" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_GetCurrentTime</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_TimeTupleType</span> <span class="o">*</span><span class="n">timeTuple</span><span class="p">,</span> <span class="n">StbM_UserDataType</span> <span class="o">*</span><span class="n">userData</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a time value(Local Time Base derived from Global Time Base) in standard format.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>timeTuple</p></td>
<td><p>Current time stamp that is valid at this time</p></td>
</tr>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>userData</p></td>
<td><p>User data of the Time Base</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully get the Current time</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Getting the Current time failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-getcurrentvirtuallocaltime">
<h4>StbM_GetCurrentVirtualLocalTime<a class="headerlink" href="#stbm-getcurrentvirtuallocaltime" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_GetCurrentVirtualLocalTime</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_VirtualLocalTimeType</span> <span class="o">*</span><span class="n">localTimePtr</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the Virtual Local Time of the referenced Time Base.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>localTimePtr</p></td>
<td><p>Current Virtual Local Time value</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully get the Virtual Local Time</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Getting the Virtual Local Time failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-setglobaltime">
<h4>StbM_SetGlobalTime<a class="headerlink" href="#stbm-setglobaltime" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_SetGlobalTime</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_TimeStampType</span> <span class="o">*</span><span class="n">timeStamp</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_UserDataType</span> <span class="o">*</span><span class="n">userData</span><span class="p">)</span>
</pre></div>
</div>
<p>Allows the Customers to set the new global time that has to be valid for the system, which will be sent to the busses. This function will be used if a Time Master is present in this ECU.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>timeStamp</p></td>
<td><p>New time stamp</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>userData</p></td>
<td><p>New user data(if not NULL)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully set the global time</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Setting the global Time failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-updateglobaltime">
<h4>StbM_UpdateGlobalTime<a class="headerlink" href="#stbm-updateglobaltime" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_UpdateGlobalTime</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_TimeStampType</span> <span class="o">*</span><span class="n">timeStamp</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_UserDataType</span> <span class="o">*</span><span class="n">userData</span><span class="p">)</span>
</pre></div>
</div>
<p>Allows the Customers to set the Global Time that will be sent to the buses. This function will be used if a Time Master is present in this ECU. Using UpdateGlobal Time will not lead to an immediate transmission of the Global Time.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>timeStamp</p></td>
<td><p>New time stamp</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>userData</p></td>
<td><p>New user data(if not NULL)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully update the global time</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>updating the global Time failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-setuserdata">
<h4>StbM_SetUserData<a class="headerlink" href="#stbm-setuserdata" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_SetUserData</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_UserDataType</span> <span class="o">*</span><span class="n">userData</span><span class="p">)</span>
</pre></div>
</div>
<p>Allows the customers to set the new user data that has to be valid for the system, which will be sent to the busses.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>userData</p></td>
<td><p>New user data</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully set the user data</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>setting the user data failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-bussetglobaltime">
<h4>StbM_BusSetGlobalTime<a class="headerlink" href="#stbm-bussetglobaltime" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_BusSetGlobalTime</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_TimeTupleType</span> <span class="o">*</span><span class="n">timeTuplePtr</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_UserDataType</span> <span class="o">*</span><span class="n">userDataPtr</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_MeasurementType</span> <span class="o">*</span><span class="n">measureDataPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>Allows the Time Base Provider Modules to forward a new Global Time tuple(i.e., the Received Time Tuple) to the StbM.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>timeTuplePtr</p></td>
<td><p>New Global Time Tuple value</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>userDataPtr</p></td>
<td><p>New User Data(if not NULL)</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>measureDataPtr</p></td>
<td><p>New measurement data</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully set Global Time tuple</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Setting the Global Time tuple failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-getratedeviation">
<h4>StbM_GetRateDeviation<a class="headerlink" href="#stbm-getratedeviation" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_GetRateDeviation</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_RateDeviationType</span> <span class="o">*</span><span class="n">rateDeviation</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns value of the current rate deviation of a Time Base.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>rateDeviation</p></td>
<td><p>Value of the current rate deviation of a Time Base</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully get rate deviation of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Getting the rate deviation failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-setratecorrection">
<h4>StbM_SetRateCorrection<a class="headerlink" href="#stbm-setratecorrection" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_SetRateCorrection</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_RateDeviationType</span> <span class="n">rateDeviation</span><span class="p">)</span>
</pre></div>
</div>
<p>Allows to set the rate of a Synchronized Time Base(being either a Pure Local Time Base or not)</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>rateDeviation</p></td>
<td><p>value of the applied rate deviation</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully set rate deviation of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Setting the rate deviation failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-gettimeleap">
<h4>StbM_GetTimeLeap<a class="headerlink" href="#stbm-gettimeleap" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_GetTimeLeap</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_TimeDiffType</span> <span class="o">*</span><span class="n">timeJump</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns value of Time Leap.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>timeJump</p></td>
<td><p>Time leap value</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully get Time leap value</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Getting Time leap value failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-gettimebasestatus">
<h4>StbM_GetTimeBaseStatus<a class="headerlink" href="#stbm-gettimebasestatus" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_GetTimeBaseStatus</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_TimeBaseStatusType</span> <span class="o">*</span><span class="n">timeBaseStatus</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns detailed status information for a Synchronized(or Pure Local) Time Base.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>timeBaseStatus</p></td>
<td><p>Status of the Synchronized(or Pure Local) Time Base</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully get status of the Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Getting status of the Time Base failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-starttimer">
<h4>StbM_StartTimer<a class="headerlink" href="#stbm-starttimer" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_StartTimer</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_CustomerIdType</span> <span class="n">customerId</span><span class="p">,</span> <span class="n">const</span> <span class="n">StbM_TimeStampType</span> <span class="o">*</span><span class="n">expireTime</span><span class="p">)</span>
</pre></div>
</div>
<p>Sets a time value, which the Time Base value is compared against.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>customerId</p></td>
<td><p>The ID of the customer that is being used</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>expireTime</p></td>
<td><p>Time value relative to current Time Base value of the Notification</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successfully start the timer</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Starting the timer failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-getsynctimerecordhead">
<h4>StbM_GetSyncTimeRecordHead<a class="headerlink" href="#stbm-getsynctimerecordhead" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_GetSyncTimeRecordHead</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_SyncRecordTableHeadType</span> <span class="o">*</span><span class="n">syncRecordTableHead</span><span class="p">)</span>
</pre></div>
</div>
<p>Accesses to the recorded snapshot data Header of the table belonging to the Synchronized Time Base.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>syncRecordTableHead</p></td>
<td><p>Header of the table</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successful</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-triggertimetransmission">
<h4>StbM_TriggerTimeTransmission<a class="headerlink" href="#stbm-triggertimetransmission" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_TriggerTimeTransmission</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">)</span>
</pre></div>
</div>
<p>Called by the &lt;Upper Layer&gt; to force the Timesync Modules to transmit the current Time Base again due to an incremented timeBaseUpdateCounter[timeBaseId].</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successful</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-gettimebaseupdatecounter">
<h4>StbM_GetTimeBaseUpdateCounter<a class="headerlink" href="#stbm-gettimebaseupdatecounter" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint8</span> <span class="n">StbM_GetTimeBaseUpdateCounter</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">)</span>
</pre></div>
</div>
<p>Allows the Timesync Modules to detect, whether a Time Base should be transmitted immediately in the subsequent &lt;Bus&gt;TSyn_MainFunction() cycle.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>uint8</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Counter</p></td>
<td><p>value belonging to the Time Base, that indicates a Time Base update to the Timesync Modules</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-getmasterconfig">
<h4>StbM_GetMasterConfig<a class="headerlink" href="#stbm-getmasterconfig" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StbM_GetMasterConfig</span><span class="p">(</span><span class="n">StbM_SynchronizedTimeBaseType</span> <span class="n">timeBaseId</span><span class="p">,</span> <span class="n">StbM_MasterConfigType</span> <span class="o">*</span><span class="n">masterConfig</span><span class="p">)</span>
</pre></div>
</div>
<p>Indicates if the functionality for a system wide master(e.g. StbM_SetGlobalTime) for a given Time Base is available or not.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>timeBaseId</p></td>
<td><p>Identification of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>masterConfig</p></td>
<td><p>Indicates, if system wide master functionality is supported</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Successful</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Failed</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="stbm-stbm-internal-module-type-definitions">
<h3>StbM内部模块类型定义 StbM Internal Module Type Definitions<a class="headerlink" href="#stbm-stbm-internal-module-type-definitions" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StbM_HwCounterType</p></td>
<td><p>uint64</p></td>
<td><p>clock counter value type</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_LocalTimeType</p></td>
<td><p>uint64</p></td>
<td><p>local time type</p></td>
</tr>
<tr class="row-even"><td><p>StbM_MainTimeTupleType</p></td>
<td><p>struct</p></td>
<td><p>Variables of this type are used for expressing time tuples</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_RateCorrectionTupleType</p></td>
<td><p>struct</p></td>
<td><p>Time base rate correction time tuple</p></td>
</tr>
<tr class="row-even"><td><p>StbM_RateCorrectionType</p></td>
<td><p>struct</p></td>
<td><p>Time base rate correction datas</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_LocalClockTimeType</p></td>
<td><p>struct</p></td>
<td><p>Data required for local time compute</p></td>
</tr>
<tr class="row-even"><td><p>StbM_CurrentRateType</p></td>
<td><p>struct</p></td>
<td><p>Rate correction and offset correction for time base</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_NotificationType</p></td>
<td><p>struct</p></td>
<td><p>Used to save timer information</p></td>
</tr>
<tr class="row-even"><td><p>StbM_TimeBaseType</p></td>
<td><p>struct</p></td>
<td><p>Time-based running data</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-services-provided-by-stbm-internal-module">
<h3>StbM内部模块提供的服务 Services Provided by StbM Internal Module<a class="headerlink" href="#stbm-services-provided-by-stbm-internal-module" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
<section id="stbm-stbm-configuration-parameter-type-definitions">
<h3>StbM配置参数类型定义 StbM Configuration Parameter Type Definitions<a class="headerlink" href="#stbm-stbm-configuration-parameter-type-definitions" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StbM_TriggeredCustomerCfgType</p></td>
<td><p>struct</p></td>
<td><p>defines Configuration of The triggered customer.</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_TimeCorrectionCfgType</p></td>
<td><p>struct</p></td>
<td><p>defines Configuration of the rate and offset correction.</p></td>
</tr>
<tr class="row-even"><td><p>StbM_LocalTimeClockCfgType</p></td>
<td><p>struct</p></td>
<td><p>defines Configuration of the hardware reference clock.</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_TimeRecordingCfgType</p></td>
<td><p>struct</p></td>
<td><p>defines Configuration of the time recording.</p></td>
</tr>
<tr class="row-even"><td><p>StbM_NotificationCustomerCfgType</p></td>
<td><p>struct</p></td>
<td><p>defines Configuration of the Notification Customer.</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_SynchronizedTimeBaseCfgType</p></td>
<td><p>struct</p></td>
<td><p>defines the information about a specific time-base.</p></td>
</tr>
<tr class="row-even"><td><p>StbM_SynchronizedTimeBaseTypeType</p></td>
<td><p>enum</p></td>
<td><p>Definition of the type of a Time Base</p></td>
</tr>
<tr class="row-odd"><td><p>CrcValidatedType</p></td>
<td><p>enum</p></td>
<td><p>CRC mode</p></td>
</tr>
<tr class="row-even"><td><p>CrcSecuredType</p></td>
<td><p>enum</p></td>
<td><p>whether crc is supported</p></td>
</tr>
<tr class="row-odd"><td><p>StbM_NotificationInterfaceType</p></td>
<td><p>enum</p></td>
<td><p>The parameter defines what type of interface shall be used to notify a customer of a status event</p></td>
</tr>
<tr class="row-even"><td><p>StbM_LocalTimeHardwareCfgType</p></td>
<td><p>enum</p></td>
<td><p>The local time hardware type</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stbm-services-provided-by-stbm-configuration">
<h3>StbM配置提供的服务 Services Provided by StbM Configuration<a class="headerlink" href="#stbm-services-provided-by-stbm-configuration" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
<section id="configuration-function">
<h3>配置函数 Configuration function<a class="headerlink" href="#configuration-function" title="Link to this heading">¶</a></h3>
<section id="stbm-mainfunction">
<h4>StbM_MainFunction<a class="headerlink" href="#stbm-mainfunction" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StbM_MainFunction</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This function needs to be called periodically to perform the AUTOSAR StbM activities.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Asynchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (Reentrant for different partitions. Non reentrant for the same partition.)</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="statusnotificationcallback-timebase">
<h4>StatusNotificationCallback&lt;TimeBase&gt;<a class="headerlink" href="#statusnotificationcallback-timebase" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">StatusNotificationCallback</span><span class="o">&lt;</span><span class="n">TimeBase</span><span class="o">&gt;</span><span class="p">(</span><span class="n">StbM_TimeBaseNotificationType</span> <span class="n">eventNotification</span><span class="p">)</span>
</pre></div>
</div>
<p>The callback notifies the customers, when a &lt;TimeBase&gt; related event occurs, which is enabled by the notification mask</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>eventNotification</p></td>
<td><p>Holds the notification bits for the different Time Base related events</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>successfull</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="customer-timenotificationcallback-timebase">
<h4>&lt;Customer&gt;_TimeNotificationCallback&lt;TimeBase&gt;<a class="headerlink" href="#customer-timenotificationcallback-timebase" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="o">&lt;</span><span class="n">Customer</span><span class="o">&gt;</span><span class="n">_TimeNotificationCallback</span><span class="o">&lt;</span><span class="n">TimeBase</span><span class="o">&gt;</span><span class="p">(</span><span class="n">StbM_TimeDiffType</span> <span class="n">deviationTime</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback notifies the &lt;Customer&gt;, when a Time Base reaches the time value set by StbM_StartTimer for the &lt;TimeBase&gt;</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>deviationTime</p></td>
<td><p>Difference time value when callback is called by StbM</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>successfull</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>failed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="synctimerecordblockcallback-timebase">
<h4>SyncTimeRecordBlockCallback&lt;TimeBase&gt;<a class="headerlink" href="#synctimerecordblockcallback-timebase" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">SyncTimeRecordBlockCallback</span><span class="o">&lt;</span><span class="n">TimeBase</span><span class="o">&gt;</span><span class="p">(</span><span class="n">const</span> <span class="n">StbM_SyncRecordTableBlockType</span><span class="o">*</span> <span class="n">syncRecordTableBlock</span><span class="p">)</span>
</pre></div>
</div>
<p>Provides a recorded snapshot data block of the measurement data table belonging to the Synchronized Time Base</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>syncRecordTableBlock</p></td>
<td><p>Block of the table</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Table access done</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Table contains no data or access invalid</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="swc-swc-service-component-encapsulation">
<h3>SWC服务组件封装 SWC Service Component Encapsulation<a class="headerlink" href="#swc-swc-service-component-encapsulation" title="Link to this heading">¶</a></h3>
<p>以下类型和接口可以封装至SWC生成完整的服务组件，可以与应用通过端口连接，没有列出的部分StbM底层暂时不支持。</p>
<p>The following types and interfaces can be encapsulated into SWC to generate a complete service component, which can be connected to applications through ports. The unlisted parts are temporarily not supported by the StbM bottom layer.</p>
<section id="cs-cs-interface-encapsulation">
<h4>CS接口封装 CS Interface Encapsulation<a class="headerlink" href="#cs-cs-interface-encapsulation" title="Link to this heading">¶</a></h4>
<p>注：下面提到的&lt;UserModule&gt;和&lt;UserPort&gt;分别为用户SWC的名字和对应端口名，在与StbM服务组件端口连接后适用。</p>
<p>Note: &lt;UserModule&gt; and &lt;UserPort&gt; mentioned below are the name of the user SWC and the corresponding port name, which are applicable after connecting to the StbM service component port.</p>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_GetMasterConfig</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_GetMasterConfig</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_GetMasterConfig(See StbM_GetMasterConfig in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>1. StbMSynchronizedTimeBase/StbMIsSystemWideGlobalTimeMaster == TRUE
And
2. StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Master_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_SetGlobalTime</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_SetGlobalTime</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_SetGlobalTime(See StbM_SetGlobalTime in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>1. StbMSynchronizedTimeBase/StbMIsSystemWideGlobalTimeMaster == TRUE
And
2. StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Master_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_SetRateCorrection</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_SetRateCorrection</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_SetRateCorrection(See StbM_SetRateCorrection in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>1. StbMSynchronizedTimeBase/StbMIsSystemWideGlobalTimeMaster == TRUE
And
2. StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Master_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_SetUserData</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_SetUserData</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_SetUserData(See StbM_SetUserData in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>1. StbMSynchronizedTimeBase/StbMIsSystemWideGlobalTimeMaster == TRUE
And
2. StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Master_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_TriggerTimeTransmission</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_TriggerTimeTransmission</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_TriggerTimeTransmission(See StbM_TriggerTimeTransmission in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>1. StbMSynchronizedTimeBase/StbMIsSystemWideGlobalTimeMaster == TRUE
And
2. StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Master_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_UpdateGlobalTime</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_UpdateGlobalTime</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_UpdateGlobalTime(See StbM_UpdateGlobalTime in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>1. StbMSynchronizedTimeBase/StbMIsSystemWideGlobalTimeMaster == TRUE
And
2. StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Master_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_GetCurrentTime</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_GetCurrentTime</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_GetCurrentTime(See StbM_GetCurrentTime in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Slave_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_GetRateDeviation</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_GetRateDeviation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_GetRateDeviation(See StbM_GetRateDeviation in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Slave_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_GetSyncTimeRecordHead</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_GetSyncTimeRecordHead</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_GetSyncTimeRecordHead(See StbM_GetSyncTimeRecordHead in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>1. StbMSynchronizedTimeBaseIdentifier &lt; 128
And
2. StbMSynchronizedTimeBase/StbMIsSystemWideGlobalTimeMaster == FALSE
And
3. StbMGeneral/StbMTimeRecordingSupport == True</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Slave_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_GetTimeBaseStatus</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_GetTimeBaseStatus</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_GetTimeBaseStatus(See StbM_GetTimeBaseStatus in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Slave_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_GetTimeLeap</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_GetTimeLeap</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_GetTimeLeap(See StbM_GetTimeLeap in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>Name=StbMSynchronizedTimeBase.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>GlobalTime_Slave_{Name}</p></td>
</tr>
</tbody>
</table>
<p>Rte_Call_&lt;UserModule&gt;_&lt;UserPort&gt;_StartTimer</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>函数名称：(Function Name:)</p></th>
<th class="head"><p>Rte_Call_&lt;UserModule&gt;_&lt;UserPortName&gt;_StartTimer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>运行实体函数定义：(Runtime Entity Function Definition:)</p></td>
<td><p>详见接口描述章节的StbM_StartTimer(See StbM_StartTimer in the interface description chapter)</p></td>
</tr>
<tr class="row-odd"><td><p>变体：(Variant:)</p></td>
<td><p>TimeBase = StbMSynchronizedTimeBase.SHORT-NAME
Customer = StbMSynchronizedTimeBase/StbMNotificationCustomer.SHORT-NAME</p></td>
</tr>
<tr class="row-even"><td><p>生成条件：(Generation Condition:)</p></td>
<td><p>StbMSynchronizedTimeBaseIdentifier &lt; 128</p></td>
</tr>
<tr class="row-odd"><td><p>端口类型：(Port Type:)</p></td>
<td><p>Provided Port</p></td>
</tr>
<tr class="row-even"><td><p>从属端口：(Dependent Port:)</p></td>
<td><p>StartTimer_{TimeBase}_{Customer}</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="applicable-services">
<h3>依赖的服务 Applicable Services<a class="headerlink" href="#applicable-services" title="Link to this heading">¶</a></h3>
<section id="compulsory-interface">
<h4>强制接口 Compulsory interface<a class="headerlink" href="#compulsory-interface" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
<section id="optional-interface">
<h4>可选接口 Optional Interface<a class="headerlink" href="#optional-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Det_ReportError</p></td>
<td><p>Det.h</p></td>
<td><p>Service to report development errors.</p></td>
</tr>
<tr class="row-odd"><td><p>GetApplicationID</p></td>
<td><p>Os.h</p></td>
<td><p>Get application ID.</p></td>
</tr>
<tr class="row-even"><td><p>EthIf_GetCurrentTimeTuple</p></td>
<td><p>EthIf.h</p></td>
<td><p>Returns a time tuple value out of the HW registers according to the capability of the HW.</p></td>
</tr>
<tr class="row-odd"><td><p>Gpt_GetTimeElapsed</p></td>
<td><p>Gpt.h</p></td>
<td><p>This service gets the number of ticks between the current tick value and a previously read tick value.</p></td>
</tr>
<tr class="row-even"><td><p>GetCounterValue</p></td>
<td><p>Os.h</p></td>
<td><p>This service reads the current count value of a counter.</p></td>
</tr>
<tr class="row-odd"><td><p>Gpt_StartTimer</p></td>
<td><p>Gpt.h</p></td>
<td><p>Starts a timer channel.</p></td>
</tr>
<tr class="row-even"><td><p>SyncScheduleTable</p></td>
<td><p>Os.h</p></td>
<td><p>This service provides the schedule table with a synchronization count and start synchronization.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration-interfaces">
<h4>配置接口 Configuration Interfaces<a class="headerlink" href="#configuration-interfaces" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
</section>
</section>
<section id="configuration">
<h2>配置 Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<section id="stbmgeneral">
<h3>StbMGeneral<a class="headerlink" href="#stbmgeneral" title="Link to this heading">¶</a></h3>
<section id="stbmgpttimerref">
<h4>StbMGptTimerRef<a class="headerlink" href="#stbmgpttimerref" title="Link to this heading">¶</a></h4>
<p>1.该配置项选中的Gpt时钟必须是独占的，不能同时被时间基使用。</p>
<p>1.The Gpt clock selected in this configuration item must be exclusive and cannot be used by the time base at the same time.</p>
<p>2.该配置项选中的Gpt时钟需要在Mcal层将时钟周期配置为1微妙，并且将其定时中断函数配置为StbM_TimerCallback()。</p>
<p>2.The Gpt clock selected in this configuration item needs to configure the clock period to 1 microsecond in the Mcal layer, and configure its timing interrupt function to StbM_TimerCallback().</p>
<p>3.该配置项只能配置一个Gpt定时器，该定时器Mcal如果不支持跨核调用的话，那么创建的定时任务需要和该定时器需要配置在同一个核上。</p>
<p>3.Only one Gpt timer can be configured in this configuration item. If the Mcal of this timer does not support cross-core calls, the created timing task needs to be configured on the same core as the timer.</p>
</section>
</section>
<section id="stbmsynchronizedtimebase">
<h3>StbMSynchronizedTimeBase<a class="headerlink" href="#stbmsynchronizedtimebase" title="Link to this heading">¶</a></h3>
<section id="stbmstoretimebasenonvolatile">
<h4>StbMStoreTimebaseNonVolatile<a class="headerlink" href="#stbmstoretimebasenonvolatile" title="Link to this heading">¶</a></h4>
<p>1.当前还不支持此功能，因此该配置使能与否都无影响。</p>
<p>1.This function is not currently supported, so whether this configuration is enabled has no effect.</p>
</section>
<section id="stbmlocaltimeclock">
<h4>StbMLocalTimeClock<a class="headerlink" href="#stbmlocaltimeclock" title="Link to this heading">¶</a></h4>
<p>1.注意： <strong>StbMLocalTimeHardware</strong> 的配置需要注意该StbM将被哪个&lt;Bus&gt;TSyn模块关联，那么此处配置的硬件时钟需要在Mcal上将其配置为和&lt;Bus&gt;TSyn模块在同一个核上。</p>
<p>1.For the configuration of <strong>StbMLocalTimeHardware</strong> , attention should be paid to which &lt;Bus&gt;TSyn module the StbM will be associated with. Then, the hardware clock configured here needs to be configured on the same core as the &lt;Bus&gt;TSyn module in Mcal.</p>
<p>2.如果该StbM将被多个不同核上的&lt;Bus&gt;TSyn模块关联，那么此处配置的硬件时钟需要在Mcal上将其配置为允许多核访问。</p>
<p>2.If the StbM will be associated with &lt;Bus&gt;TSyn modules on multiple different cores, the hardware clock configured here needs to be configured to allow multi-core access in Mcal.</p>
</section>
</section>
<section id="rte-stbm-types-h-generation-of-rte-stbm-types-h-file">
<h3>Rte_StbM_Types.h文件生成 Generation of Rte_StbM_Types.h File<a class="headerlink" href="#rte-stbm-types-h-generation-of-rte-stbm-types-h-file" title="Link to this heading">¶</a></h3>
<p>请参考《ORIENTAIS Configurator for EasyXMen V25.10 使用指南.pdf》的3.6.3章节服务封装使用步骤内容。</p>
<p>Please refer to the content of the service encapsulation usage steps in Chapter 3.6.3 of “ORIENTAIS Configurator for EasyXMen V25.10 User Manual .pdf”.</p>
</section>
<section id="multi-partition-deployment">
<h3>多分区部署 Multi-Partition Deployment<a class="headerlink" href="#multi-partition-deployment" title="Link to this heading">¶</a></h3>
<p>1.配置项 <strong>StbMEcucPartitionRef</strong> 确定纯本地时间基运行在哪个分区上，同步时间基运行于哪个分区由其被关联的&lt;Bus&gt;TSyn模块决定，在单分区系统上不需要配置该参数。</p>
<p>1.The configuration item <strong>StbMEcucPartitionRef</strong> determines which partition the pure local time base runs on. The partition where the synchronized time base runs is determined by the &lt;Bus&gt;TSyn module it is associated with. This parameter does not need to be configured in a single-partition system.</p>
<p>以下是相关配置的用例</p>
<p>The following are use cases for related configurations.</p>
<p>配置一个基础的时间基，提供给CanTSyn使用。</p>
<p>Configure a basic time base for CanTSyn to use.</p>
<figure class="align-center">
<img alt="StbM_1" src="../../../_images/StbM_1.png" />
</figure>
<p>如上图所示，需要配置StbM的主函数周期，这里配置为10ms。黄色部分指分区信息，勾选后表示StbM是多分区的，否则为单分区。下拉框选中的分区指默认分区，当StbM配置的任意时间基没有被任何时间同步TSP模块关联后，StbM配置为该分区。</p>
<p>As shown in the figure above, it is necessary to configure the main function period of StbM, which is configured as 10ms here. The yellow part refers to partition information. Checking it means that StbM is multi-partition; otherwise, it is single-partition. The partition selected in the drop-down box refers to the default partition. When any time base configured by StbM is not associated with any time synchronization TSP module, StbM is configured as this partition.</p>
<figure class="align-center">
<img alt="StbM_2" src="../../../_images/StbM_2.png" />
</figure>
<p>在StbMSynchronizedTimeBase处右键新建一个时间基。</p>
<p>Right-click on StbMSynchronizedTimeBase to create a new time base.</p>
<figure class="align-center">
<img alt="StbM_3" src="../../../_images/StbM_3.png" />
</figure>
<p>StbMNotificationInterface配置为NO_NOTIFICATION。时间基标识StbMSynchronizedTimeBaseIdentifier配置为0(用于时间同步的时间基StbMSynchronizedTimeBaseIdentifier范围为0-15，如果是纯本地时间基则为32-127。偏移时间基已经被移除)。</p>
<p>StbMNotificationInterface is configured as NO_NOTIFICATION. The time base identifier StbMSynchronizedTimeBaseIdentifier is configured as 0 (The range of StbMSynchronizedTimeBaseIdentifier for the time base used for time synchronization is 0-15, and 32-127 for the pure local time base. The offset time base has been removed).</p>
<figure class="align-center">
<img alt="StbM_4" src="../../../_images/StbM_4.png" />
</figure>
<p>新增一个StbMLocalTimeClock，关联本地的一个时钟源。除了EthTSynGlobalTimeDomain之外，都需要配置StbMClockFrequency和StbMClockPrescaler进行分频。注意：分频系数需要和所关联的硬件时钟源匹配。此处选择的是GPT，分频系数为1/50000000。</p>
<p>Add a new StbMLocalTimeClock and associate it with a local clock source. Except for EthTSynGlobalTimeDomain, it is necessary to configure StbMClockFrequency and StbMClockPrescaler for frequency division. Note: The frequency division factor needs to match the associated hardware clock source. The selected one here is GPT, and the frequency division factor is 1/50000000.</p>
</section>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="../SomeIpTp/SomeIpTp.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>SomeIpTp
    </a>
    <a class="float-right" href="../TcpIp/TcpIp.html" title="Next">
        TcpIp <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">StbM</a><ul>
<li><a class="reference internal" href="#document-information">文档信息 Document Information</a><ul>
<li><a class="reference internal" href="#version-history">版本历史 Version History</a></li>
<li><a class="reference internal" href="#references">参考文档 References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terms-and-abbreviations">术语与简写 Terms and Abbreviations</a><ul>
<li><a class="reference internal" href="#terms">术语 Terms</a></li>
<li><a class="reference internal" href="#abbreviations">简写 Abbreviations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#introduction">简介 Introduction</a></li>
<li><a class="reference internal" href="#functional-description">功能描述 Functional Description</a><ul>
<li><a class="reference internal" href="#features">特性 Features</a><ul>
<li><a class="reference internal" href="#global-time-base">全局时间基 Global Time Base</a></li>
<li><a class="reference internal" href="#status-change-notification-function">状态变化通知功能 Status Change Notification Function</a></li>
<li><a class="reference internal" href="#timing-function">定时功能 Timing Function</a></li>
<li><a class="reference internal" href="#time-recording-function">时间记录功能 Time Recording Function</a></li>
<li><a class="reference internal" href="#time-deviation-correction">时间偏差校准 Time Deviation Correction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deviation">偏差 Deviation</a></li>
<li><a class="reference internal" href="#extension">扩展 Extension</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integration">集成 Integration</a><ul>
<li><a class="reference internal" href="#file-list">文件列表 File List</a><ul>
<li><a class="reference internal" href="#static-files">静态文件 Static Files</a></li>
<li><a class="reference internal" href="#dynamic-files">动态文件 Dynamic Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling">错误处理 Error Handling</a><ul>
<li><a class="reference internal" href="#development-errors">开发错误 Development Errors</a></li>
<li><a class="reference internal" href="#product-errors">产品错误 Product Errors</a></li>
<li><a class="reference internal" href="#runtime-errors">运行时错误 Runtime Errors</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#interface-description">接口描述 Interface Description</a><ul>
<li><a class="reference internal" href="#stbm-stbm-external-type-definitions">StbM对外类型定义 StbM External Type Definitions</a></li>
<li><a class="reference internal" href="#stbm-services-provided-externally-by-stbm">StbM对外提供的服务 Services Provided Externally by StbM</a><ul>
<li><a class="reference internal" href="#stbm-init">StbM_Init</a></li>
<li><a class="reference internal" href="#stbm-getversioninfo">StbM_GetVersionInfo</a></li>
<li><a class="reference internal" href="#stbm-getcurrenttime">StbM_GetCurrentTime</a></li>
<li><a class="reference internal" href="#stbm-getcurrentvirtuallocaltime">StbM_GetCurrentVirtualLocalTime</a></li>
<li><a class="reference internal" href="#stbm-setglobaltime">StbM_SetGlobalTime</a></li>
<li><a class="reference internal" href="#stbm-updateglobaltime">StbM_UpdateGlobalTime</a></li>
<li><a class="reference internal" href="#stbm-setuserdata">StbM_SetUserData</a></li>
<li><a class="reference internal" href="#stbm-bussetglobaltime">StbM_BusSetGlobalTime</a></li>
<li><a class="reference internal" href="#stbm-getratedeviation">StbM_GetRateDeviation</a></li>
<li><a class="reference internal" href="#stbm-setratecorrection">StbM_SetRateCorrection</a></li>
<li><a class="reference internal" href="#stbm-gettimeleap">StbM_GetTimeLeap</a></li>
<li><a class="reference internal" href="#stbm-gettimebasestatus">StbM_GetTimeBaseStatus</a></li>
<li><a class="reference internal" href="#stbm-starttimer">StbM_StartTimer</a></li>
<li><a class="reference internal" href="#stbm-getsynctimerecordhead">StbM_GetSyncTimeRecordHead</a></li>
<li><a class="reference internal" href="#stbm-triggertimetransmission">StbM_TriggerTimeTransmission</a></li>
<li><a class="reference internal" href="#stbm-gettimebaseupdatecounter">StbM_GetTimeBaseUpdateCounter</a></li>
<li><a class="reference internal" href="#stbm-getmasterconfig">StbM_GetMasterConfig</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stbm-stbm-internal-module-type-definitions">StbM内部模块类型定义 StbM Internal Module Type Definitions</a></li>
<li><a class="reference internal" href="#stbm-services-provided-by-stbm-internal-module">StbM内部模块提供的服务 Services Provided by StbM Internal Module</a></li>
<li><a class="reference internal" href="#stbm-stbm-configuration-parameter-type-definitions">StbM配置参数类型定义 StbM Configuration Parameter Type Definitions</a></li>
<li><a class="reference internal" href="#stbm-services-provided-by-stbm-configuration">StbM配置提供的服务 Services Provided by StbM Configuration</a></li>
<li><a class="reference internal" href="#configuration-function">配置函数 Configuration function</a><ul>
<li><a class="reference internal" href="#stbm-mainfunction">StbM_MainFunction</a></li>
<li><a class="reference internal" href="#statusnotificationcallback-timebase">StatusNotificationCallback&lt;TimeBase&gt;</a></li>
<li><a class="reference internal" href="#customer-timenotificationcallback-timebase">&lt;Customer&gt;_TimeNotificationCallback&lt;TimeBase&gt;</a></li>
<li><a class="reference internal" href="#synctimerecordblockcallback-timebase">SyncTimeRecordBlockCallback&lt;TimeBase&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#swc-swc-service-component-encapsulation">SWC服务组件封装 SWC Service Component Encapsulation</a><ul>
<li><a class="reference internal" href="#cs-cs-interface-encapsulation">CS接口封装 CS Interface Encapsulation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#applicable-services">依赖的服务 Applicable Services</a><ul>
<li><a class="reference internal" href="#compulsory-interface">强制接口 Compulsory interface</a></li>
<li><a class="reference internal" href="#optional-interface">可选接口 Optional Interface</a></li>
<li><a class="reference internal" href="#configuration-interfaces">配置接口 Configuration Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">配置 Configuration</a><ul>
<li><a class="reference internal" href="#stbmgeneral">StbMGeneral</a><ul>
<li><a class="reference internal" href="#stbmgpttimerref">StbMGptTimerRef</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stbmsynchronizedtimebase">StbMSynchronizedTimeBase</a><ul>
<li><a class="reference internal" href="#stbmstoretimebasenonvolatile">StbMStoreTimebaseNonVolatile</a></li>
<li><a class="reference internal" href="#stbmlocaltimeclock">StbMLocalTimeClock</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rte-stbm-types-h-generation-of-rte-stbm-types-h-file">Rte_StbM_Types.h文件生成 Generation of Rte_StbM_Types.h File</a></li>
<li><a class="reference internal" href="#multi-partition-deployment">多分区部署 Multi-Partition Deployment</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>