<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>EcuM &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
            <link rel="next" title="Ea" href="../Ea/Ea.html" />
            <link rel="prev" title="E2E" href="../E2E/E2E.html" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanSM/CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoIP/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSM/EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Os/Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StbM/StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">EcuM</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
        <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/EcuM/EcuM.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="ecum">
<h1>EcuM<a class="headerlink" href="#ecum" title="Link to this heading">¶</a></h1>
<section id="document-information">
<h2>文档信息(Document Information)<a class="headerlink" href="#document-information" title="Link to this heading">¶</a></h2>
<section id="version-history">
<h3>版本历史(Version History)<a class="headerlink" href="#version-history" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>日期(Date)</p></th>
<th class="head"><p>作者(Author)</p></th>
<th class="head"><p>版本(Version)</p></th>
<th class="head"><p>状态(Status)</p></th>
<th class="head"><p>说明(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2024/11/20</p></td>
<td><p>Jian.Jiang</p></td>
<td><p>V0.1</p></td>
<td><p>发布(Release)</p></td>
<td><p>首次发布(First release)</p></td>
</tr>
<tr class="row-odd"><td><p>2025/04/04</p></td>
<td><p>Jian.Jiang</p></td>
<td><p>V1.0</p></td>
<td><p>发布(Release)</p></td>
<td><p>正式发布(Official release)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="references">
<h3>参考文档(References)<a class="headerlink" href="#references" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 25.0%" />
<col style="width: 41.7%" />
<col style="width: 16.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>编号(Number)</p></th>
<th class="head"><p>分类(Classification)</p></th>
<th class="head"><p>标题(Title)</p></th>
<th class="head"><p>版本(Version)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_CP_EXP_ModeManagementGuide.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_CP_SRS_ModeManagement.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_CP_SWS_ECUStateManager.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="terms-and-abbreviations">
<h2>术语与简写(Terms and Abbreviations)<a class="headerlink" href="#terms-and-abbreviations" title="Link to this heading">¶</a></h2>
<section id="terms">
<h3>术语(Terms)<a class="headerlink" href="#terms" title="Link to this heading">¶</a></h3>
<blockquote>
<div></div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>术语(Term)</p></th>
<th class="head"><p>解释(Explanation)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Mode</p></td>
<td><p>模式是车辆中运行的各种状态机(不仅仅是 ECU 管理器)的一组特定状态，与特定实体、应用程序或整个车辆相关(A mode is a set of specific states of various state machines (not just the ECU manager) running in the vehicle, which is related to a specific entity, application, or the entire vehicle)</p></td>
</tr>
<tr class="row-odd"><td><p>Phase</p></td>
<td><p>ECU 管理器操作和事件的逻辑或时间组合，例如启动、启动、关闭、休眠……阶段可以由子阶段组成，如果子阶段主要存在以将执行的操作序列分组为逻辑单元，则通常称为序列。(A logical or temporal combination of ECU manager operations and events, such as startup, boot, shutdown, sleep… A phase can consist of sub-phases, and if a sub-phase mainly exists to group the sequence of operations performed into logical units, it is usually called a sequence)</p></td>
</tr>
<tr class="row-even"><td><p>Shutdown Target</p></td>
<td><p>在 ECU 进入休眠状态、断电或重置之前，必须将其关闭。因此，SLEEP、OFF 和 RESET 是有效的关闭目标。通过选择关闭目标，应用程序可以将其对下次关闭后 ECU 行为的期望传达给 ECU 管理器模块。 (Before the ECU enters the sleep state, powers off, or resets, it must be shut down. Therefore, SLEEP, OFF, and RESET are valid shutdown targets. By selecting a shutdown target, the application can convey its expectations for the ECU’s behavior after the next shutdown to the ECU manager module)</p></td>
</tr>
<tr class="row-odd"><td><p>Phase</p></td>
<td><p>ECU 管理器操作和事件的逻辑或时间组合，例如启动、启动、关闭、休眠……阶段可以由子阶段组成，如果子阶段主要存在以将执行的操作序列分组为逻辑单元，则通常称为序列。(A logical or temporal combination of ECU manager operations and events, such as startup, boot, shutdown, sleep… A phase can consist of sub-phases, and if a sub-phase mainly exists to group the sequence of operations performed into logical units, it is usually called a sequence)</p></td>
</tr>
<tr class="row-even"><td><p>Wakeup Event</p></td>
<td><p>导致唤醒的物理事件。CAN 消息或切换 IO 线可以是唤醒事件。同样，内部 SW 表示(例如中断)也可以称为唤醒事件。 (A physical event that causes wakeup. A CAN message or a switched IO line can be a wakeup event. Similarly, an internal software representation (such as an interrupt) can also be called a wakeup event)</p></td>
</tr>
<tr class="row-odd"><td><p>Wakeup Reason</p></td>
<td><p>导致唤醒的物理事件。CAN 消息或切换 IO 线可以是唤醒事件。同样，内部 SW 表示(例如中断)也可以称为唤醒事件。 (A physical event that causes wakeup. A CAN message or a switched IO line can be a wakeup event. Similarly, an internal software representation (such as an interrupt) can also be called a wakeup event)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="abbreviations">
<h3>简写(Abbreviations)<a class="headerlink" href="#abbreviations" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 33.3%" />
<col style="width: 41.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>简写(Abbreviation)</p></th>
<th class="head"><p>全称(Full name)</p></th>
<th class="head"><p>解释(Explanation)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BswM</p></td>
<td><p>Basic Software Mode Manager</p></td>
<td><p>基础软件模式管理器</p></td>
</tr>
<tr class="row-odd"><td><p>Dem</p></td>
<td><p>Diagnostic Event Manager</p></td>
<td><p>诊断事件管理器</p></td>
</tr>
<tr class="row-even"><td><p>Det</p></td>
<td><p>Default Error Tracer</p></td>
<td><p>默认错误追踪器</p></td>
</tr>
<tr class="row-odd"><td><p>Mcu</p></td>
<td><p>Microcontroller Unit</p></td>
<td><p>微控制器单元</p></td>
</tr>
<tr class="row-even"><td><p>Os</p></td>
<td><p>Operating System</p></td>
<td><p>操作系统</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="introduction">
<h2>简介(Introduction)<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>EcuM主要用于管理ECU状态的模块，它管理ECU的运行状态，并控制ECU的启动、关闭、休眠、唤醒等操作。具体来说，EcuM模块主要完成以下功能：</p>
<p>EcuM is mainly used to manage ECU states. It manages the operating state of the ECU and controls operations such as ECU startup, shutdown, sleep, and wake-up. Specifically, the EcuM module mainly accomplishes the following functions:</p>
<blockquote>
<div><ul>
<li><p>初始化和取消初始化OS、SchM和BswM以及一些基本软件驱动模块。</p>
<p>Initializes and deinitializes OS, SchM, BswM, and some basic software driver modules.</p>
</li>
<li><p>根据请求将 ECU 配置为休眠和关机。</p>
<p>Configures the ECU for sleep and shutdown according to requests.</p>
</li>
<li><p>管理 ECU 上的所有唤醒事件。</p>
<p>Manages all wake-up events on the ECU.</p>
</li>
</ul>
</div></blockquote>
<figure class="align-center" id="fig-ecumarch">
<img alt="EcuM模块层次图 (EcuM Hierarchy Diagram)" src="../../../_images/EcuM%E5%B1%82%E6%AC%A1%E5%9B%BE.png" />
<figcaption>
<p><span class="caption-text">EcuM层次图 (EcuM Hierarchy Diagram)</span><a class="headerlink" href="#fig-ecumarch" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>如图 <a class="reference internal" href="#fig-ecumarch"><span class="std std-ref">EcuM层次图 (EcuM Hierarchy Diagram)</span></a> 所示，EcuM模块处于AUTOSAR架构中的系统服务层，它与 SchM、BswM、Os、Mcu 等模块直接相连，与这些模块结合起来，完成ECU的启动、关闭、休眠等操作。</p>
<p>As shown in Figure <a class="reference internal" href="#fig-ecumarch"><span class="std std-ref">EcuM层次图 (EcuM Hierarchy Diagram)</span></a>, the EcuM module is located in the system service layer of the AUTOSAR architecture. It is directly connected to modules such as SchM, BswM, Os, and Mcu, and works together with these modules to complete operations such as ECU startup, shutdown, and sleep.</p>
</section>
<section id="functional-description">
<h2>功能描述(Functional Description)<a class="headerlink" href="#functional-description" title="Link to this heading">¶</a></h2>
<section id="module-initialization-function">
<h3>模块初始化功能(Module Initialization Function)<a class="headerlink" href="#module-initialization-function" title="Link to this heading">¶</a></h3>
<section id="introduction-to-module-initialization-function">
<h4>模块初始化功能介绍(Introduction to Module Initialization Function)<a class="headerlink" href="#introduction-to-module-initialization-function" title="Link to this heading">¶</a></h4>
<p>上电时，EcuM负责基础软件模块(包含MCAL)的初始化(结合BswM)，然后启动Os。</p>
<p>When powered on, EcuM is responsible for initializing basic software modules (including MCAL) (in conjunction with BswM) and then starting the OS.</p>
</section>
<section id="integration-of-module-initialization-function">
<h4>模块初始化功能集成(Integration of Module Initialization Function)<a class="headerlink" href="#integration-of-module-initialization-function" title="Link to this heading">¶</a></h4>
<p>针对模块初始化工作需要通过EcuM配置实现，初始化列表中的项限定于Autosar中的模块注1 初始化
列表分为EcuMDriverInitListZero、EcuMDriverInitListOne、EcuMDriverRestartList；其中
EcuMDriverInitListZero与EcuMDriverInitListOne两者都在Os启动前进行初始化，意味这这些
模块的初始化不能使用Os的任何接口，其中EcuMDriverInitListZero不能使用Post-build为配置
参数的模块初始化；两者的初始化列表示例如下图</p>
<p>Module initialization work needs to be implemented through EcuM configuration. Items in the initialization list are limited to modules specified in AUTOSAR [Note 1]. The initialization lists are divided into EcuMDriverInitListZero, EcuMDriverInitListOne, and EcuMDriverRestartList. Both EcuMDriverInitListZero and EcuMDriverInitListOne are initialized before OS startup, meaning these modules cannot use any OS interfaces during initialization. Additionally, EcuMDriverInitListZero cannot use module initialization with post-build configuration parameters. Examples of both initialization lists are shown in the following figure.</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum00">
<img alt="EcuM模块初始化列表(EcuM Module Initialization List)" src="../../../_images/DriverInitialization.png" />
<figcaption>
<p><span class="caption-text">DriverInitialization</span><a class="headerlink" href="#fig-ecum00" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
</section>
<section id="sleep-wake-up-function">
<h3>睡眠唤醒功能 Sleep/Wake-up(Function)<a class="headerlink" href="#sleep-wake-up-function" title="Link to this heading">¶</a></h3>
<section id="introduction-to-sleep-wake-up-function">
<h4>睡眠唤醒功能介绍 Introduction to Sleep/Wake-up(Function)<a class="headerlink" href="#introduction-to-sleep-wake-up-function" title="Link to this heading">¶</a></h4>
<p>对于车机系统中，休眠唤醒是最常见的功能，也是AutoSar中最基础的功能，它主要完成ECU的休眠、唤醒等操作。
在AUTOSAR中，休眠唤醒主要通过EcuM来配置实现的。ECU一般休眠方式有三种：</p>
<p>In vehicle systems, sleep/wake-up is the most common function and also the most basic function in AUTOSAR, mainly performing ECU sleep and wake-up operations.
In AUTOSAR, sleep/wake-up is primarily configured and implemented through EcuM. There are generally three ECU sleep modes:</p>
<blockquote>
<div><ul>
<li><p>Mcu休眠，EcuM进入Halt模式，通过外设中断唤醒；</p>
<p>MCU sleep: EcuM enters Halt mode and wakes up via peripheral interrupts;</p>
</li>
<li><p>Mcu处于低功耗，还能运行简单循环逻辑，EcuM进入Poll模式，通过外设中断唤醒或周期事件唤醒；</p>
<p>MCU in low power mode with simple loop logic capability: EcuM enters Poll mode and wakes up via peripheral interrupts or periodic events;</p>
</li>
<li><p>Mcu掉电，由外部设备检测到唤醒事件直接给Mcu供电</p>
<p>MCU power off: External device detects wake-up event and directly powers the MCU.</p>
</li>
</ul>
</div></blockquote>
<section id="sleep-phase">
<h5>Sleep(Phase)<a class="headerlink" href="#sleep-phase" title="Link to this heading">¶</a></h5>
<p>上述前两个方式在EcuM中属于SLEEP阶段，都是通过控制Mcu进入低功耗模式来使Mcu暂停，
需要调用EcuM的API: EcuM_GoDownHaltPoll来进入，对应的处理流程如下图</p>
<p>The first two methods above belong to the SLEEP phase in EcuM, both pausing the MCU by controlling it to enter low-power mode.
Requires calling EcuM API: EcuM_GoDownHaltPoll to enter, with corresponding processing flow as shown below.</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum01">
<img alt="EcuM模块休眠流程(EcuM Module Sleep Process)" src="../../../_images/SLEEPPhaseGeneral.png" />
<figcaption>
<p><span class="caption-text">Sleep Phase General</span><a class="headerlink" href="#fig-ecum01" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
<p>其中GoSleep Sequence 解析流程如下图：</p>
<p>The GoSleep Sequence parsing process is shown below:</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum02">
<img alt="GoSleep Sequence" src="../../../_images/EcuMGoSleepSequence.png" />
<figcaption>
<p><span class="caption-text">EcuM Go Sleep Sequence</span><a class="headerlink" href="#fig-ecum02" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
<section id="shutdown-phase">
<h5>Shutdown(Phase)<a class="headerlink" href="#shutdown-phase" title="Link to this heading">¶</a></h5>
<p>对于Mcu掉电，在EcuM中处于Shutdown阶段，有BswM执行相应逻辑后进入该阶段，对应的处理流程如下图：</p>
<p>For MCU power-off, it is in the Shutdown phase in EcuM, entered after BswM executes corresponding logic, with processing flow as shown below:</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum03">
<img alt="EcuM Shutdown Phase" src="../../../_images/ShutdownPhaseGeneral.png" />
<figcaption>
<p><span class="caption-text">Shutdown Phase General</span><a class="headerlink" href="#fig-ecum03" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
<p>流程中的OffPreOS Sequence分解后如下图：</p>
<p>The decomposed OffPreOS Sequence in the flow is shown below:</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum04">
<img alt="OffPreOS Sequence" src="../../../_images/OffPreOSSequence.png" />
<figcaption>
<p><span class="caption-text">Off PreOS Sequence</span><a class="headerlink" href="#fig-ecum04" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
<p>流程中的OffPostOS Sequence分解后如下图：</p>
<p>The decomposed OffPostOS Sequence in the flow is shown below:</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum05">
<img alt="OffPostOS Sequence" src="../../../_images/OffPostOSSequence.png" />
<figcaption>
<p><span class="caption-text">Off PostOS Sequence</span><a class="headerlink" href="#fig-ecum05" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
<section id="wake-up-and-verification-process">
<h5>唤醒以及验证流程 Wake-up and(Verification Process)<a class="headerlink" href="#wake-up-and-verification-process" title="Link to this heading">¶</a></h5>
<p>在EcuM中对于每个唤醒源Wakeup Source的状态与对应的描述如下表所示：</p>
<p>In EcuM, the status and corresponding descriptions for each wake-up source are shown in the following table:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>唤醒源状态(Wake-up Source Status)</p></th>
<th class="head"><p>状态描述(Status Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NONE</p></td>
<td><p>唤醒事件未检测到，或者已经被清除 (No wake-up event detected, or it has been cleared)</p></td>
</tr>
<tr class="row-odd"><td><p>PENDING</p></td>
<td><p>唤醒事件检测到，但是还未验证 (Wake-up event detected, but not yet verified)</p></td>
</tr>
<tr class="row-even"><td><p>VALIDATED</p></td>
<td><p>唤醒事件检测到，并且已经验证成功 (Wake-up event detected and successfully verified)</p></td>
</tr>
<tr class="row-odd"><td><p>EXPIRED</p></td>
<td><p>唤醒事件检测到，但是已经校验超时 (Wake-up event detected, but verification has timed out)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>以上唤醒状态转换流程如下图：</p>
<p>The wake-up status transition process is shown below:</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum06">
<img alt="EcuM Wakeup Source Status" src="../../../_images/WakeupSourceStatus.png" />
<figcaption>
<p><span class="caption-text">Wakeup Source Status</span><a class="headerlink" href="#fig-ecum06" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
<p>以上状态的变化通过API(BswM_EcuM_CurrentWakeup)来通知BswM, BswM可以通过收到的通知来做一些其他的逻辑操作(通过集成配置实现)。</p>
<p>State changes are notified to BswM via API (BswM_EcuM_CurrentWakeup). BswM can perform other logical operations based on received notifications (implemented through integrated configuration).</p>
<p>ECU 管理器模块最多可以管理 32 个唤醒源，每个唤醒源占32位数据的1位，其中有5个为系统默认如下表所示：</p>
<p>The ECU Manager module can manage up to 32 wake-up sources, each occupying 1 bit of 32-bit data, with 5 system defaults as shown below:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 14.3%" />
<col style="width: 42.9%" />
<col style="width: 42.9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>唤醒源(Wake-up Sources)</p></th>
<th class="head"><p>唤醒源的值(Value of Wake-up Source)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ECUM_WKSOURCE_POWER</p></td>
<td><p>0x01</p></td>
<td><p>电源循环(位 0) (Power cycle (bit 0))</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_WKSOURCE_RESET</p></td>
<td><p>0x02</p></td>
<td><p>硬件复位(位 1)。如果 Mcu 驱动程序无法区分电源循环和复位原因，则这应为默认唤醒源。 (Hardware reset (bit 1). If the MCU driver cannot distinguish between power cycles and reset causes, this shall be the default wake-up source.)</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_WKSOURCE_INTERNAL_RESET</p></td>
<td><p>0x04</p></td>
<td><p>µC 的内部复位(位 2) 内部复位通常仅复位 µC 核心，而不会复位外设或内存控制器。确切的行为取决于硬件。此源也可能表示未处理的异常。 (Internal reset of the µC (bit 2). Internal reset usually only resets the µC core, not peripherals or memory controllers. The exact behavior depends on the hardware. This source may also indicate an unhandled exception.)</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_WKSOURCE_INTERNAL_WDG</p></td>
<td><p>0x08</p></td>
<td><p>由内部看门狗复位(位 3) (Reset by internal watchdog (bit 3))</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_WKSOURCE_EXTERNAL_WDG</p></td>
<td><p>0x10</p></td>
<td><p>如果硬件支持检测，则由外部看门狗(位 4)复位 (Reset by external watchdog if hardware supports detection (bit 4))</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>EcuM可以通过配置来EcuMCheckWakeupTimeout、EcuMValidationTimeout来使能唤醒验证，唤醒验证流程序列图如下图：</p>
<p>EcuM can enable wake-up verification by configuring EcuMCheckWakeupTimeout and EcuMValidationTimeout. The wake-up verification sequence diagram is shown below:</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum07">
<img alt="EcuM Wakeup Validation Sequence" src="../../../_images/WakeupValidationSequence.png" />
<figcaption>
<p><span class="caption-text">Wakeup Validation Sequence</span><a class="headerlink" href="#fig-ecum07" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
</section>
<section id="implementation-of-sleep-wake-up-function">
<h4>睡眠唤醒功能实现 Implementation of Sleep/Wake-up(Function)<a class="headerlink" href="#implementation-of-sleep-wake-up-function" title="Link to this heading">¶</a></h4>
<p>EcuM 管理器模块提供以下接口来确定这些唤醒源的状态：</p>
<p>The EcuM manager module provides the following interfaces to determine the status of these wake-up sources:</p>
<blockquote>
<div><ul class="simple">
<li><p>EcuM_GetPendingWakeupEvents</p></li>
<li><p>EcuM_GetValidatedWakeupEvents</p></li>
<li><p>EcuM_GetExpiredWakeupEvents</p></li>
</ul>
</div></blockquote>
<p>EcuM通过以下接口操纵唤醒源的状态 :</p>
<p>EcuM manipulates wake-up source status through the following interfaces:</p>
<blockquote>
<div><ul class="simple">
<li><p>EcuM_ClearWakeupEvent</p></li>
<li><p>EcuM_SetWakeupEvent</p></li>
<li><p>EcuM_ValidateWakeupEvent</p></li>
<li><p>EcuM_CheckWakeup</p></li>
<li><p>EcuM_DisableWakeupSources</p></li>
<li><p>EcuM_EnableWakeupSources</p></li>
<li><p>EcuM_StartWakeupSources</p></li>
<li><p>EcuM_StopWakeupSources</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="multi-core">
<h3>多核 Multi-core<a class="headerlink" href="#multi-core" title="Link to this heading">¶</a></h3>
<p>在多核架构中，EcuM必须在每个核心存在一个实例。有一个指定的主核心，其中引导加载
程序通过 EcuM_Init 启动主EcuM。主EcuM启动一些驱动程序，确定构建后配置，并启动
所有剩余核心及其所有从EcuM。每个 EcuM 现在启动核心本地操作系统和所有核心本地BswM。
多核架构中，EcuM的分部如下图所示：</p>
<p>In a multi-core architecture, EcuM must have one instance per core. There is a designated main core where the boot loader starts the main EcuM via EcuM_Init. The main EcuM starts some drivers, determines post-build configuration, and starts all remaining cores and their slave EcuMs. Each EcuM then starts the core-local operating system and all core-local BswMs.
The distribution of EcuM in a multi-core architecture is shown below:</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum08">
<img alt="EcuM 多核分布(EcuM Multi-core Distribution)" src="../../../_images/MultiCore.png" />
<figcaption>
<p><span class="caption-text">Multi Core</span><a class="headerlink" href="#fig-ecum08" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
<section id="ecum-ecum-mode-handling">
<h3>EcuM 模式处理(EcuM Mode Handling)<a class="headerlink" href="#ecum-ecum-mode-handling" title="Link to this heading">¶</a></h3>
<p>ECU 状态管理器为 SW-C 提供接口，以便选择性地请求和释放模式 RUN 和 POST_RUN。
EcuMFlex 仲裁 SW-C 发出的请求和释放，并将结果传播给 BswM。EcuM 和 BswM 之间
的合作是必要的，因为只有 BswM 才能决定何时转换到不同的模式。由于 EcuM 没有自己
的状态机，EcuM 依赖于 BswM 进行的状态转换。因此，EcuM 不请求状态。此外，它会通
知 BswM 所有请求的当前仲裁情况。当 RTE 执行了属于某种模式的所有 Runnable 时，
BswM 会收到通知。如图所示EcuM模式处理机构。</p>
<p>The ECU State Manager provides interfaces for SW-C to selectively request and release RUN and POST_RUN modes.
EcuMFlex arbitrates requests and releases issued by SW-C and propagates results to BswM. Cooperation between EcuM and BswM is necessary because only BswM can decide when to transition to different modes. Since EcuM lacks its own state machine, it relies on BswM for state transitions. Therefore, EcuM does not request states. Additionally, it notifies BswM of current arbitration status for all requests. BswM is notified when RTE executes all Runnables belonging to a certain mode. The EcuM mode handling mechanism is shown in the figure.</p>
<blockquote>
<div><figure class="align-center" id="fig-ecum09">
<img alt="EcuM 模式处理(EcuM Mode Handling)" src="../../../_images/ModeHandling.png" />
<figcaption>
<p><span class="caption-text">Mode Handling</span><a class="headerlink" href="#fig-ecum09" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
</section>
<section id="integration">
<h2>集成(Integration)<a class="headerlink" href="#integration" title="Link to this heading">¶</a></h2>
<section id="file-list">
<h3>文件列表(File List)<a class="headerlink" href="#file-list" title="Link to this heading">¶</a></h3>
<section id="static-files">
<h4>静态文件(Static Files)<a class="headerlink" href="#static-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EcuM.h</p></td>
<td><p>PB配置数据结构，以及外部接口声明(PB configuration data structure and external interface declarations)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_Cbk.h</p></td>
<td><p>EcuM回调函数声明(EcuM callback function declarations)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_Externals.h</p></td>
<td><p>EcuM模块中所有callout函数声明(Declarations of all callout functions in the EcuM module)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_Internal.h</p></td>
<td><p>定义所有内部数据结构，以及内部接口声明(Defines all internal data structures and internal interface declarations)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_MemMap.h</p></td>
<td><p>EcuM代码、变量所用的MemMap段(MemMap segments used by EcuM code and variables)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_Types.h</p></td>
<td><p>EcuM通用宏定义以及类型定义(EcuM general macro definitions and type definitions)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM.c</p></td>
<td><p>RUN/POST_RUN 仲裁、EcuM通用函数定义(RUN/POST_RUN arbitration and EcuM general function definitions)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_AlarmClock.c</p></td>
<td><p>包含当alarm存在时，设置alarm的API集合(Contains API collection for setting alarms when alarms exist)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_Shutdown.c</p></td>
<td><p>所有SHUTDOWN阶段API定义(All SHUTDOWN phase API definitions)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_Sleep.c</p></td>
<td><p>所有SLEEP阶段API定义(All SLEEP phase API definitions)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_StartUp.c</p></td>
<td><p>所有STARTUP阶段API定义(All STARTUP phase API definitions)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_Up.c</p></td>
<td><p>所有UP阶段API定义(All UP phase API definitions)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dynamic-files">
<h4>动态文件(Dynamic Files)<a class="headerlink" href="#dynamic-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EcuM_Callout_Stubs.c</p></td>
<td><p>EcuM callout函数定义(EcuM callout function definitions)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_Cfg.c</p></td>
<td><p>EcuM 的配置参数(Configuration parameters of EcuM)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_Cfg.h</p></td>
<td><p>一些控制宏以及宏参数定义(Some control macros and macro parameter definitions)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_Generated_Types.h</p></td>
<td><p>依赖配置生成的宏定义、数据结构等(Configuration-dependent generated macro definitions, data structures, etc.)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_Lcfg.c</p></td>
<td><p>定义链接配置运行时变量以及内部接口定义(Defines link configuration runtime variables and internal interface definitions)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_PBcfg.c</p></td>
<td><p>Post-Build 配置参数定义(Post-Build configuration parameter definitions)</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_PBcfg.h</p></td>
<td><p>全局Post-Build 配置参数声明(Global Post-Build configuration parameter declarations)</p></td>
</tr>
<tr class="row-odd"><td><p>Rte_EcuM_Type.h</p></td>
<td><p>外部参数类型定义(External parameter type definitions)</p></td>
</tr>
<tr class="row-even"><td><p>SchM_EcuM.h</p></td>
<td><p>定义关键区域保护以及mainfunction声明(Defines critical section protection and main function declarations)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="error-handling">
<h3>错误处理(Error Handling)<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h3>
<section id="development-errors">
<h4>开发错误(Development Errors)<a class="headerlink" href="#development-errors" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Value[hex]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ECUM_E_UNINIT</p></td>
<td><p>0x00</p></td>
<td><p>A service was called prior to initialization</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_E_SERVICE_DISABLED</p></td>
<td><p>0x01</p></td>
<td><p>A function was called which was disabled by configuration</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_NULL_POINTER</p></td>
<td><p>0x02</p></td>
<td><p>A invalid pointer was passed as an argument</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_E_INVALID_PAR</p></td>
<td><p>0x03</p></td>
<td><p>A parameter was invalid (unspecific)</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_STATE_PAR_OUT_OF_RANGE</p></td>
<td><p>0x04</p></td>
<td><p>A state, passed as an argument to a service, was out of range (specific parameter test)</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_E_UNKNOWN_WAKEUP_SOURCE</p></td>
<td><p>0x05</p></td>
<td><p>An unknown wakeup source was passed as a parameter to an API</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_INIT_FAILED</p></td>
<td><p>0x06</p></td>
<td><p>The initialization failed</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_E_RAM_CHECK_FAILED</p></td>
<td><p>0x07</p></td>
<td><p>The RAM check during wakeup failed</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_CONFIGURATION_DATA_INCONSISTENT</p></td>
<td><p>0x08</p></td>
<td><p>Postbuild configuration data is inconsistent</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_E_MULTIPLE_RUN_REQUESTS</p></td>
<td><p>0x09</p></td>
<td><p>On multiple requests by the same ID for requestRun()</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_MISMATCHED_RUN_RELEASE</p></td>
<td><p>0x10</p></td>
<td><p>On releasing without a matching request for releaseRun</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_E_CALL_OS_FAILED</p></td>
<td><p>0x11</p></td>
<td><p>Call to OS_Start failed</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_REINIT</p></td>
<td><p>0x13</p></td>
<td><p>Reinit EcuM module</p></td>
</tr>
</tbody>
</table>
</section>
<section id="runtime-errors">
<h4>运行时错误(Runtime ErrorS)<a class="headerlink" href="#runtime-errors" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Value[hex]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ECUM_E_WAKEUP_TIMEOUT</p></td>
<td><p>0x12</p></td>
<td><p>After a wake up, no wake up event was set in the given time (see EcuMCheckWakeupTimeout)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="interface-description">
<h2>接口描述(Interface Description)<a class="headerlink" href="#interface-description" title="Link to this heading">¶</a></h2>
<section id="type-definitions">
<h3>类型定义(Type Definitions)<a class="headerlink" href="#type-definitions" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Rte_ModeType_EcuM_Mode</p></td>
<td><p>uint8</p></td>
<td><p>EcuM Mode Type definition</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EcuM_RunStatusType</p></td>
<td><p>uint8</p></td>
<td><p>Result of the Run Request Protocol sent to BswM</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_WakeupSourceType</p></td>
<td><p>uint32</p></td>
<td><p>The bit field provides one bit for each wake up source.</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_WakeupStatusType</p></td>
<td><p>uint8</p></td>
<td><p>The type describes the possible states of a wakeup source</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM_ResetType</p></td>
<td><p>uint8</p></td>
<td><p>This type describes the reset mechanisms supported by the ECU State Manager</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_StateType</p></td>
<td><p>uint8</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>EcuM_TargetType</p></td>
<td><p>struct</p></td>
<td><p>Encode states and sub-states of the ECU Manager module.</p></td>
</tr>
<tr class="row-even"><td><p>EcuM_ConfigType</p></td>
<td><p>EcuM_PBConfigType</p></td>
<td><p>EcuM Configuration Type (PB)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="services">
<h3>提供的服务(Services)<a class="headerlink" href="#services" title="Link to this heading">¶</a></h3>
<section id="ecum-getversioninfo">
<h4>EcuM_GetVersionInfo<a class="headerlink" href="#ecum-getversioninfo" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_GetVersionInfo</span><span class="p">(</span><span class="n">Std_VersionInfoType</span> <span class="o">*</span><span class="n">versioninfo</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the version information of this module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>versioninfo</p></td>
<td><p>Pointer to where to store the version information of this module.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-godownhaltpoll">
<h4>EcuM_GoDownHaltPoll<a class="headerlink" href="#ecum-godownhaltpoll" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_GoDownHaltPoll</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">UserID</span><span class="p">)</span>
</pre></div>
</div>
<p>Instructs the ECU State Manager module to go into a sleep mode, reset, or off depending on the previously selected shutdown target.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>UserID</p></td>
<td><p>Module ID of the calling module. Only special modules are allowed to call this function and only valid when the shutdown target is RESET or OFF.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Request accepted and processed successfully.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The request was not accepted.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-init">
<h4>EcuM_Init<a class="headerlink" href="#ecum-init" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_Init</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Initializes the ECU state manager and carries out the startup procedure. The function will never return (it calls StartOS).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-startuptwo">
<h4>EcuM_StartupTwo<a class="headerlink" href="#ecum-startuptwo" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_StartupTwo</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Implements the STARTUP II state.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-shutdown">
<h4>EcuM_Shutdown<a class="headerlink" href="#ecum-shutdown" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_Shutdown</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Typically called from the shutdown hook, this function takes over execution control and carries out GO OFF II activities.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-setstate">
<h4>EcuM_SetState<a class="headerlink" href="#ecum-setstate" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_SetState</span><span class="p">(</span><span class="n">EcuM_StateType</span> <span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
<p>Function called by BswM to notify about a state switch.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>state</p></td>
<td><p>State indicated by BswM.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-requestrun">
<h4>EcuM_RequestRUN<a class="headerlink" href="#ecum-requestrun" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_RequestRUN</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Places a request for the RUN state. Requests can be placed by every user made known to the state manager at configuration time.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>ID of the entity requesting the RUN state.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The request was accepted by EcuM.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The request was not accepted by EcuM, a detailed error condition was sent to DET (see Error Codes).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-releaserun">
<h4>EcuM_ReleaseRUN<a class="headerlink" href="#ecum-releaserun" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_ReleaseRUN</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Releases a RUN request previously done with a call to EcuM_RequestRUN. The service is intended for implementing AUTOSAR ports.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>ID of the entity releasing the RUN state.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The request was accepted by EcuM.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The request was not accepted by EcuM, a detailed error condition was sent to DET (see Error Codes).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-requestpost-run">
<h4>EcuM_RequestPOST_RUN<a class="headerlink" href="#ecum-requestpost-run" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_RequestPOST_RUN</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Places a request for the POST RUN state. Requests can be placed by every user made known to the state manager at configuration time. Requests for RUN and POST RUN must be tracked independently (i.e., using two independent variables). The service is intended for implementing AUTOSAR ports.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>ID of the entity requesting the POST RUN state.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The request was accepted by EcuM.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The request was not accepted by EcuM, a detailed error condition was sent to DET (see Error Codes).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-releasepost-run">
<h4>EcuM_ReleasePOST_RUN<a class="headerlink" href="#ecum-releasepost-run" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_ReleasePOST_RUN</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Releases a POST RUN request previously done with a call to EcuM_RequestPOST_RUN. The service is intended for implementing AUTOSAR ports.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>ID of the entity releasing the POST RUN state.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The release request was accepted by EcuM.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The release request was not accepted by EcuM, a detailed error condition was sent to DET (see Error Codes).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-selectshutdowntarget">
<h4>EcuM_SelectShutdownTarget<a class="headerlink" href="#ecum-selectshutdowntarget" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_SelectShutdownTarget</span><span class="p">(</span><span class="n">EcuM_ShutdownTargetType</span> <span class="n">shutdownTarget</span><span class="p">,</span> <span class="n">EcuM_ShutdownModeType</span> <span class="n">shutdownMode</span><span class="p">)</span>
</pre></div>
</div>
<p>Selects the shutdown target. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>shutdownTarget</p></td>
<td><p>The selected shutdown target.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>shutdownMode</p></td>
<td><p>The identifier of a sleep mode (if target is ECUM_STATE_SLEEP) or a reset mechanism (if target is ECUM_STATE_RESET) as defined by configuration.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The new shutdown target was set.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The new shutdown target was not set.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-getshutdowntarget">
<h4>EcuM_GetShutdownTarget<a class="headerlink" href="#ecum-getshutdowntarget" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_GetShutdownTarget</span><span class="p">(</span><span class="n">EcuM_ShutdownTargetType</span> <span class="o">*</span><span class="n">shutdownTarget</span><span class="p">,</span> <span class="n">EcuM_ShutdownModeType</span> <span class="o">*</span><span class="n">shutdownMode</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the currently selected shutdown target as set by EcuM_SelectShutdownTarget. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>shutdownTarget</p></td>
<td><p>One of these values is returned: ECUM_STATE_SLEEP / ECUM_STATE_RESET / ECUM_STATE_OFF.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>shutdownMode</p></td>
<td><p>If the out parameter “shutdownTarget” is ECUM_STATE_SLEEP, shutdownMode indicates which of the configured sleep modes was chosen. If “shutdownTarget” is ECUM_STATE_RESET, shutdownMode indicates which of the configured reset modes was chosen.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The service has failed, e.g., due to a NULL pointer being passed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-getlastshutdowntarget">
<h4>EcuM_GetLastShutdownTarget<a class="headerlink" href="#ecum-getlastshutdowntarget" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_GetLastShutdownTarget</span><span class="p">(</span><span class="n">EcuM_ShutdownTargetType</span> <span class="o">*</span><span class="n">shutdownTarget</span><span class="p">,</span> <span class="n">EcuM_ShutdownModeType</span> <span class="o">*</span><span class="n">shutdownMode</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the shutdown target of the previous shutdown process. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>shutdownTarget</p></td>
<td><p>One of these values is returned: ECUM_STATE_SLEEP / ECUM_STATE_RESET / ECUM_STATE_OFF.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>shutdownMode</p></td>
<td><p>If the out parameter “shutdownTarget” is ECUM_STATE_SLEEP, shutdownMode indicates which of the configured sleep modes was chosen. If “shutdownTarget” is ECUM_STATE_RESET, shutdownMode indicates which of the configured reset modes was chosen.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The service has failed, e.g., due to a NULL pointer being passed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-selectshutdowncause">
<h4>EcuM_SelectShutdownCause<a class="headerlink" href="#ecum-selectshutdowncause" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_SelectShutdownCause</span><span class="p">(</span><span class="n">EcuM_ShutdownCauseType</span> <span class="n">cause</span><span class="p">)</span>
</pre></div>
</div>
<p>Elects the cause for a shutdown. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>cause</p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The new shutdown cause was set.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The new shutdown cause was not set.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-getshutdowncause">
<h4>EcuM_GetShutdownCause<a class="headerlink" href="#ecum-getshutdowncause" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_GetShutdownCause</span><span class="p">(</span><span class="n">EcuM_ShutdownCauseType</span> <span class="o">*</span><span class="n">shutdownCause</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the selected shutdown cause as set by EcuM_SelectShutdownCause. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>shutdownCause</p></td>
<td><p>The selected cause of the next shutdown.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The service has failed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-getpendingwakeupevents">
<h4>EcuM_GetPendingWakeupEvents<a class="headerlink" href="#ecum-getpendingwakeupevents" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EcuM_WakeupSourceType</span> <span class="n">EcuM_GetPendingWakeupEvents</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Gets pending wakeup events.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Return type</strong></p>
</section>
<section id="ecum-clearwakeupevent">
<h4>EcuM_ClearWakeupEvent<a class="headerlink" href="#ecum-clearwakeupevent" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_ClearWakeupEvent</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">sources</span><span class="p">)</span>
</pre></div>
</div>
<p>Clears wakeup events.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>sources</p></td>
<td><p>Events to be cleared.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-getvalidatedwakeupevents">
<h4>EcuM_GetValidatedWakeupEvents<a class="headerlink" href="#ecum-getvalidatedwakeupevents" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EcuM_WakeupSourceType</span> <span class="n">EcuM_GetValidatedWakeupEvents</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Gets validated wakeup events.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Return type</strong></p>
</section>
<section id="ecum-getexpiredwakeupevents">
<h4>EcuM_GetExpiredWakeupEvents<a class="headerlink" href="#ecum-getexpiredwakeupevents" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EcuM_WakeupSourceType</span> <span class="n">EcuM_GetExpiredWakeupEvents</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Gets expired wakeup events.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Return type</strong></p>
</section>
<section id="ecum-setrelwakeupalarm">
<h4>EcuM_SetRelWakeupAlarm<a class="headerlink" href="#ecum-setrelwakeupalarm" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_SetRelWakeupAlarm</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">,</span> <span class="n">EcuM_TimeType</span> <span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>Sets a user’s wakeup alarm relative to the current point in time. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>The user that wants to set the wakeup alarm.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>time</p></td>
<td><p>Relative time from now in seconds.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The service failed.</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_EARLIER_ACTIVE</p></td>
<td><p>An earlier alarm is already set.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-setabswakeupalarm">
<h4>EcuM_SetAbsWakeupAlarm<a class="headerlink" href="#ecum-setabswakeupalarm" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_SetAbsWakeupAlarm</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">,</span> <span class="n">EcuM_TimeType</span> <span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>Sets the user’s wakeup alarm to an absolute point in time. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>The user that wants to set the wakeup alarm.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>time</p></td>
<td><p>Absolute time in seconds. Note that absolute alarms use knowledge of the current time.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The service failed.</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_EARLIER_ACTIVE</p></td>
<td><p>An earlier alarm is already set.</p></td>
</tr>
<tr class="row-odd"><td><p>ECUM_E_PAST</p></td>
<td><p>The given point in time has already passed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-abortwakeupalarm">
<h4>EcuM_AbortWakeupAlarm<a class="headerlink" href="#ecum-abortwakeupalarm" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_AbortWakeupAlarm</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Aborts the wakeup alarm previously set by this user. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>The user that wants to cancel the wakeup alarm.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The service failed.</p></td>
</tr>
<tr class="row-even"><td><p>ECUM_E_NOT_ACTIVE</p></td>
<td><p>No owned alarm found.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-getcurrenttime">
<h4>EcuM_GetCurrentTime<a class="headerlink" href="#ecum-getcurrenttime" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_GetCurrentTime</span><span class="p">(</span><span class="n">EcuM_TimeType</span> <span class="o">*</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the current value of the EcuM clock (i.e., the time since battery connect). This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>time</p></td>
<td><p>Absolute time in seconds since battery connect.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-getwakeuptime">
<h4>EcuM_GetWakeupTime<a class="headerlink" href="#ecum-getwakeuptime" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_GetWakeupTime</span><span class="p">(</span><span class="n">EcuM_TimeType</span> <span class="o">*</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the current value of the master alarm clock (the minimum absolute time of all user alarm clocks). This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>time</p></td>
<td><p>Absolute time in seconds for the next wakeup. 0xFFFFFFFF means no active alarm.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-setclock">
<h4>EcuM_SetClock<a class="headerlink" href="#ecum-setclock" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_SetClock</span><span class="p">(</span><span class="n">EcuM_UserType</span> <span class="n">user</span><span class="p">,</span> <span class="n">EcuM_TimeType</span> <span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p>Sets the EcuM clock time to the provided value. This API is useful for testing the alarm services; Alarms that take days to expire can be tested. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>user</p></td>
<td><p>The user that wants to set the clock.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>time</p></td>
<td><p>Absolute time in seconds since battery connect.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service has succeeded.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The service failed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-selectboottarget">
<h4>EcuM_SelectBootTarget<a class="headerlink" href="#ecum-selectboottarget" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_SelectBootTarget</span><span class="p">(</span><span class="n">EcuM_BootTargetType</span> <span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
<p>Selects a boot target. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>target</p></td>
<td><p>The selected boot target.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The new boot target was accepted by EcuM.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The new boot target was not accepted by EcuM.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-getboottarget">
<h4>EcuM_GetBootTarget<a class="headerlink" href="#ecum-getboottarget" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EcuM_GetBootTarget</span><span class="p">(</span><span class="n">EcuM_BootTargetType</span> <span class="o">*</span><span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the current boot target. This function is part of the ECU Manager Module port interface.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>target</p></td>
<td><p>The currently selected boot target.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>The service always succeeds.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-setwakeupevent">
<h4>EcuM_SetWakeupEvent<a class="headerlink" href="#ecum-setwakeupevent" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_SetWakeupEvent</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">sources</span><span class="p">)</span>
</pre></div>
</div>
<p>Sets the wakeup event. Sets (OR-operation) all events passed as a bit set in the</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>sources</p></td>
<td><p>Value to be set.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-validatewakeupevent">
<h4>EcuM_ValidateWakeupEvent<a class="headerlink" href="#ecum-validatewakeupevent" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_ValidateWakeupEvent</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">sources</span><span class="p">)</span>
</pre></div>
</div>
<p>After wakeup, the ECU State Manager will stop the process during the WAKEUP VALIDATION state/sequence to wait for validation of the wakeup event. This API service is used to indicate to the ECU Manager module that the wakeup events indicated in the</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>sources</p></td>
<td><p>Events that have been validated.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-checkwakeup">
<h4>EcuM_CheckWakeup<a class="headerlink" href="#ecum-checkwakeup" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_CheckWakeup</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">wakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>This function can be called to check the given wakeup sources. It will pass the argument to the integrator function EcuM_CheckWakeupHook. It can also be called by the ISR of a wakeup source to set up the PLL and check other wakeup sources that may be connected to the same interrupt.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>wakeupSource</p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-al-driverinitbswm">
<h4>EcuM_AL_DriverInitBswM<a class="headerlink" href="#ecum-al-driverinitbswm" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_AL_DriverInitBswM</span><span class="p">(</span><span class="n">uint8</span> <span class="n">drvInitIdx</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback shall provide BSW module initializations to be called by the BSW Mode Manager.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>drvInitIdx</p></td>
<td><p>Index of the driver to initialize.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-errorhook">
<h4>EcuM_ErrorHook<a class="headerlink" href="#ecum-errorhook" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_ErrorHook</span><span class="p">(</span><span class="n">uint16</span> <span class="n">reason</span><span class="p">)</span>
</pre></div>
</div>
<p>The ECU State Manager will call the error hook if the error codes “ECUM_E_RAM_CHECK_FAILED” or “ECUM_E_CONFIGURATION_DATA_INCONSISTENT” occur. In this situation it is not possible to continue processing and the ECU must be stopped. The integrator may choose the modality how the ECU is stopped, i.e. reset, halt, restart, safe state etc.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>reason</p></td>
<td><p>Reason for calling the error hook (e.g., “ECUM_E_RAM_CHECK_FAILED” or “ECUM_E_CONFIGURATION_DATA_INCONSISTENT”).</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-al-setprogrammableinterrupts">
<h4>EcuM_AL_SetProgrammableInterrupts<a class="headerlink" href="#ecum-al-setprogrammableinterrupts" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_AL_SetProgrammableInterrupts</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>If the configuration parameter EcuMSetProgrammableInterrupts is set to true, this callout EcuM_AL_SetProgrammableInterrupts is executed and shall set the interrupts on ECUs with programmable interrupts.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-al-driverinitzero">
<h4>EcuM_AL_DriverInitZero<a class="headerlink" href="#ecum-al-driverinitzero" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_AL_DriverInitZero</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout shall provide driver initialization and other hardware-related startup activities for loading the post-build configuration data. Beware: Here only pre-compile and link-time configurable modules may be used.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-determinepbconfiguration">
<h4>EcuM_DeterminePbConfiguration<a class="headerlink" href="#ecum-determinepbconfiguration" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">EcuM_ConfigType</span> <span class="o">*</span> <span class="n">EcuM_DeterminePbConfiguration</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout should evaluate some condition, like port pin or NVRAM value, to determine which post-build configuration shall be used in the remainder of the startup process. It shall load this configuration data into a piece of memory that is accessible by all BSW modules and shall return a pointer to the EcuM post-build configuration as a base for all BSW module post-build configurations.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>const</p>
</dd>
</dl>
</section>
<section id="ecum-al-driverinitone">
<h4>EcuM_AL_DriverInitOne<a class="headerlink" href="#ecum-al-driverinitone" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_AL_DriverInitOne</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout shall provide driver initialization and other hardware-related startup activities in case of a power on reset.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-loopdetection">
<h4>EcuM_LoopDetection<a class="headerlink" href="#ecum-loopdetection" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">boolean</span> <span class="n">EcuM_LoopDetection</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>If the configuration parameter EcuMResetLoopDetection is set to true, this callout EcuM_LoopDetection is called on every startup.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>boolean</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FALSE</p></td>
<td><p>No reset loop is detected</p></td>
</tr>
<tr class="row-odd"><td><p>TRUE</p></td>
<td><p>Reset loop is detected</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-ongooffone">
<h4>EcuM_OnGoOffOne<a class="headerlink" href="#ecum-ongooffone" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_OnGoOffOne</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This call allows the system designer to notify that the GO OFF I state is about to be entered.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-ongoofftwo">
<h4>EcuM_OnGoOffTwo<a class="headerlink" href="#ecum-ongoofftwo" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_OnGoOffTwo</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This call allows the system designer to notify that the GO OFF II state is about to be entered.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-al-switchoff">
<h4>EcuM_AL_SwitchOff<a class="headerlink" href="#ecum-al-switchoff" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_AL_SwitchOff</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout shall take the code for shutting off the power supply of the ECU. If the ECU cannot unpower itself, a reset may be an adequate reaction.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-al-reset">
<h4>EcuM_AL_Reset<a class="headerlink" href="#ecum-al-reset" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_AL_Reset</span><span class="p">(</span><span class="n">EcuM_ResetType</span> <span class="n">reset</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout shall take the code for resetting the ECU.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>reset</p></td>
<td><p>Type of reset to be performed.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-enablewakeupsources">
<h4>EcuM_EnableWakeupSources<a class="headerlink" href="#ecum-enablewakeupsources" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_EnableWakeupSources</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">wakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>The ECU Manager Module calls EcuM_EnableWakeupSource to allow the system designer to notify wakeup sources defined in the wakeupSource bitfield that SLEEP will be entered and to adjust their source accordingly.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>wakeupSource</p></td>
<td><p>Bitfield defining the wakeup sources.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-generateramhash">
<h4>EcuM_GenerateRamHash<a class="headerlink" href="#ecum-generateramhash" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_GenerateRamHash</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Generate code for RAM integrity test.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-sleepactivity">
<h4>EcuM_SleepActivity<a class="headerlink" href="#ecum-sleepactivity" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_SleepActivity</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout is invoked periodically in all reduced clock sleep modes.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-startcheckwakeup">
<h4>EcuM_StartCheckWakeup<a class="headerlink" href="#ecum-startcheckwakeup" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_StartCheckWakeup</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">WakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>This API is called by the ECU Firmware to start the CheckWakeupTimer for the corresponding wakeupSource. If EcuMCheckWakeupTimeout &gt; 0, the CheckWakeupTimer for the wakeupSource is started. If EcuMCheckWakeupTimeout &lt;= 0, the API call is ignored by the EcuM.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>WakeupSource</p></td>
<td><p>For this wakeup source, the corresponding CheckWakeupTimer shall be started.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-checkramhash">
<h4>EcuM_CheckRamHash<a class="headerlink" href="#ecum-checkramhash" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint8</span> <span class="n">EcuM_CheckRamHash</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout is intended to provide a RAM integrity test. The goal of this test is to ensure that after a long SLEEP duration, RAM contents are still consistent. The check does not need to be exhaustive since this would consume quite some processing time during wakeups. A well-designed check will execute quickly and detect RAM integrity defects with a sufficient probability. The areas of RAM which will be checked have to be chosen carefully. It depends on the check algorithm itself and the task structure. Stack contents of the task executing the RAM check, for example, very likely cannot be checked. It is good practice to have the hash generation and checking in the same task and that this task is not preemptible and that there is only little activity between hash generation and hash check. The RAM check itself is provided by the system designer. In case of applied multi-core and the existence of Satellite-EcuM(s), this API will be called by the Master-EcuM only.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>uint8</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>RAM integrity test failed</p></td>
</tr>
<tr class="row-odd"><td><p>non-zero</p></td>
<td><p>RAM integrity test passed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecum-disablewakeupsources">
<h4>EcuM_DisableWakeupSources<a class="headerlink" href="#ecum-disablewakeupsources" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_DisableWakeupSources</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">wakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>The ECU Manager Module calls EcuM_DisableWakeupSources to set the wakeup source(s) defined in the wakeupSource bitfield so that they are not able to wake the ECU up.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>wakeupSource</p></td>
<td><p>Bitfield defining the wakeup sources to be disabled.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-al-driverrestart">
<h4>EcuM_AL_DriverRestart<a class="headerlink" href="#ecum-al-driverrestart" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_AL_DriverRestart</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout shall provide driver initialization and other hardware-related startup activities in the wakeup case.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-startwakeupsources">
<h4>EcuM_StartWakeupSources<a class="headerlink" href="#ecum-startwakeupsources" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_StartWakeupSources</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">wakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>The callout shall start the given wakeup source(s) so that they are ready to perform wakeup validation.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>FANon ReentrantLSE</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>wakeupSource</p></td>
<td><p>Bitfield defining the wakeup sources to be started.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-checkvalidation">
<h4>EcuM_CheckValidation<a class="headerlink" href="#ecum-checkvalidation" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_CheckValidation</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">wakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout is called by the EcuM to validate a wakeup source. If a valid wakeup has been detected, it shall be reported to EcuM via</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>wakeupSource</p></td>
<td><p>Bitfield defining the wakeup source to be validated.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-stopwakeupsources">
<h4>EcuM_StopWakeupSources<a class="headerlink" href="#ecum-stopwakeupsources" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_StopWakeupSources</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">wakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>The callout shall stop the given wakeup source(s) after unsuccessful wakeup validation.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>wakeupSource</p></td>
<td><p>Bitfield defining the wakeup sources to be stopped.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-checkwakeuphook">
<h4>EcuM_CheckWakeupHook<a class="headerlink" href="#ecum-checkwakeuphook" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_CheckWakeupHook</span><span class="p">(</span><span class="n">EcuM_WakeupSourceType</span> <span class="n">wakeupSource</span><span class="p">)</span>
</pre></div>
</div>
<p>This callout is called by the EcuM to poll a wakeup source. It shall also be called by the ISR of a wakeup source to set up the PLL and check other wakeup sources that may be connected to the same interrupt.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>wakeupSource</p></td>
<td><p>Bitfield defining the wakeup source to be polled.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-mcusetmode">
<h4>EcuM_McuSetMode<a class="headerlink" href="#ecum-mcusetmode" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EcuM_McuSetMode</span><span class="p">(</span><span class="n">Mcu_ModeType</span> <span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
<p>This function calls Mcu_SetMode as a callback validation.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>mode</p></td>
<td><p>Mcu Mode number as configured in the configuration set</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ecum-currenttimestampms">
<h4>EcuM_CurrentTimestampMS<a class="headerlink" href="#ecum-currenttimestampms" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint32</span> <span class="n">EcuM_CurrentTimestampMS</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This function retrieves the current timestamp in milliseconds.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>uint32</p>
</dd>
</dl>
</section>
<section id="ecum-calculateelapsedms">
<h4>EcuM_CalculateElapsedMS<a class="headerlink" href="#ecum-calculateelapsedms" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint32</span> <span class="n">EcuM_CalculateElapsedMS</span><span class="p">(</span><span class="n">uint32</span> <span class="n">OldCurMs</span><span class="p">)</span>
</pre></div>
</div>
<p>This function calculates the elapsed time in milliseconds based on the provided old timestamp.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>OldCurMs</p></td>
<td><p>Old timestamp value for calculating elapsed time.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>uint32</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="configuration">
<h2>配置(Configuration)<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<section id="initialization-of-other-module-configurations">
<h3>初始化其他模块配置(Initialization of Other Module Configurations)<a class="headerlink" href="#initialization-of-other-module-configurations" title="Link to this heading">¶</a></h3>
<p>EcuM初始化其他模块分为三种 EcuMDriverInitListOne, EcuMDriverInitListZero, EcuMDriverInitListBswM,
前两个是对Mcu以及Mcal以及Det和Dem的初始化，在EcuM初始化时就会被执行，后一个对基础软件的初始化，由BswM模块完成。</p>
<p>EcuM initializes other modules in three types: EcuMDriverInitListOne, EcuMDriverInitListZero, and EcuMDriverInitListBswM. The first two initialize MCU, MCAL, Det, and Dem, executed during EcuM initialization. The last one initializes basic software, completed by the BswM module.</p>
<p>初始化内容通过配置EcuMDriverInitItem来指定，具体配置说明如下表：</p>
<p>Initialization content is specified by configuring EcuMDriverInitItem. Specific configuration descriptions are shown in the following table:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>UI名称 (UI Names)</p></th>
<th class="head"><p>使用说明 (Instructions for Use)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EcuMModuleParameter</p></td>
<td><p>配置参数类型， VOID无参数，NULL_PTR传入空指针，POSTBUILD_PTR传对应模块的配置参数指针 (Configuration parameter type. VOID: no parameter, NULL_PTR: pass null pointer, POSTBUILD_PTR: pass configuration parameter pointer of corresponding module)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuMModuleService</p></td>
<td><p>指定调用的函数， 例如： Init, PreInit, Start 等函数。 (Specify function to call, e.g.: Init, PreInit, Start, etc.)</p></td>
</tr>
<tr class="row-even"><td><p>EditModuleService</p></td>
<td><p>使能是否可以手动修改配置EcuMModuleService，由用户手动填入服务函数名称。 (Enable manual modification of EcuMModuleService configuration, user manually enters service function name)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuMModulePbConfigName</p></td>
<td><p>配置当EcuMModuleParameter选择POSTBUILD_PTR时，对应模块的配置参数名称。 (Configure configuration parameter name of corresponding module when EcuMModuleParameter selects POSTBUILD_PTR)</p></td>
</tr>
<tr class="row-even"><td><p>EditPbConfigName</p></td>
<td><p>使能是否可以手动修改配置EcuMModulePbConfigName，由用户手动填入配置参数名称。 (Enable manual modification of EcuMModulePbConfigName configuration, user manually enters configuration parameter name)</p></td>
</tr>
<tr class="row-odd"><td><p>IncludeHeaderFile</p></td>
<td><p>配置包含的对应初始化模块的头文件。 (Configure header file of corresponding initialization module to be included)</p></td>
</tr>
<tr class="row-even"><td><p>EditHeaderFile</p></td>
<td><p>使能是否可以手动修改配置IncludeHeaderFile，由用户手动填入配置头文件名称。 (Enable manual modification of IncludeHeaderFile configuration, user manually enters configuration header file name)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuMEcucCoreDefinitionRef</p></td>
<td><p>在多核的情况下，配置需要在不同核上初始化的内容，如果一个容器中存在该配置，那么该容器其他的EcuMDriverInitItem都需要配置该项。 (In multi-core case, configure content to be initialized on different cores. If this configuration exists in a container, other EcuMDriverInitItems in the container must also configure this item)</p></td>
</tr>
<tr class="row-even"><td><p>EcuMModuleRef</p></td>
<td><p>在当前工程下配置需要EcuM初始化的模块。 (Configure modules requiring EcuM initialization in current project)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sleep-wake-up-configuration">
<h3>休眠唤醒配置 Sleep/Wake-up(Configuration)<a class="headerlink" href="#sleep-wake-up-configuration" title="Link to this heading">¶</a></h3>
<section id="sleep-configuration">
<h4>休眠配置(Sleep Configuration)<a class="headerlink" href="#sleep-configuration" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><p>首先配置默认的下电方式，有三种方式： EcuMShutdownTargetOff、EcuMShutdownTargetReset、EcuMShutdownTargetSleep；当配置为EcuMShutdownTargetReset或EcuMShutdownTargetSleep时，就需要配置复位模式或者睡眠模式。具体配置如下图：</p>
<p>First configure the default power-off mode. There are three modes: EcuMShutdownTargetOff, EcuMShutdownTargetReset, and EcuMShutdownTargetSleep. When configured as EcuMShutdownTargetReset or EcuMShutdownTargetSleep, reset mode or sleep mode must be configured. Specific configuration is shown below:</p>
<figure class="align-center" id="fig-ecum10">
<img alt="默认睡眠配置 (Default Sleep Configuration)" src="../../../_images/DefaultSleepConfig.png" />
<figcaption>
<p><span class="caption-text">Default Sleep Config</span><a class="headerlink" href="#fig-ecum10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><p>配置休眠模式，通过EcuMSleepModeSuspend配置决定是Halt还是Poll, 配置EcuMSleepModeMcuModeRef选择控制Mcu的模式， 配置EcuMWakeupSourceMask选择在该sleep模式下唤醒的源。具体配置如下图：</p>
<p>Configure sleep mode. Determine Halt or Poll via EcuMSleepModeSuspend configuration. Configure EcuMSleepModeMcuModeRef to select MCU control mode. Configure EcuMWakeupSourceMask to select wake-up sources in this sleep mode. Specific configuration is shown below:</p>
<figure class="align-center" id="fig-ecum11">
<img alt="睡眠模式配置 (Sleep Mode Configuration)" src="../../../_images/SleepModeConfig.png" />
<figcaption>
<p><span class="caption-text">Sleep Mode Config</span><a class="headerlink" href="#fig-ecum11" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><p>配置复位模式，只需要配置EcuMResetModeId即可，具体配置如下图：</p>
<p>Configure reset mode. Only need to configure EcuMResetModeId. Specific configuration is shown below:</p>
<figure class="align-center" id="fig-ecum12">
<img alt="复位模式配置(Reset Mode Configuration)" src="../../../_images/ResetModeConfig.png" />
<figcaption>
<p><span class="caption-text">Reset Mode Config</span><a class="headerlink" href="#fig-ecum12" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
</ol>
</section>
<section id="wake-up-configuration">
<h4>唤醒配置 Wake-up(Configuration)<a class="headerlink" href="#wake-up-configuration" title="Link to this heading">¶</a></h4>
<p>通过配置EcuMWakeupSource来配置EcuM唤醒源，具体配置如下图：</p>
<p>Configure EcuM wake-up sources by configuring EcuMWakeupSource. Specific configuration is shown below:</p>
<figure class="align-center" id="fig-ecum13">
<img alt="唤醒源配置 (Wake-up Source Configuration)" src="../../../_images/WakeupSourceConfig.png" />
<figcaption>
<p><span class="caption-text">Wakeup Source Config</span><a class="headerlink" href="#fig-ecum13" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>唤醒源配置说明如下表：</p>
<p>Wake-up source configuration descriptions are shown below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>UI名称 (UI Name)</p></th>
<th class="head"><p>使用说明 (Instructions for Use)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EcuMCheckWakeupTimeout</p></td>
<td><p>用于配置唤醒源的检测超时时间，单位为s，默认为0，表示不检测超时 (Used to configure wake-up source detection timeout in seconds, default 0 means no timeout detection)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuMValidationTimeout</p></td>
<td><p>用于配置唤醒源的有效验证超时时间，单位为s，默认为0，表示不检测超时 (Used to configure wake-up source validation timeout in seconds, default 0 means no timeout detection)</p></td>
</tr>
<tr class="row-even"><td><p>EcuMWakeupSourceId</p></td>
<td><p>用户可配置的唤醒源ID，从5起开始配置 (User-configurable wake-up source ID, starting from 5)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuMWakeupSourcePolling</p></td>
<td><p>当此EcuMWakeupSource被EcuMSleepMode-&gt;EcuMWakeupSourceMask引用，且EcuMSleepMode-&gt;EcuMSleepModeSuspend配置为FALSE(POLL模式)，则此项EcuMWakeupSourcePolling应该配置为TRUE，表示以轮询的方式检测唤醒源 (When this EcuMWakeupSource is referenced by EcuMSleepMode-&gt;EcuMWakeupSourceMask and EcuMSleepMode-&gt;EcuMSleepModeSuspend is configured as FALSE (POLL mode), this EcuMWakeupSourcePolling should be configured as TRUE, indicating wake-up source detection via polling)</p></td>
</tr>
<tr class="row-even"><td><p>EcuMComMChannelRef</p></td>
<td><p>当配置此项后，当唤醒源检测到后，会调用ComM_EcuM_WakeUpIndication通知EcuMComMChannelRef引用的ComMChannel (When configured, ComM_EcuM_WakeUpIndication is called to notify ComMChannel referenced by EcuMComMChannelRef when wake-up source is detected)</p></td>
</tr>
<tr class="row-odd"><td><p>EcuMComMPNCRef</p></td>
<td><p>当配置此项后，当唤醒源检测到后，会调用ComM_EcuM_PNCWakeUpIndication通知EcuMComMPNCRef引用的ComMPnc (When configured, ComM_EcuM_PNCWakeUpIndication is called to notify ComMPnc referenced by EcuMComMPNCRef when wake-up source is detected)</p></td>
</tr>
<tr class="row-even"><td><p>EcuMResetReasonRef</p></td>
<td><p>MCU 驱动程序检测到的复位原因到唤醒源的映射 (Mapping from reset reason detected by MCU driver to wake-up source)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="multi-core-configuration">
<h3>多核配置 Multi-core(Configuration)<a class="headerlink" href="#multi-core-configuration" title="Link to this heading">¶</a></h3>
<p>系统是属于多核时，需要通过配置EcuMPartitionRef将EcuM也配置成多核，该配置引用的是分区配置，
只能选择每个核中的一个分区来关联。然后需要配置互斥锁供EcuM使用，具体配置如下图：</p>
<p>When the system is multi-core, EcuM must be configured as multi-core by configuring EcuMPartitionRef. This configuration references partition configuration, and only one partition per core can be selected for association. Then a mutex must be configured for EcuM use. Specific configuration is shown below:</p>
<figure class="align-center" id="fig-ecum14">
<img alt="多核配置(Multi-core Configuration)" src="../../../_images/PartitionConfig.png" />
<figcaption>
<p><span class="caption-text">Partition Config</span><a class="headerlink" href="#fig-ecum14" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="../E2E/E2E.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>E2E
    </a>
    <a class="float-right" href="../Ea/Ea.html" title="Next">
        Ea <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">EcuM</a><ul>
<li><a class="reference internal" href="#document-information">文档信息(Document Information)</a><ul>
<li><a class="reference internal" href="#version-history">版本历史(Version History)</a></li>
<li><a class="reference internal" href="#references">参考文档(References)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terms-and-abbreviations">术语与简写(Terms and Abbreviations)</a><ul>
<li><a class="reference internal" href="#terms">术语(Terms)</a></li>
<li><a class="reference internal" href="#abbreviations">简写(Abbreviations)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#introduction">简介(Introduction)</a></li>
<li><a class="reference internal" href="#functional-description">功能描述(Functional Description)</a><ul>
<li><a class="reference internal" href="#module-initialization-function">模块初始化功能(Module Initialization Function)</a><ul>
<li><a class="reference internal" href="#introduction-to-module-initialization-function">模块初始化功能介绍(Introduction to Module Initialization Function)</a></li>
<li><a class="reference internal" href="#integration-of-module-initialization-function">模块初始化功能集成(Integration of Module Initialization Function)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sleep-wake-up-function">睡眠唤醒功能 Sleep/Wake-up(Function)</a><ul>
<li><a class="reference internal" href="#introduction-to-sleep-wake-up-function">睡眠唤醒功能介绍 Introduction to Sleep/Wake-up(Function)</a><ul>
<li><a class="reference internal" href="#sleep-phase">Sleep(Phase)</a></li>
<li><a class="reference internal" href="#shutdown-phase">Shutdown(Phase)</a></li>
<li><a class="reference internal" href="#wake-up-and-verification-process">唤醒以及验证流程 Wake-up and(Verification Process)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementation-of-sleep-wake-up-function">睡眠唤醒功能实现 Implementation of Sleep/Wake-up(Function)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-core">多核 Multi-core</a></li>
<li><a class="reference internal" href="#ecum-ecum-mode-handling">EcuM 模式处理(EcuM Mode Handling)</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#integration">集成(Integration)</a><ul>
<li><a class="reference internal" href="#file-list">文件列表(File List)</a><ul>
<li><a class="reference internal" href="#static-files">静态文件(Static Files)</a></li>
<li><a class="reference internal" href="#dynamic-files">动态文件(Dynamic Files)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling">错误处理(Error Handling)</a><ul>
<li><a class="reference internal" href="#development-errors">开发错误(Development Errors)</a></li>
<li><a class="reference internal" href="#runtime-errors">运行时错误(Runtime ErrorS)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#interface-description">接口描述(Interface Description)</a><ul>
<li><a class="reference internal" href="#type-definitions">类型定义(Type Definitions)</a></li>
<li><a class="reference internal" href="#services">提供的服务(Services)</a><ul>
<li><a class="reference internal" href="#ecum-getversioninfo">EcuM_GetVersionInfo</a></li>
<li><a class="reference internal" href="#ecum-godownhaltpoll">EcuM_GoDownHaltPoll</a></li>
<li><a class="reference internal" href="#ecum-init">EcuM_Init</a></li>
<li><a class="reference internal" href="#ecum-startuptwo">EcuM_StartupTwo</a></li>
<li><a class="reference internal" href="#ecum-shutdown">EcuM_Shutdown</a></li>
<li><a class="reference internal" href="#ecum-setstate">EcuM_SetState</a></li>
<li><a class="reference internal" href="#ecum-requestrun">EcuM_RequestRUN</a></li>
<li><a class="reference internal" href="#ecum-releaserun">EcuM_ReleaseRUN</a></li>
<li><a class="reference internal" href="#ecum-requestpost-run">EcuM_RequestPOST_RUN</a></li>
<li><a class="reference internal" href="#ecum-releasepost-run">EcuM_ReleasePOST_RUN</a></li>
<li><a class="reference internal" href="#ecum-selectshutdowntarget">EcuM_SelectShutdownTarget</a></li>
<li><a class="reference internal" href="#ecum-getshutdowntarget">EcuM_GetShutdownTarget</a></li>
<li><a class="reference internal" href="#ecum-getlastshutdowntarget">EcuM_GetLastShutdownTarget</a></li>
<li><a class="reference internal" href="#ecum-selectshutdowncause">EcuM_SelectShutdownCause</a></li>
<li><a class="reference internal" href="#ecum-getshutdowncause">EcuM_GetShutdownCause</a></li>
<li><a class="reference internal" href="#ecum-getpendingwakeupevents">EcuM_GetPendingWakeupEvents</a></li>
<li><a class="reference internal" href="#ecum-clearwakeupevent">EcuM_ClearWakeupEvent</a></li>
<li><a class="reference internal" href="#ecum-getvalidatedwakeupevents">EcuM_GetValidatedWakeupEvents</a></li>
<li><a class="reference internal" href="#ecum-getexpiredwakeupevents">EcuM_GetExpiredWakeupEvents</a></li>
<li><a class="reference internal" href="#ecum-setrelwakeupalarm">EcuM_SetRelWakeupAlarm</a></li>
<li><a class="reference internal" href="#ecum-setabswakeupalarm">EcuM_SetAbsWakeupAlarm</a></li>
<li><a class="reference internal" href="#ecum-abortwakeupalarm">EcuM_AbortWakeupAlarm</a></li>
<li><a class="reference internal" href="#ecum-getcurrenttime">EcuM_GetCurrentTime</a></li>
<li><a class="reference internal" href="#ecum-getwakeuptime">EcuM_GetWakeupTime</a></li>
<li><a class="reference internal" href="#ecum-setclock">EcuM_SetClock</a></li>
<li><a class="reference internal" href="#ecum-selectboottarget">EcuM_SelectBootTarget</a></li>
<li><a class="reference internal" href="#ecum-getboottarget">EcuM_GetBootTarget</a></li>
<li><a class="reference internal" href="#ecum-setwakeupevent">EcuM_SetWakeupEvent</a></li>
<li><a class="reference internal" href="#ecum-validatewakeupevent">EcuM_ValidateWakeupEvent</a></li>
<li><a class="reference internal" href="#ecum-checkwakeup">EcuM_CheckWakeup</a></li>
<li><a class="reference internal" href="#ecum-al-driverinitbswm">EcuM_AL_DriverInitBswM</a></li>
<li><a class="reference internal" href="#ecum-errorhook">EcuM_ErrorHook</a></li>
<li><a class="reference internal" href="#ecum-al-setprogrammableinterrupts">EcuM_AL_SetProgrammableInterrupts</a></li>
<li><a class="reference internal" href="#ecum-al-driverinitzero">EcuM_AL_DriverInitZero</a></li>
<li><a class="reference internal" href="#ecum-determinepbconfiguration">EcuM_DeterminePbConfiguration</a></li>
<li><a class="reference internal" href="#ecum-al-driverinitone">EcuM_AL_DriverInitOne</a></li>
<li><a class="reference internal" href="#ecum-loopdetection">EcuM_LoopDetection</a></li>
<li><a class="reference internal" href="#ecum-ongooffone">EcuM_OnGoOffOne</a></li>
<li><a class="reference internal" href="#ecum-ongoofftwo">EcuM_OnGoOffTwo</a></li>
<li><a class="reference internal" href="#ecum-al-switchoff">EcuM_AL_SwitchOff</a></li>
<li><a class="reference internal" href="#ecum-al-reset">EcuM_AL_Reset</a></li>
<li><a class="reference internal" href="#ecum-enablewakeupsources">EcuM_EnableWakeupSources</a></li>
<li><a class="reference internal" href="#ecum-generateramhash">EcuM_GenerateRamHash</a></li>
<li><a class="reference internal" href="#ecum-sleepactivity">EcuM_SleepActivity</a></li>
<li><a class="reference internal" href="#ecum-startcheckwakeup">EcuM_StartCheckWakeup</a></li>
<li><a class="reference internal" href="#ecum-checkramhash">EcuM_CheckRamHash</a></li>
<li><a class="reference internal" href="#ecum-disablewakeupsources">EcuM_DisableWakeupSources</a></li>
<li><a class="reference internal" href="#ecum-al-driverrestart">EcuM_AL_DriverRestart</a></li>
<li><a class="reference internal" href="#ecum-startwakeupsources">EcuM_StartWakeupSources</a></li>
<li><a class="reference internal" href="#ecum-checkvalidation">EcuM_CheckValidation</a></li>
<li><a class="reference internal" href="#ecum-stopwakeupsources">EcuM_StopWakeupSources</a></li>
<li><a class="reference internal" href="#ecum-checkwakeuphook">EcuM_CheckWakeupHook</a></li>
<li><a class="reference internal" href="#ecum-mcusetmode">EcuM_McuSetMode</a></li>
<li><a class="reference internal" href="#ecum-currenttimestampms">EcuM_CurrentTimestampMS</a></li>
<li><a class="reference internal" href="#ecum-calculateelapsedms">EcuM_CalculateElapsedMS</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">配置(Configuration)</a><ul>
<li><a class="reference internal" href="#initialization-of-other-module-configurations">初始化其他模块配置(Initialization of Other Module Configurations)</a></li>
<li><a class="reference internal" href="#sleep-wake-up-configuration">休眠唤醒配置 Sleep/Wake-up(Configuration)</a><ul>
<li><a class="reference internal" href="#sleep-configuration">休眠配置(Sleep Configuration)</a></li>
<li><a class="reference internal" href="#wake-up-configuration">唤醒配置 Wake-up(Configuration)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-core-configuration">多核配置 Multi-core(Configuration)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>