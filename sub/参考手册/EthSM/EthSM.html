<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>EthSM &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
            <link rel="next" title="EthTrcv" href="../EthTrcv/EthTrcv.html" />
            <link rel="prev" title="EthIf" href="../EthIf/EthIf.html" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanSM/CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoIP/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EcuM/EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Os/Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StbM/StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">EthSM</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/EthSM/EthSM.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="ethsm">
<h1>EthSM<a class="headerlink" href="#ethsm" title="Link to this heading">¶</a></h1>
<section id="document-information">
<h2>文档信息 Document Information<a class="headerlink" href="#document-information" title="Link to this heading">¶</a></h2>
<section id="version-history">
<h3>版本历史 Version History<a class="headerlink" href="#version-history" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>日期(Date)</p></th>
<th class="head"><p>作者(Author)</p></th>
<th class="head"><p>版本(Version)</p></th>
<th class="head"><p>状态(Status)</p></th>
<th class="head"><p>说明(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2025/02/27</p></td>
<td><p>xiaojian.liang</p></td>
<td><p>V0.1</p></td>
<td><p>发布(Release)</p></td>
<td><p>首次发布(First release)</p></td>
</tr>
<tr class="row-odd"><td><p>2025/04/04</p></td>
<td><p>xiaojian.liang</p></td>
<td><p>V1.0</p></td>
<td><p>发布(Release)</p></td>
<td><p>正式发布(Official release)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="references">
<h3>参考文档 References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
<col style="width: 16.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>编号(Number)</p></th>
<th class="head"><p>分类(Classification)</p></th>
<th class="head"><p>标题(Title)</p></th>
<th class="head"><p>版本(Version)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_CP_SWS_EthernetStateManager.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="terms-and-abbreviations">
<h2>术语与简写 Terms and Abbreviations<a class="headerlink" href="#terms-and-abbreviations" title="Link to this heading">¶</a></h2>
<section id="terms">
<h3>术语 Terms<a class="headerlink" href="#terms" title="Link to this heading">¶</a></h3>
</section>
<section id="abbreviations">
<h3>简写 Abbreviations<a class="headerlink" href="#abbreviations" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>简写(Abbreviation)</p></th>
<th class="head"><p>全称(Full name)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>API</p></td>
<td><p>Application Programming Interface</p></td>
</tr>
<tr class="row-odd"><td><p>BswM</p></td>
<td><p>Basic Software Manager</p></td>
</tr>
<tr class="row-even"><td><p>DET</p></td>
<td><p>Default Error Tracer</p></td>
</tr>
<tr class="row-odd"><td><p>ComM</p></td>
<td><p>Communication Manager</p></td>
</tr>
<tr class="row-even"><td><p>DEM</p></td>
<td><p>Diagnostic Event Manager</p></td>
</tr>
<tr class="row-odd"><td><p>EcuM</p></td>
<td><p>ECU State Manager</p></td>
</tr>
<tr class="row-even"><td><p>Eth</p></td>
<td><p>Ethernet Controller</p></td>
</tr>
<tr class="row-odd"><td><p>EthTrcv</p></td>
<td><p>Ethernet Transceiver</p></td>
</tr>
<tr class="row-even"><td><p>EthSM</p></td>
<td><p>Ethernet State Manager</p></td>
</tr>
<tr class="row-odd"><td><p>EthIf</p></td>
<td><p>Ethernet Interface</p></td>
</tr>
<tr class="row-even"><td><p>SchM</p></td>
<td><p>BSW Scheduler</p></td>
</tr>
<tr class="row-odd"><td><p>SoAd</p></td>
<td><p>Socket Adapter</p></td>
</tr>
<tr class="row-even"><td><p>OA TC10</p></td>
<td><p>Open Alliance TC10 specification</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="introduction">
<h2>简介 Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>EthSM 模块提供一套抽象的接口给ComM用于打开和关闭以太网通信。</p>
<p>The EthSM module provides a set of abstract interfaces to ComM for enabling and disabling Ethernet communication.</p>
<figure class="align-center" id="id3">
<img alt="EthSM 在 AUTOSAR 中的位置 (Position of EthSM in AUTOSAR)" src="../../../_images/EthSM%E5%9C%A8AUTOSAR%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE.png" />
<figcaption>
<p><span class="caption-text">EthSM 在 AUTOSAR 中的位置 (Position of EthSM in AUTOSAR)</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="functional-description">
<h2>功能描述 Functional Description<a class="headerlink" href="#functional-description" title="Link to this heading">¶</a></h2>
<section id="features">
<h3>特性 Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h3>
<section id="ethernet-communication-state-management-function">
<h4>以太网通信状态管理功能 Ethernet Communication State Management Function<a class="headerlink" href="#ethernet-communication-state-management-function" title="Link to this heading">¶</a></h4>
<p>EthSM 提供接口给 ComM，用于接受来自 ComM 的通信模式请求。EthSM 根据 ComM 提供的参数，处理内部的网络模式状态机。根据状态机的迁移条件，调用 EthIf 和 TcpIp 的接口控制以太网控制器，收发器以及 TcpIp 协议栈来控制以太网通信的状态。并将当前的通信模式通过 ComM 和 BswM 的接口通知给ComM和BswM。</p>
<p>The EthSM provides interfaces to ComM for receiving communication mode requests from ComM. Based on the parameters provided by ComM, the EthSM processes the internal network mode state machine. According to the transition conditions of the state machine, it calls the interfaces of EthIf and TcpIp to control the Ethernet controller, transceiver, and TcpIp protocol stack, thereby controlling the state of Ethernet communication. It also notifies ComM and BswM of the current communication mode through the interfaces of ComM and BswM.</p>
<figure class="align-center" id="id4">
<img alt="EthSM 网络状态转换状态机 (EthSM Network State Transition State Machine)" src="../../../_images/EthSM_State_Machine_high_level.png" />
<figcaption>
<p><span class="caption-text">EthSM 网络状态转换状态机 (EthSM Network State Transition State Machine)</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>状态机包括以下几个状态：</p>
<p>The state machine includes the following states:</p>
<p>1.ETHSM_STATE_OFFLINE</p>
<p>2.ETHSM_STATE_WAIT_TRCVLINK</p>
<p>3.ETHSM_STATE_WAIT_ONLINE</p>
<p>4.ETHSM_STATE_ONLINE</p>
<p>5.ETHSM_STATE_ONHOLD</p>
<p>6.ETHSM_STATE_WAIT_OFFLINE</p>
<section id="state-transition-process">
<h5>状态迁移过程 State Transition Process<a class="headerlink" href="#state-transition-process" title="Link to this heading">¶</a></h5>
<p>初始化后 EthSM 处于 ETHSM_STATE_OFFLINE 状态。</p>
<p>After initialization, the EthSM is in the ETHSM_STATE_OFFLINE state.</p>
<p>当 EthSM_RequestComMode(COMM_FULL_COMMUNICATION) 被调用，EthSM 调用 EthIf_SetControllerMode(ETH_MODE_ACTIVE) 请求 EthIf 将以太网控制器设置为 ACTIVE模式，并调用 BswM_EthSM_CurrentState(ETHSM_STATE_WAIT_TRCVLINK) 通知 BswM 模块。之后 EthSM 从ETHSM_STATE_OFFLINE 迁移到 ETHSM_STATE_WAIT_TRCVLINK状态。</p>
<p>When EthSM_RequestComMode(COMM_FULL_COMMUNICATION) is called, the EthSM calls EthIf_SetControllerMode(ETH_MODE_ACTIVE) to request EthIf to set the Ethernet controller to the ACTIVE mode, and calls BswM_EthSM_CurrentState(ETHSM_STATE_WAIT_TRCVLINK) to notify the BswM module. Afterwards, the EthSM transitions from ETHSM_STATE_OFFLINE to the ETHSM_STATE_WAIT_TRCVLINK state.</p>
<p>当 EthSM_TrcvLinkStateChg(ETHTRCV_LINK_STATE_ACTIVE) 被调用，EthSM 从 ETHSM_STATE_WAIT_TRCVLINK 迁移到ETHSM_STATE_WAIT_ONLINE 状态。同时调用 TcpIp_RequestComMode(TCPIP_STATE_ONLINE) 请求将 TCPIP 模块将 TCPIP 协议栈设置到 ONLINE模式，并调用 BswM_EthSM_CurrentState(ETHSM_STATE_WAIT_ONLINE) 接口通知 BswM 模块。</p>
<p>When EthSM_TrcvLinkStateChg(ETHTRCV_LINK_STATE_ACTIVE) is called, the EthSM transitions from ETHSM_STATE_WAIT_TRCVLINK to the ETHSM_STATE_WAIT_ONLINE state. At the same time, it calls TcpIp_RequestComMode(TCPIP_STATE_ONLINE) to request the TCPIP module to set the TCPIP protocol stack to the ONLINE mode, and calls the BswM_EthSM_CurrentState(ETHSM_STATE_WAIT_ONLINE) interface to notify the BswM module.</p>
<p>当 EthSM_TcpIpModeIndication(TCPIP_STATE_ONLINE) 被调用，EthSM 从 ETHSM_STATE_WAIT_ONLINE 迁移到 ETHSM_STATE_ONLINE 模式，并调用 BswM_EthSM_CurrentState(ETHSM_STATE_ONLINE) 通知 BswM 模块，调用 ComM_BusSM_ModeIndication(COMM_FULL_COMMUNICATION) 通知 ComM 模块。</p>
<p>When EthSM_TcpIpModeIndication(TCPIP_STATE_ONLINE) is called, the EthSM transitions from ETHSM_STATE_WAIT_ONLINE to the ETHSM_STATE_ONLINE mode. It then calls BswM_EthSM_CurrentState(ETHSM_STATE_ONLINE) to notify the BswM module, and calls ComM_BusSM_ModeIndication(COMM_FULL_COMMUNICATION) to notify the ComM module.</p>
<p>当 EthSM_RequestComMode(COMM_NO_COMMUNICATION) 被调用，EthSM 调用TcpIp_RequestComMode(TCPIP_STATE_OFFLINE) 请求 TcpIp 模块将TCPIP 协议栈设置为 OFFLINE 模式，并调用 BswM_EthSM_CurrentState(ETHSM_STATE_WAIT_OFFLINE) 通知 BswM 模块。之后 EthSM 从ETHSM_STATE_ONLINE 迁移到 ETHSM_STATE_WAIT_OFFLINE 状态。</p>
<p>When EthSM_RequestComMode(COMM_NO_COMMUNICATION) is called, the EthSM calls TcpIp_RequestComMode(TCPIP_STATE_OFFLINE) to request the TcpIp module to set the TCPIP protocol stack to the OFFLINE mode, and calls BswM_EthSM_CurrentState(ETHSM_STATE_WAIT_OFFLINE) to notify the BswM module. Afterwards, the EthSM transitions from ETHSM_STATE_ONLINE to the ETHSM_STATE_WAIT_OFFLINE state.</p>
<p>当 EthSM_TcpIpModeIndication(TCPIP_STATE_OFFLINE) 被调用，EthSM 从 ETHSM_STATE_WAIT_OFFLINE 迁移到 ETHSM_STATE_OFFLINE 状态。。并调用 EthIf_SetControllerMode(ETH_MODE_DOWN) 请求EthIf将以太网控制器设置为 DOWN 模式，并调用 BswM_EthSM_CurrentState(ETHSM_STATE_OFFLINE) 通知 BswM 模块，调用 ComM_BusSM_ModeIndication(COMM_NO_COMMUNICATION) 通知 ComM 模块。</p>
<p>When EthSM_TcpIpModeIndication(TCPIP_STATE_OFFLINE) is called, the EthSM transitions from ETHSM_STATE_WAIT_OFFLINE to the ETHSM_STATE_OFFLINE state . It then calls EthIf_SetControllerMode(ETH_MODE_DOWN) to request EthIf to set the Ethernet controller to the DOWN mode, calls BswM_EthSM_CurrentState(ETHSM_STATE_OFFLINE) to notify the BswM module, and calls ComM_BusSM_ModeIndication(COMM_NO_COMMUNICATION) to notify the ComM module.</p>
</section>
<section id="state-comparison-table">
<h5>状态对照表 State Comparison Table<a class="headerlink" href="#state-comparison-table" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Requested ComM Mode</p></th>
<th class="head"><p>EthSM sub state</p></th>
<th class="head"><p>Controller state</p></th>
<th class="head"><p>Transceiver state</p></th>
<th class="head"><p>Transceiver link state</p></th>
<th class="head"><p>TcpIpCtrl state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>No Com</p></td>
<td><p>ETHSM_STATE_OFFLINE</p></td>
<td><p>DOWN</p></td>
<td><p>DOWN</p></td>
<td><p>DOWN</p></td>
<td><p>OFFLINE</p></td>
</tr>
<tr class="row-odd"><td><p>No Com</p></td>
<td><p>ETHSM_STATE_WAIT_TRCVLINK</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>DOWN</p></td>
<td><p>OFFLINE</p></td>
</tr>
<tr class="row-even"><td><p>No Com</p></td>
<td><p>ETHSM_STATE_WAIT_ONLINE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>OFFLINE</p></td>
</tr>
<tr class="row-odd"><td><p>Full Com</p></td>
<td><p>ETHSM_STATE_ONLINE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ONLINE</p></td>
</tr>
<tr class="row-even"><td><p>Full Com</p></td>
<td><p>ETHSM_STATE_ONHOLD</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>DOWN</p></td>
<td><p>ONLINE</p></td>
</tr>
<tr class="row-odd"><td><p>Silent Com</p></td>
<td><p>ETHSM_STATE_WAIT_OFFLINE</p></td>
<td><p>ACTIVE or ACTIVE_TX_OFFLINE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ONLINE</p></td>
</tr>
<tr class="row-even"><td><p>No Com</p></td>
<td><p>ETHSM_STATE_WAIT_OFFLINE</p></td>
<td><p>ACTIVE or ACTIVE_TX_OFFLINE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ACTIVE</p></td>
<td><p>ONLINE</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="deviation">
<h3>偏差 Deviation<a class="headerlink" href="#deviation" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
<section id="extension">
<h3>扩展 Extension<a class="headerlink" href="#extension" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
</section>
<section id="integration">
<h2>集成 Integration<a class="headerlink" href="#integration" title="Link to this heading">¶</a></h2>
<section id="file-list">
<h3>文件列表 File List<a class="headerlink" href="#file-list" title="Link to this heading">¶</a></h3>
<section id="static-files">
<h4>静态文件 Static Files<a class="headerlink" href="#static-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EthSM.h</p></td>
<td><p>EthSM 外部接口实现头文件(Header file for EthSM external interface implementation)</p></td>
</tr>
<tr class="row-odd"><td><p>EthSM_Internal.h</p></td>
<td><p>EthSM 内部实现头文件(Header file for EthSM internal implementation)</p></td>
</tr>
<tr class="row-even"><td><p>EthSM_TcpIp.h</p></td>
<td><p>EthSM 为 TcpIp 提供的回调函数实现头文件(Header file for callback function implementation provided by EthSM for TcpIp)</p></td>
</tr>
<tr class="row-odd"><td><p>EthSM.c</p></td>
<td><p>EthSM 实现源文件(Implementation source file of EthSM)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dynamic-files">
<h4>动态文件 Dynamic Files<a class="headerlink" href="#dynamic-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EthSM_Cfg.c</p></td>
<td><p>EthSM Pre-Compile 配置源文件(Pre-Compile configuration source file of EthSM)</p></td>
</tr>
<tr class="row-odd"><td><p>EthSM_Cfg.h</p></td>
<td><p>EthSM Pre-Compile 配置头文件(Pre-Compile configuration header file of EthSM)</p></td>
</tr>
<tr class="row-even"><td><p>EthSM_MemMap.h</p></td>
<td><p>EthSM 内存分布头文件(Memory mapping header file of EthSM)</p></td>
</tr>
<tr class="row-odd"><td><p>SchM_EthSM.h</p></td>
<td><p>EthSM 周期主函数头文件(Header file for cyclic main function of EthSM)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="error-handling">
<h3>错误处理 Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h3>
<section id="development-errors">
<h4>开发错误 Development Errors<a class="headerlink" href="#development-errors" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Value[hex]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ETHSM_E_INVALID_NETWORK_MODE</p></td>
<td><p>0x01</p></td>
<td><p>Invalid communication mode requested.</p></td>
</tr>
<tr class="row-odd"><td><p>ETHSM_E_UNINIT</p></td>
<td><p>0x02</p></td>
<td><p>EthSM module was not initialized.</p></td>
</tr>
<tr class="row-even"><td><p>ETHSM_E_PARAM_POINTER</p></td>
<td><p>0x03</p></td>
<td><p>Invalid pointer in parameter list.</p></td>
</tr>
<tr class="row-odd"><td><p>ETHSM_E_INVALID_NETWORK_HANDLE</p></td>
<td><p>0x04</p></td>
<td><p>Invalid parameter in parameter list.</p></td>
</tr>
<tr class="row-even"><td><p>ETHSM_E_INVALID_TCP_IP_MODE</p></td>
<td><p>0x05</p></td>
<td><p>Invalid TcpIp state.</p></td>
</tr>
<tr class="row-odd"><td><p>ETHSM_E_PARAM_CONTROLLER</p></td>
<td><p>0x07</p></td>
<td><p>Invalid parameter in parameter list.</p></td>
</tr>
<tr class="row-even"><td><p>ETHSM_E_INVALID_ETH_MODE</p></td>
<td><p>0x08</p></td>
<td><p>Invalid parameter in parameter list.</p></td>
</tr>
<tr class="row-odd"><td><p>ETHSM_E_INVALID_ETH_TRCV_LINK_STATE</p></td>
<td><p>0x09</p></td>
<td><p>Invalid parameter in parameter list.</p></td>
</tr>
<tr class="row-even"><td><p>ETHSM_E_INVALID_PARTITION_CONTEXT</p></td>
<td><p>0x0A</p></td>
<td><p>API service used on wrong partitions.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="product-errors">
<h4>产品错误 Product Errors<a class="headerlink" href="#product-errors" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 66.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ETHSM_E_LINK_DOWN</p></td>
<td><p>It shall be reported when the transceiver switches to “down” while communication has already been established and is requested because of communication request.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="runtime-errors">
<h4>运行时错误 Runtime Errors<a class="headerlink" href="#runtime-errors" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
</section>
</section>
<section id="interface-description">
<h2>接口描述 Interface Description<a class="headerlink" href="#interface-description" title="Link to this heading">¶</a></h2>
<section id="type-definitions">
<h3>类型定义 Type Definitions<a class="headerlink" href="#type-definitions" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EthSM_NetworkModeStateType</p></td>
<td><p>enum</p></td>
<td><p>This type shall define the states of the network mode state machine.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="services">
<h3>提供的服务 Services<a class="headerlink" href="#services" title="Link to this heading">¶</a></h3>
<section id="ethsm-init">
<h4>EthSM_Init<a class="headerlink" href="#ethsm-init" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EthSM_Init</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This function initialize the EthSM.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (Reentrant for different partitions. Non reentrant for the same partition.)</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ethsm-getversioninfo">
<h4>EthSM_GetVersionInfo<a class="headerlink" href="#ethsm-getversioninfo" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EthSM_GetVersionInfo</span><span class="p">(</span><span class="n">Std_VersionInfoType</span> <span class="o">*</span><span class="n">versioninfo</span><span class="p">)</span>
</pre></div>
</div>
<p>This service puts out the version information of this module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>versioninfo</p></td>
<td><p>Pointer where to put out the version information.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ethsm-requestcommode">
<h4>EthSM_RequestComMode<a class="headerlink" href="#ethsm-requestcommode" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EthSM_RequestComMode</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">NetworkHandle</span><span class="p">,</span> <span class="n">ComM_ModeType</span> <span class="n">ComM_Mode</span><span class="p">)</span>
</pre></div>
</div>
<p>Handles the communication mode and sets the Ethernet network active or passive.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Asynchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (only for different Ethernet controllers)</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>NetworkHandle</p></td>
<td><p>Handle of destinated communication network for request</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ComM_Mode</p></td>
<td><p>Requested communication mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Controller mode request has been accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Controller mode request has not been accepted</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ethsm-getcurrentcommode">
<h4>EthSM_GetCurrentComMode<a class="headerlink" href="#ethsm-getcurrentcommode" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">EthSM_GetCurrentComMode</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">NetworkHandle</span><span class="p">,</span> <span class="n">ComM_ModeType</span> <span class="o">*</span><span class="n">ComM_ModePtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This service shall put out the current communication mode of a Ethernet network.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>NetworkHandle</p></td>
<td><p>Network handle whose current communication mode shall be put out</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>ComM_ModePtr</p></td>
<td><p>Pointer where to put out the current communication mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Service accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Service denied</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ethsm-ctrlmodeindication">
<h4>EthSM_CtrlModeIndication<a class="headerlink" href="#ethsm-ctrlmodeindication" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EthSM_CtrlModeIndication</span><span class="p">(</span><span class="n">uint8</span> <span class="n">CtrlIdx</span><span class="p">,</span> <span class="n">Eth_ModeType</span> <span class="n">CtrlMode</span><span class="p">)</span>
</pre></div>
</div>
<p>Called when mode has been read out.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (only for different Ethernet controllers)</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>CtrlIdx</p></td>
<td><p>Ethernet Interface Controller whose mode has changed</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>CtrlMode</p></td>
<td><p>Notified Ethernet Interface Controller mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="ethsm-trcvlinkstatechg">
<h4>EthSM_TrcvLinkStateChg<a class="headerlink" href="#ethsm-trcvlinkstatechg" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EthSM_TrcvLinkStateChg</span><span class="p">(</span><span class="n">uint8</span> <span class="n">CtrlIdx</span><span class="p">,</span> <span class="n">EthTrcv_LinkStateType</span> <span class="n">TransceiverLinkState</span><span class="p">)</span>
</pre></div>
</div>
<p>This service is called by the Ethernet Interface to report a transceiver link state change.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous (only for different Ethernet controllers)</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>CtrlIdx</p></td>
<td><p>Index of the Ethernet controller within the context of the Ethernet Interface</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>TransceiverLinkState</p></td>
<td><p>Actual transceiver link state of the specific network handle</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
</section>
<section id="configuration-function">
<h3>配置函数 Configuration function<a class="headerlink" href="#configuration-function" title="Link to this heading">¶</a></h3>
<section id="ethsm-mainfunction">
<h4>EthSM_MainFunction<a class="headerlink" href="#ethsm-mainfunction" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EthSM_MainFunction</span><span class="o">&lt;</span><span class="n">EthSMNetwork</span><span class="o">.</span><span class="n">ShortName</span><span class="o">&gt;</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Cyclic Main Function which is called from the Scheduler.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
</section>
<section id="applicable-services">
<h3>依赖的服务 Applicable Services<a class="headerlink" href="#applicable-services" title="Link to this heading">¶</a></h3>
<section id="compulsory-interface">
<h4>强制接口 Compulsory interface<a class="headerlink" href="#compulsory-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BswM_EthSM_CurrentState</p></td>
<td><p>BswM_EthSM.h</p></td>
<td><p>Function called by EthSM to indicate its current state.</p></td>
</tr>
<tr class="row-odd"><td><p>ComM_BusSM_ModeIndication</p></td>
<td><p>ComM.h</p></td>
<td><p>Indication of the actual bus mode by the corresponding Bus State Manager.ComM shall propagate the indicated state to the users with means of the RTE and BswM.</p></td>
</tr>
<tr class="row-even"><td><p>EthIf_SetControllerMode</p></td>
<td><p>EthIf.h</p></td>
<td><p>Enables / disables the indexed controller.</p></td>
</tr>
<tr class="row-odd"><td><p>TcpIp_RequestComMode</p></td>
<td><p>TcpIp.h</p></td>
<td><p>By this API service the TCP/IP stack is requested to change the TcpIp state of the communication network identified by EthIf controller index.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="optional-interface">
<h4>可选接口 Optional Interface<a class="headerlink" href="#optional-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Det_ReportError</p></td>
<td><p>Det.h</p></td>
<td><p>Service to report development errors.</p></td>
</tr>
<tr class="row-odd"><td><p>Dem_SetEventStatus</p></td>
<td><p>Dem.h</p></td>
<td><p>Called by SW-Cs or BSW modules to report monitor status information to the Dem.BSW modules calling Dem_SetEventStatus can safely ignore the return value.This API will be available only if ({Dem/DemConfigSet/DemEventParameter/DemEventReportingType} == STANDARD_REPORTING)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration-interfaces">
<h4>配置接口 Configuration Interfaces<a class="headerlink" href="#configuration-interfaces" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
</section>
</section>
<section id="configuration">
<h2>配置 Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>1.配置建议以 <strong>功能</strong> 为导向，从 <strong>集成</strong> 的角度，挑重点，常用，典型配置举例讲解。示例中若需要依赖其他模块的配置，也可以截图描述，配置截图不局限于本模块。重点是功能导向，把一件事讲清楚</p>
<p>1.Configuration recommendations should be <strong>function-oriented</strong>, focusing on key, commonly used, and typical configurations from the <strong>integration</strong> perspective for explanation. If the example requires configuration of other modules, screenshots can also be used for description. Configuration screenshots are not limited to this module. The key is to be function-oriented and clarify a specific task clearly.</p>
<p>2.不必呈现所有容器，配置细节的属性，可能用户不太关心</p>
<p>2.It is not necessary to present all containers and attributes of configuration details, as users may not care about them.</p>
<p>3.配置项描述等信息，在工具界面上都能看到</p>
<p>3.Information such as configuration item descriptions can be seen on the tool interface.</p>
<section id="ethsmtcpipused">
<h3>EthSMTcpIpUsed<a class="headerlink" href="#ethsmtcpipused" title="Link to this heading">¶</a></h3>
<p>如果一个 <strong>EthSMNetwork</strong> 不使用 TcpIp 协议栈，则应将 <strong>EthSMTcpIpUsed</strong> 配置为 <strong>FALSE</strong>。</p>
<p>If an <strong>EthSMNetwork</strong> does not use the TcpIp protocol stack, <strong>EthSMTcpIpUsed</strong> shall be configured as <strong>FALSE</strong>.</p>
<figure class="align-center" id="id1">
<img alt="../../../_images/EthSMTcpIpUsed.png" src="../../../_images/EthSMTcpIpUsed.png" />
<figcaption>
<p><span class="caption-text">EthSMTcpIpUsed</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="ethsmforwardsilentcommunicationenabled">
<h3>EthSMForwardSilentCommunicationEnabled<a class="headerlink" href="#ethsmforwardsilentcommunicationenabled" title="Link to this heading">¶</a></h3>
<p>如果一个 <strong>EthSMNetwork</strong> 的 <strong>EthSMForwardSilentCommunicationEnabled</strong> 配置为 <strong>TRUE</strong>，当 <strong>EthSM_RequestComMode(COMM_SILENT_COMMUNICATION)</strong> 被 ComM 调用，EthSM 将控制 EthIf 控制器进入 <strong>ETH_MODE_ACTIVE_TX_OFFLINE</strong> 模式，这将禁用此以太网通道上的发送功能。此功能通常在使用 <strong>UdpNm</strong> 的以太网通道上使能。</p>
<p>If <strong>EthSMForwardSilentCommunicationEnabled</strong> of an <strong>EthSMNetwork</strong> is configured as <strong>TRUE</strong>, when <strong>EthSM_RequestComMode(COMM_SILENT_COMMUNICATION)</strong> is called by ComM, the EthSM will control the EthIf controller to enter the <strong>ETH_MODE_ACTIVE_TX_OFFLINE</strong> mode, which will disable the transmission function on this Ethernet channel. This function is usually enabled on Ethernet channels using <strong>UdpNm</strong>.</p>
<figure class="align-center" id="id2">
<img alt="../../../_images/EthSMForwardSilentCommunicationEnabled.png" src="../../../_images/EthSMForwardSilentCommunicationEnabled.png" />
<figcaption>
<p><span class="caption-text">EthSMForwardSilentCommunicationEnabled</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="critical-sections">
<h3>临界区 Critical Sections<a class="headerlink" href="#critical-sections" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="../EthIf/EthIf.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>EthIf
    </a>
    <a class="float-right" href="../EthTrcv/EthTrcv.html" title="Next">
        EthTrcv <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">EthSM</a><ul>
<li><a class="reference internal" href="#document-information">文档信息 Document Information</a><ul>
<li><a class="reference internal" href="#version-history">版本历史 Version History</a></li>
<li><a class="reference internal" href="#references">参考文档 References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terms-and-abbreviations">术语与简写 Terms and Abbreviations</a><ul>
<li><a class="reference internal" href="#terms">术语 Terms</a></li>
<li><a class="reference internal" href="#abbreviations">简写 Abbreviations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#introduction">简介 Introduction</a></li>
<li><a class="reference internal" href="#functional-description">功能描述 Functional Description</a><ul>
<li><a class="reference internal" href="#features">特性 Features</a><ul>
<li><a class="reference internal" href="#ethernet-communication-state-management-function">以太网通信状态管理功能 Ethernet Communication State Management Function</a><ul>
<li><a class="reference internal" href="#state-transition-process">状态迁移过程 State Transition Process</a></li>
<li><a class="reference internal" href="#state-comparison-table">状态对照表 State Comparison Table</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#deviation">偏差 Deviation</a></li>
<li><a class="reference internal" href="#extension">扩展 Extension</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integration">集成 Integration</a><ul>
<li><a class="reference internal" href="#file-list">文件列表 File List</a><ul>
<li><a class="reference internal" href="#static-files">静态文件 Static Files</a></li>
<li><a class="reference internal" href="#dynamic-files">动态文件 Dynamic Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling">错误处理 Error Handling</a><ul>
<li><a class="reference internal" href="#development-errors">开发错误 Development Errors</a></li>
<li><a class="reference internal" href="#product-errors">产品错误 Product Errors</a></li>
<li><a class="reference internal" href="#runtime-errors">运行时错误 Runtime Errors</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#interface-description">接口描述 Interface Description</a><ul>
<li><a class="reference internal" href="#type-definitions">类型定义 Type Definitions</a></li>
<li><a class="reference internal" href="#services">提供的服务 Services</a><ul>
<li><a class="reference internal" href="#ethsm-init">EthSM_Init</a></li>
<li><a class="reference internal" href="#ethsm-getversioninfo">EthSM_GetVersionInfo</a></li>
<li><a class="reference internal" href="#ethsm-requestcommode">EthSM_RequestComMode</a></li>
<li><a class="reference internal" href="#ethsm-getcurrentcommode">EthSM_GetCurrentComMode</a></li>
<li><a class="reference internal" href="#ethsm-ctrlmodeindication">EthSM_CtrlModeIndication</a></li>
<li><a class="reference internal" href="#ethsm-trcvlinkstatechg">EthSM_TrcvLinkStateChg</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-function">配置函数 Configuration function</a><ul>
<li><a class="reference internal" href="#ethsm-mainfunction">EthSM_MainFunction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#applicable-services">依赖的服务 Applicable Services</a><ul>
<li><a class="reference internal" href="#compulsory-interface">强制接口 Compulsory interface</a></li>
<li><a class="reference internal" href="#optional-interface">可选接口 Optional Interface</a></li>
<li><a class="reference internal" href="#configuration-interfaces">配置接口 Configuration Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">配置 Configuration</a><ul>
<li><a class="reference internal" href="#ethsmtcpipused">EthSMTcpIpUsed</a></li>
<li><a class="reference internal" href="#ethsmforwardsilentcommunicationenabled">EthSMForwardSilentCommunicationEnabled</a></li>
<li><a class="reference internal" href="#critical-sections">临界区 Critical Sections</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>