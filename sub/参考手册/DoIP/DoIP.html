<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>DoIP &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
            <link rel="next" title="E2E" href="../E2E/E2E.html" />
            <link rel="prev" title="Dlt" href="../Dlt/Dlt.html" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanSM/CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EcuM/EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSM/EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Os/Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StbM/StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">DoIP</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/DoIP/DoIP.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="doip">
<h1>DoIP<a class="headerlink" href="#doip" title="Link to this heading">¶</a></h1>
<section id="document-information">
<h2>文档信息 Document Information<a class="headerlink" href="#document-information" title="Link to this heading">¶</a></h2>
<section id="version-history">
<h3>版本历史 Version History<a class="headerlink" href="#version-history" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>日期(Date)</p></th>
<th class="head"><p>作者(Author)</p></th>
<th class="head"><p>版本(Version)</p></th>
<th class="head"><p>状态(Status)</p></th>
<th class="head"><p>说明(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2025/03/20</p></td>
<td><p>hao.wen</p></td>
<td><p>V0.1</p></td>
<td><p>发布(Release)</p></td>
<td><p>首次发布(First release)</p></td>
</tr>
<tr class="row-odd"><td><p>2025/04/04</p></td>
<td><p>hao.wen</p></td>
<td><p>V1.0</p></td>
<td><p>发布(Release)</p></td>
<td><p>正式发布(Official release)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="references">
<h3>参考文档 References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
<col style="width: 16.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>编号(Number)</p></th>
<th class="head"><p>分类(Classification)</p></th>
<th class="head"><p>标题(Title)</p></th>
<th class="head"><p>版本(Version)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>ISO</p></td>
<td><p>ISO 13400-2-2019(DoIP).pdf</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Autosar</p></td>
<td><p>AUTOSAR_CP_SWS_DiagnosticOverIP.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="terms-and-abbreviations">
<h2>术语与简写 Terms and Abbreviations<a class="headerlink" href="#terms-and-abbreviations" title="Link to this heading">¶</a></h2>
<section id="terms">
<h3>术语 Terms<a class="headerlink" href="#terms" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 27.3%" />
<col style="width: 72.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>术语(Terms)</p></th>
<th class="head"><p>解释(Explanation)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EID</p></td>
<td><p>Entity identifier, DoIP 实体 ID(Entity Identifier, DoIP Entity ID)</p></td>
</tr>
<tr class="row-odd"><td><p>GID</p></td>
<td><p>Group identifier, DoIP 实体组 ID(Group Identifier, DoIP Entity Group ID)</p></td>
</tr>
<tr class="row-even"><td><p>VIN</p></td>
<td><p>Vehicle Identification Number, 车辆 ID 号(Vehicle Identification Number, Vehicle ID No.)</p></td>
</tr>
<tr class="row-odd"><td><p>LA</p></td>
<td><p>Logic address, 逻辑地址(Logic Address)</p></td>
</tr>
<tr class="row-even"><td><p>SA</p></td>
<td><p>Source address, 源地址(Source Address)</p></td>
</tr>
<tr class="row-odd"><td><p>TA</p></td>
<td><p>Target Address，目的地址(Target Address)</p></td>
</tr>
<tr class="row-even"><td><p>路由激活(Routing Activation)</p></td>
<td><p>DoIP 协议 - routing activation(DoIP Protocol - Routing Activation)</p></td>
</tr>
<tr class="row-odd"><td><p>存活检查(Alive Check)</p></td>
<td><p>DoIP 协议 - alive check(DoIP Protocol - Alive Check)</p></td>
</tr>
<tr class="row-even"><td><p>电源模式(Power Mode)</p></td>
<td><p>DoIP 协议 - power mode(DoIP Protocol - Power Mode)</p></td>
</tr>
<tr class="row-odd"><td><p>实体信息(Entity Information)</p></td>
<td><p>DoIP 协议 - entity status(DoIP Protocol - Entity Status)</p></td>
</tr>
<tr class="row-even"><td><p>诊断消息(Diagnostic Message)</p></td>
<td><p>一种按照特定格式( UDS )组成的 TCP 报文(A TCP message composed in a specific format (UDS))</p></td>
</tr>
<tr class="row-odd"><td><p>IF</p></td>
<td><p>interface，通过 IF API 传输接口收发的 PDU，通常指数据长度较小的 PDU(Interface, a PDU transmitted or received via the IF API transmission interface, usually referring to a PDU with a small data length)</p></td>
</tr>
<tr class="row-even"><td><p>TP</p></td>
<td><p>transport，通过 TP API 传输接口收发的 PDU，通常指数据长度较大的 PDU(Transport, a PDU transmitted or received via the TP API transmission interface, usually referring to a PDU with a large data length)</p></td>
</tr>
<tr class="row-odd"><td><p>客户端、Tester(Client, Tester)</p></td>
<td><p>用于刷写、诊断等目的的外部诊断设备(An external diagnostic device used for purposes such as flashing and diagnostics)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="abbreviations">
<h3>简写 Abbreviations<a class="headerlink" href="#abbreviations" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 33.3%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>简写(Abbreviation)</p></th>
<th class="head"><p>全称(Full name)</p></th>
<th class="head"><p>解释(Explanation)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SoAd</p></td>
<td><p>Socket Adaptor</p></td>
<td><p>autosar 模块 - 套接字适配器</p></td>
</tr>
<tr class="row-odd"><td><p>PduR</p></td>
<td><p>PDU Router</p></td>
<td><p>autosar 模块 - PDU 路由模块</p></td>
</tr>
<tr class="row-even"><td><p>RTE</p></td>
<td><p>Runtime Environment</p></td>
<td><p>autosar 模块 - 运行时环境</p></td>
</tr>
<tr class="row-odd"><td><p>DCM</p></td>
<td><p>Diagnostic Communication Manager</p></td>
<td><p>autosar 模块 - 诊断通信模块</p></td>
</tr>
<tr class="row-even"><td><p>PDU</p></td>
<td><p>Protocol Data Unit</p></td>
<td><p>协议数据单元</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP</p></td>
<td><p>Diagnostic communication over Internet Protocol</p></td>
<td><p>基于 TCP/IP 的诊断通信</p></td>
</tr>
<tr class="row-even"><td><p>MDS</p></td>
<td><p>MDS Max data size</p></td>
<td><p>DoIP 实体可以处理的一个逻辑请求的最大大小</p></td>
</tr>
<tr class="row-odd"><td><p>UDS</p></td>
<td><p>Unified Diagnostic Services</p></td>
<td><p>统一诊断服务</p></td>
</tr>
<tr class="row-even"><td><p>TCP</p></td>
<td><p>Transmission Control Protocol</p></td>
<td><p>传输控制协议.</p></td>
</tr>
<tr class="row-odd"><td><p>UDP</p></td>
<td><p>User Datagram Protocol</p></td>
<td><p>用户数据报协议.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="introduction">
<h2>简介 Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>DoIP 协议用于传输以太网诊断消息( UDS )，为进行诊断通信的双方( 客户端、服务端 )提供一套高效且安全的连接机制。</p>
<p>The DoIP protocol is used for the transmission of Ethernet diagnostic messages (UDS), providing an efficient and secure connection mechanism for both parties (client and server) engaged in diagnostic communication.</p>
<p>DoIP 模块根据 DoIP 协议实现，提供了一整套与客户端通信的机制：身份识别机制、路由激活机制、存活检测机制，并提供获取基础信息的服务。</p>
<p>The DoIP module, implemented according to the DoIP protocol, provides a complete set of mechanisms for communicating with a client: an identification mechanism, a routing activation mechanism, and an alive check mechanism, as well as a service for obtaining basic information.</p>
<figure class="align-center" id="doip-arch">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIP_Arch.png" />
<figcaption>
<p><span class="caption-text">DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)</span><a class="headerlink" href="#doip-arch" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>如图所示，DoIP 模块处于 AUTOSAR 架构中的通信服务层，其下层为 SoAd 模块，上层为 PduR、RTE 模块。</p>
<p>As shown in the figure, the DoIP module is located in the communication services layer of the AUTOSAR architecture. Its lower layer is the SoAd module, and its upper layers are the PduR and RTE modules.</p>
</section>
<section id="functional-description">
<h2>功能描述 Functional Description<a class="headerlink" href="#functional-description" title="Link to this heading">¶</a></h2>
<section id="features">
<h3>特性 Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h3>
<section id="vehicle-identification">
<h4>车辆发现 Vehicle Identification<a class="headerlink" href="#vehicle-identification" title="Link to this heading">¶</a></h4>
<p>DoIP 模块被激活后，会主动以广播形式对外发送 n( 默认 3 ) 条车辆公告消息，告知客户端服务端已上线，并将通信必需信息( VIN、EID、GID、LA、IP、端口 )告知给客户端。</p>
<p>After the DoIP module is activated, it proactively broadcasts n (default 3) vehicle announcement messages to inform clients that the server is online. It also provides the necessary communication information (VIN, EID, GID, LA, IP, port) to the client.</p>
<p>DoIP 模块也可处理客户端的车辆发现请求，将自己的通信必需信息以单播形式告知给客户端。</p>
<p>The DoIP module can also handle vehicle identification requests from clients, sending its necessary communication information to the client via unicast.</p>
</section>
<section id="routing-activation">
<h4>路由激活 Routing Activation<a class="headerlink" href="#routing-activation" title="Link to this heading">¶</a></h4>
<p>客户端与 DoIP 节点建立 TCP 连接后，必须在一定时间内( 默认 2s )激活路由，之后才能与 DoIP 节点进行 UDS 通信，否则 DoIP 节点会断开 TCP 连接。</p>
<p>After a client establishes a TCP connection with a DoIP node, it must activate the route within a certain time (default 2s) before it can conduct UDS communication with the DoIP node; otherwise, the DoIP node will terminate the TCP connection.</p>
</section>
<section id="alive-check">
<h4>存活检查 Alive Check<a class="headerlink" href="#alive-check" title="Link to this heading">¶</a></h4>
<p>当 TCP 连接超过配置的最大值时，DoIP 节点会发送存活检查请求消息给所有客户端，从而决定断开哪些客户端的连接( 未在规定时间[默认 500ms]内发送存活检查响应消息 )。</p>
<p>When the number of TCP connections exceeds the configured maximum, the DoIP node will send an alive check request message to all clients to determine which connections to terminate (those that do not send an alive check response message within the specified time [default 500ms]).</p>
<p>当路由激活时，若客户端的 SA 已经用于激活了另一条 TCP 连接，那么也会触发存活检查机制，DoIP 从而决定是断开之前的连接,接受本次的路由激活请求，还是维持之前的 TCP 连接，拒绝本次的路由激活请求。</p>
<p>When routing is being activated, if the client’s SA is already in use for another active TCP connection, the alive check mechanism is also triggered. This allows the DoIP node to decide whether to terminate the previous connection and accept the current routing activation request, or to maintain the previous TCP connection and reject the current routing activation request.</p>
</section>
<section id="power-mode">
<h4>电源模式 Power Mode<a class="headerlink" href="#power-mode" title="Link to this heading">¶</a></h4>
<p>DoIP 可以利用电源模式响应消息，将电源模式告知给客户端。</p>
<p>DoIP can use a power mode response message to inform the client of its power mode.</p>
</section>
<section id="entity-information">
<h4>实体信息 Entity Information<a class="headerlink" href="#entity-information" title="Link to this heading">¶</a></h4>
<p>DoIP 可以利用实体信息响应消息，将实体信息告知给客户端，包括允许最大 TCP 连接数、已建立 TCP 连接数、DoIP 节点类型、MDS。</p>
<p>DoIP can use an entity information response message to inform the client of its information, including the maximum number of allowed TCP connections, the number of established TCP connections, the DoIP node type, and MDS.</p>
</section>
<section id="multi-core">
<h4>多核 Multi-Core<a class="headerlink" href="#multi-core" title="Link to this heading">¶</a></h4>
<p>1.DoIP 支持分布在多分区，具体在哪个分区由 Pdu 配置项 EcucPduDefaultPartitionRef 决定。</p>
<p>1.DoIP supports distribution across multiple partitions. The specific partition is determined by the PDU configuration item EcucPduDefaultPartitionRef.</p>
<p>2.同一通道的 DoIPPduRRxPduRef、DoIPPduRTxPduRef 必须在同一分区。</p>
<p>2.DoIPPduRRxPduRef and DoIPPduRTxPduRef for the same channel must be in the same partition.</p>
<p>3.同一 TCP 连接的 DoIPSoAdTcpRxPduRef、DoIPSoAdTcpTxPduRef 必须在同一分区。</p>
<p>3.DoIPSoAdTcpRxPduRef and DoIPSoAdTcpTxPduRef for the same TCP connection must be in the same partition.</p>
<p>4.同一 UDP 连接的 DoIPSoAdUdpRxPduRef、DoIPSoAdUdpTxPduRef 必须在同一分区。</p>
<p>4.DoIPSoAdUdpRxPduRef and DoIPSoAdUdpTxPduRef for the same UDP connection must be in the same partition.</p>
<p>5.在多变体的情况下, 同一 Pdu 分区属性不可改变，需保持一致在同一分区。</p>
<p>5.In a multi-variant scenario, the partition attribute of a single PDU cannot be changed and must remain consistent within the same partition.</p>
</section>
</section>
<section id="deviation">
<h3>偏差 Deviation<a class="headerlink" href="#deviation" title="Link to this heading">¶</a></h3>
<section id="doipinterface">
<h4>DoIPInterface<a class="headerlink" href="#doipinterface" title="Link to this heading">¶</a></h4>
<p>当前只允许配置一个接口</p>
<p>Currently, only one interface is allowed to be configured.</p>
</section>
<section id="doiproutingactivationauthenticationcallback">
<h4>DoIPRoutingActivationAuthenticationCallback<a class="headerlink" href="#doiproutingactivationauthenticationcallback" title="Link to this heading">¶</a></h4>
<p>当前该配置未生效</p>
<p>This configuration is currently not in effect.</p>
</section>
<section id="doiproutingactivationconfirmationcallback">
<h4>DoIPRoutingActivationConfirmationCallback<a class="headerlink" href="#doiproutingactivationconfirmationcallback" title="Link to this heading">¶</a></h4>
<p>当前该配置未生效</p>
<p>This configuration is currently not in effect.</p>
</section>
</section>
<section id="extension">
<h3>扩展 Extension<a class="headerlink" href="#extension" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
</section>
<section id="integration">
<h2>集成 Integration<a class="headerlink" href="#integration" title="Link to this heading">¶</a></h2>
<section id="file-list">
<h3>文件列表 File List<a class="headerlink" href="#file-list" title="Link to this heading">¶</a></h3>
<section id="static-files">
<h4>静态文件 Static Files<a class="headerlink" href="#static-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DoIP.h</p></td>
<td><p>对外头文件，DoIP 对外提供接口( PduR )(External header file, providing the external interface of DoIP (PduR))</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Cbk.h</p></td>
<td><p>对外头文件，DoIP 对外提供接口( SoAd )(External header file, providing the external interface of DoIP (SoAd))</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_Internal_UDP.h</p></td>
<td><p>内部头文件，提供处理 UDP 消息的接口(Internal header file, providing the interface for processing UDP messages)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Internal_TCP.h</p></td>
<td><p>内部头文件，提供处理 TCP 消息的接口(Internal header file, providing the interface for processing TCP messages)</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_Internal_TCP_Non_Diagnostic.h</p></td>
<td><p>内部头文件，提供处理非诊断消息的接口(Internal header file, providing the interface for processing non-diagnostic messages)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Internal_TCP_Diagnostic.h</p></td>
<td><p>内部头文件，提供处理诊断消息的接口(Internal header file, providing the interface for processing diagnostic messages)</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_Internal_Common.h</p></td>
<td><p>内部头文件，提供公共功能接口(Internal header file, providing the common function interface)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Internal_TCP_Common.h</p></td>
<td><p>内部头文件，提供处理 TCP 消息的公共接口(Internal header file, providing the common interface for processing TCP messages)</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_ConfigType.h</p></td>
<td><p>内部头文件，定义配置类型(Internal header file, defining configuration types)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP.c</p></td>
<td><p>实现对外接口(PduR、SoAd)(Implements the external interfaces (PduR, SoAd))</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_Internal_DET.h</p></td>
<td><p>实现 DET 检查(Implements DET checks)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Internal_Common.c</p></td>
<td><p>实现公共功能(Implements common functions)</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_Internal_TCP_Common.c</p></td>
<td><p>实现处理 TCP 消息的公共接口(Implements the common interface for processing TCP messages)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Internal_TCP_Diagnostic.c</p></td>
<td><p>实现处理诊断消息的接口(Implements the interface for processing diagnostic messages)</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_Internal_TCP_Non_Diagnostic.c</p></td>
<td><p>实现处理非诊断消息的接口(Implements the interface for processing non-diagnostic messages)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Internal_UDP.c</p></td>
<td><p>实现处理 UDP 消息的接口(Implements the interface for processing UDP messages)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dynamic-files">
<h4>动态文件 Dynamic Files<a class="headerlink" href="#dynamic-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件(File)</p></th>
<th class="head"><p>描述(Description)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DoIP_Cfg.h</p></td>
<td><p>工具生成，PC 配置(Tool-generated, PC configuration)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_Cfg.c</p></td>
<td><p>工具生成，PC 配置(Tool-generated, PC configuration)</p></td>
</tr>
<tr class="row-even"><td><p>DoIP_PBCfg.h</p></td>
<td><p>工具生成，PB 配置类型(Tool-generated, PB configuration types)</p></td>
</tr>
<tr class="row-odd"><td><p>DoIP_PBCfg.c</p></td>
<td><p>工具生成，PB 配置(Tool-generated, PB configuration)</p></td>
</tr>
<tr class="row-even"><td><p>Rte_DoIP.h</p></td>
<td><p>工具生成，声明回调函数接口(Tool-generated, declaring the callback function interfaces)</p></td>
</tr>
<tr class="row-odd"><td><p>Rte_DoIP_Type.h</p></td>
<td><p>工具生成，回调函数接口参数类型(Tool-generated, callback function interface parameter types)</p></td>
</tr>
<tr class="row-even"><td><p>Rte_DoIP.c</p></td>
<td><p>工具生成，定义回调函数接口(Tool-generated, defining the callback function interfaces)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="error-handling">
<h3>错误处理 Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h3>
<section id="development-errors">
<h4>开发错误 Development Errors<a class="headerlink" href="#development-errors" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Value[hex]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DOIP_E_UNINIT</p></td>
<td><p>0x01</p></td>
<td><p>API service call without module initialization</p></td>
</tr>
<tr class="row-odd"><td><p>DOIP_E_PARAM_POINTER</p></td>
<td><p>0x02</p></td>
<td><p>NULL-Pointer on any API call</p></td>
</tr>
<tr class="row-even"><td><p>DOIP_E_INVALID_PDU_SDU_ID</p></td>
<td><p>0x03</p></td>
<td><p>Wrong Lower Layer (SoAd) or Upper Layer (Pdu Router) Id received</p></td>
</tr>
<tr class="row-odd"><td><p>DOIP_E_INVALID_PARAMETER</p></td>
<td><p>0x04</p></td>
<td><p>API call with invalid Parameter</p></td>
</tr>
<tr class="row-even"><td><p>DOIP_E_INIT_FAILED</p></td>
<td><p>0x05</p></td>
<td><p>DoIP Init service call failure</p></td>
</tr>
</tbody>
</table>
</section>
<section id="product-errors">
<h4>产品错误 Product Errors<a class="headerlink" href="#product-errors" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
<section id="runtime-errors">
<h4>运行时错误 Runtime Errors<a class="headerlink" href="#runtime-errors" title="Link to this heading">¶</a></h4>
<p>None</p>
</section>
</section>
</section>
<section id="interface-description">
<h2>接口描述 Interface Description<a class="headerlink" href="#interface-description" title="Link to this heading">¶</a></h2>
<section id="type-definitions">
<h3>类型定义 Type Definitions<a class="headerlink" href="#type-definitions" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DoIP_ConfigType</p></td>
<td><p>Structure</p></td>
<td><p>Configuration data structure of the DoIP module</p></td>
</tr>
</tbody>
</table>
</section>
<section id="services">
<h3>提供的服务 Services<a class="headerlink" href="#services" title="Link to this heading">¶</a></h3>
<section id="doip-init">
<h4>DoIP_Init<a class="headerlink" href="#doip-init" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_Init</span><span class="p">(</span><span class="n">const</span> <span class="n">DoIP_ConfigType</span> <span class="o">*</span><span class="n">doipConfigPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This service initializes all global variables of the DoIP module.After return of this service the DoIP module is operational.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>doipConfigPtr</p></td>
<td><p>PB configuration.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="doip-getversioninfo">
<h4>DoIP_GetVersionInfo<a class="headerlink" href="#doip-getversioninfo" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_GetVersionInfo</span><span class="p">(</span><span class="n">Std_VersionInfoType</span> <span class="o">*</span><span class="n">versionInfo</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the version information of this module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>versionInfo</p></td>
<td><p>Pointer to where to store the version information of this module.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="doip-activationlineswitch">
<h4>DoIP_ActivationLineSwitch<a class="headerlink" href="#doip-activationlineswitch" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_ActivationLineSwitch</span><span class="p">(</span><span class="n">boolean</span> <span class="o">*</span><span class="n">active</span><span class="p">)</span>
</pre></div>
</div>
<p>This function is used to notify the DoIP on a switch of the DoIPActivationLine.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[inout]</p></td>
<td><p>active</p></td>
<td><p>Specifies activate or deactivate，and return status of DoIP.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="doip-tptransmit">
<h4>DoIP_TpTransmit<a class="headerlink" href="#doip-tptransmit" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">DoIP_TpTransmit</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">pdurTxPduId</span><span class="p">,</span> <span class="n">const</span> <span class="n">PduInfoType</span> <span class="o">*</span><span class="n">pduInfoPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This service is called to request the transfer data from the PduRouter to the SoAd.It is used to indicate the transmission which will be performed in the DoIP_Mainfunction.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant for different PduIds. Non reentrant for the same PduId.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>pdurTxPduId</p></td>
<td><p>DoIP unique identifier of the PDU to be transmitted by the PduR</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>pduInfoPtr</p></td>
<td><p>Tx Pdu information structure which contains the length of the DoIPTxMessage.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Get The request has been accepted.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The request has not been accepted.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-tpcanceltransmit">
<h4>DoIP_TpCancelTransmit<a class="headerlink" href="#doip-tpcanceltransmit" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">DoIP_TpCancelTransmit</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">pdurTxPduId</span><span class="p">)</span>
</pre></div>
</div>
<p>This service primitive is used to cancel the transfer of pending DoIPPduRTxIds. The connection is identified by DoIPPduRTxId. When the function returns, no transmission is in progress anymore with the given DoIPPduRTxId identifier.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant for different PduIds. Non reentrant for the same PduId.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>pdurTxPduId</p></td>
<td><p>DoIP unique identifier ofthe PDU to be transmitted by the PduR</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Transmit cancellation request of the specified DoIPPduRTxId is accepted.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>The transmit cancellation request of the DoIPPduRTxId has been rejected.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-tpcancelreceive">
<h4>DoIP_TpCancelReceive<a class="headerlink" href="#doip-tpcancelreceive" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">DoIP_TpCancelReceive</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">pdurRxPduId</span><span class="p">)</span>
</pre></div>
</div>
<p>By calling this API with the corresponding DoIPPduRRxId the currently ongoing data reception is terminated immediately. When the function returns, no reception is in progress anymore with the given DoIPPduRRxId identifier.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant for different PduIds. Non reentrant for the same PduId.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>pdurRxPduId</p></td>
<td><p>DoIP unique identifier of the PDU for which reception shall be canceled by the PduR</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Reception was canceled successfully.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Reception was not canceled.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-iftransmit">
<h4>DoIP_IfTransmit<a class="headerlink" href="#doip-iftransmit" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">DoIP_IfTransmit</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">pdurTxPduId</span><span class="p">,</span> <span class="n">const</span> <span class="n">PduInfoType</span> <span class="o">*</span><span class="n">pduInfoPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>Requests transmission of an I-PDU.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>pdurTxPduId</p></td>
<td><p>Identification of the I-PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>pduInfoPtr</p></td>
<td><p>Provides the destination buffer (SduDataPtr) and the number of bytes to be copied (SduLength).</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Request is accepted by the destination module.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Request is not accepted by the destination module.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-ifcanceltransmit">
<h4>DoIP_IfCancelTransmit<a class="headerlink" href="#doip-ifcanceltransmit" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">DoIP_IfCancelTransmit</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">pdurTxPduId</span><span class="p">)</span>
</pre></div>
</div>
<p>Requests cancellation of an ongoing transmission of an I-PDU in a lower layer communication interface module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>pdurTxPduId</p></td>
<td><p>Identification of the I-PDU to be cancelled.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Cancellation was executed successfully by the destination module.</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Cancellation was rejected by the destination module.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-mainfunction">
<h4>DoIP_MainFunction<a class="headerlink" href="#doip-mainfunction" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_MainFunction</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Schedules the Diagnostic over IP module. (Entry point for scheduling)</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="doip-mainfunction-highfrequency">
<h4>DoIP_MainFunction_HighFrequency<a class="headerlink" href="#doip-mainfunction-highfrequency" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_MainFunction_HighFrequency</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Schedules the Diagnostic over IP module. (Entry point for scheduling) for hight frequency tasks.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
</section>
<section id="callback-function">
<h3>回调函数 Callback Function<a class="headerlink" href="#callback-function" title="Link to this heading">¶</a></h3>
<section id="doip-soadtpcopytxdata">
<h4>DoIP_SoAdTpCopyTxData<a class="headerlink" href="#doip-soadtpcopytxdata" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BEGIN_C_DECLS</span> <span class="n">BufReq_ReturnType</span> <span class="n">DoIP_SoAdTpCopyTxData</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">soadTxPduId</span><span class="p">,</span> <span class="n">const</span> <span class="n">PduInfoType</span> <span class="o">*</span><span class="n">pduInfoPtr</span><span class="p">,</span> <span class="n">const</span> <span class="n">RetryInfoType</span> <span class="o">*</span><span class="n">retry</span><span class="p">,</span> <span class="n">PduLengthType</span> <span class="o">*</span><span class="n">availableDataPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This function is called to acquire the transmit data of an I-PDU segment (N-PDU).Each call to this function provides the next part of the I-PDU data unless retry-&gt;TpDataState is TP_DATARETRY.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soadTxPduId</p></td>
<td><p>Identification of the transmitted I-PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>pduInfoPtr</p></td>
<td><p>Provides the destination buffer (SduDataPtr) and the number of bytes to be copied (SduLength).</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>retry</p></td>
<td><p>This parameter is used to acknowledge transmitted data or toretransmit data after transmission problems.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>availableDataPtr</p></td>
<td><p>Indicates the remaining number of bytes that are available in the upper layer module’s Tx buffer.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>BufReq_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BUFREQ_OK</p></td>
<td><p>Data has been copied to the transmit buffer completely as requested.</p></td>
</tr>
<tr class="row-odd"><td><p>BUFREQ_E_BUSY</p></td>
<td><p>Request could not be fulfilled, because the required amount of Tx data is not available. The lower layer module may retry this call later on. No data has been copied.</p></td>
</tr>
<tr class="row-even"><td><p>BUFREQ_E_NOT_OK</p></td>
<td><p>Data has not been copied. Request failed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-soadtptxconfirmation">
<h4>DoIP_SoAdTpTxConfirmation<a class="headerlink" href="#doip-soadtptxconfirmation" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_SoAdTpTxConfirmation</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">soadTxPduId</span><span class="p">,</span> <span class="n">Std_ReturnType</span> <span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the version information of this module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soadTxPduId</p></td>
<td><p>Identification of the transmitted I-PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>result</p></td>
<td><p>E_OK: The PDU was transmitted. E_NOT_OK: Transmission of the PDU failed.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-soadtpcopyrxdata">
<h4>DoIP_SoAdTpCopyRxData<a class="headerlink" href="#doip-soadtpcopyrxdata" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BufReq_ReturnType</span> <span class="n">DoIP_SoAdTpCopyRxData</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">soadRxPduId</span><span class="p">,</span> <span class="n">const</span> <span class="n">PduInfoType</span> <span class="o">*</span><span class="n">pduInfoPtr</span><span class="p">,</span> <span class="n">PduLengthType</span> <span class="o">*</span><span class="n">bufferSizePtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This function is called to provide the received data of an I-PDU segment (N-PDU) to the upper layer.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soadRxPduId</p></td>
<td><p>Identification of the received I-PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>pduInfoPtr</p></td>
<td><p>Provides the source buffer (SduDataPtr) and the number of bytes to be copied (SduLength).</p></td>
</tr>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>bufferSizePtr</p></td>
<td><p>Available receive buffer after data has been copied.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>BufReq_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BUFREQ_OK</p></td>
<td><p>Data copied successfully.</p></td>
</tr>
<tr class="row-odd"><td><p>BUFREQ_E_NOT_OK</p></td>
<td><p>Data was not copied because an error occurred.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-soadtpstartofreception">
<h4>DoIP_SoAdTpStartOfReception<a class="headerlink" href="#doip-soadtpstartofreception" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BufReq_ReturnType</span> <span class="n">DoIP_SoAdTpStartOfReception</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">soadRxPduId</span><span class="p">,</span> <span class="n">const</span> <span class="n">PduInfoType</span> <span class="o">*</span><span class="n">pduInfoPtr</span><span class="p">,</span> <span class="n">PduLengthType</span> <span class="n">sduLen</span><span class="p">,</span> <span class="n">PduLengthType</span> <span class="o">*</span><span class="n">bufferSizePtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This function is called at the start of receiving an N-SDU. The N-SDU might be fragmented into multiple N-PDUs (FF with one or more following CFs) or might consist of a single N-PDU (SF).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soadRxPduId</p></td>
<td><p>Identification of the I-PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>pduInfoPtr</p></td>
<td><p>Pointer to a PduInfoType structure containing the payload data (without protocol information) and payload length of the first frame or single frame of a transport protocol I-PDU reception..</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>sduLen</p></td>
<td><p>Total length of the N-SDU to be received.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>bufferSizePtr</p></td>
<td><p>Available receive buffer in the receiving module. This parameter will be used to compute the Block Size (BS) in the transport protocol module.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>BufReq_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BUFREQ_OK</p></td>
<td><p>Connection has been accepted. bufferSizePtr indicates the available receive buffer; reception is continued.</p></td>
</tr>
<tr class="row-odd"><td><p>BUFREQ_E_NOT_OK</p></td>
<td><p>Connection has been rejected; reception is aborted. bufferSizePtr remains unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>BUFREQ_E_OVFL</p></td>
<td><p>No buffer of the required length can be provided; reception is aborted. bufferSizePtr remains unchanged.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-soadtprxindication">
<h4>DoIP_SoAdTpRxIndication<a class="headerlink" href="#doip-soadtprxindication" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_SoAdTpRxIndication</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">soadRxPduId</span><span class="p">,</span> <span class="n">Std_ReturnType</span> <span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>Called after an I-PDU has been received via the TP API, the result indicates whether the transmission was successful or not.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soadRxPduId</p></td>
<td><p>Identification of the received I-PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>result</p></td>
<td><p>E_OK: The PDU was received. E_NOT_OK: Reception of the PDU failed.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None.</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-soadifrxindication">
<h4>DoIP_SoAdIfRxIndication<a class="headerlink" href="#doip-soadifrxindication" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_SoAdIfRxIndication</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">soadRxPduId</span><span class="p">,</span> <span class="n">const</span> <span class="n">PduInfoType</span> <span class="o">*</span><span class="n">pduInfoPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>Indication of a received I-PDU from a lower layer communication interface module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soadRxPduId</p></td>
<td><p>Identification of the received I-PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>pduInfoPtr</p></td>
<td><p>Contains the length (SduLength) of the received PDU, a pointer to a buffer (SduDataPtr) containing the PDU, and the MetaData related to this PDU.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None.</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-soadiftxconfirmation">
<h4>DoIP_SoAdIfTxConfirmation<a class="headerlink" href="#doip-soadiftxconfirmation" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_SoAdIfTxConfirmation</span><span class="p">(</span><span class="n">PduIdType</span> <span class="n">soadTxPduId</span><span class="p">,</span> <span class="n">Std_ReturnType</span> <span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>The lower layer communication interface module confirms the transmission of an I-PDU.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soadTxPduId</p></td>
<td><p>ID of the I-PDU that has been transmitted.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>result</p></td>
<td><p>Result of the transmission.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None.</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-soconmodechg">
<h4>DoIP_SoConModeChg<a class="headerlink" href="#doip-soconmodechg" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_SoConModeChg</span><span class="p">(</span><span class="n">SoAd_SoConIdType</span> <span class="n">soConId</span><span class="p">,</span> <span class="n">SoAd_SoConModeType</span> <span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
<p>Notification about a SoAd socket connection state change, e.g. socket connection gets online.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soConId</p></td>
<td><p>socket connection index specifying the socket connection with the mode change.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>mode</p></td>
<td><p>new mode.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None.</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="doip-localipaddrassignmentchg">
<h4>DoIP_LocalIpAddrAssignmentChg<a class="headerlink" href="#doip-localipaddrassignmentchg" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DoIP_LocalIpAddrAssignmentChg</span><span class="p">(</span><span class="n">SoAd_SoConIdType</span> <span class="n">soConId</span><span class="p">,</span> <span class="n">TcpIp_IpAddrStateType</span> <span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
<p>This function gets called by the SoAd if an IP address assignment related to a socket connection changes.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>soConId</p></td>
<td><p>socket connection index specifying the socket connection where the IP address assigment has changed</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>state</p></td>
<td><p>state of IP address assignment.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>None.</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="applicable-services">
<h3>依赖的服务 Applicable Services<a class="headerlink" href="#applicable-services" title="Link to this heading">¶</a></h3>
<section id="compulsory-interface">
<h4>强制接口 Compulsory interface<a class="headerlink" href="#compulsory-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Dcm_GetVin</p></td>
<td><p>Dcm.h</p></td>
<td><p>Function to get the VIN.</p></td>
</tr>
<tr class="row-odd"><td><p>PduR_DoIPTpCopyRxData</p></td>
<td><p>PduR_DoIPTp.h</p></td>
<td><p>This function is called to provide the received data of an I-PDU segment (N-PDU) to the upper layer.</p></td>
</tr>
<tr class="row-even"><td><p>PduR_DoIPTpCopyTxData</p></td>
<td><p>PduR_DoIPTp.h</p></td>
<td><p>This function is called to acquire the transmit data of an I-PDU segment (N-PDU).</p></td>
</tr>
<tr class="row-odd"><td><p>PduR_DoIPTpRxIndication</p></td>
<td><p>PduR_DoIPTp.h</p></td>
<td><p>Called after an I-PDU has been received via the TP API，the result indicates whether the transmission was successful or not.</p></td>
</tr>
<tr class="row-even"><td><p>PduR_DoIPTpStartOfReception</p></td>
<td><p>PduR_DoIPTp.h</p></td>
<td><p>This function is called at the start of receiving an N-SDU.</p></td>
</tr>
<tr class="row-odd"><td><p>PduR_DoIPTpTxConfirmation</p></td>
<td><p>PduR_DoIPIf.h</p></td>
<td><p>This function is called after the I-PDU has been transmitted on its network，the result indicates whether the transmission was successful or not.</p></td>
</tr>
<tr class="row-even"><td><p>PduR_DoIPIfTxConfirmation</p></td>
<td><p>PduR_DoIPTp.h</p></td>
<td><p>The lower layer communication interface module confirms the transmission of a PDU，or the failure to transmit a PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>SoAd_CloseSoCon</p></td>
<td><p>SoAd.h</p></td>
<td><p>This service closes the socket connection specified by SoConId.</p></td>
</tr>
<tr class="row-even"><td><p>SoAd_GetPhysAddr</p></td>
<td><p>SoAd.h</p></td>
<td><p>Retrieves the physical source address of the EthIf controller used by the SoAd socket connection specified by SoConId</p></td>
</tr>
<tr class="row-odd"><td><p>SoAd_GetSoConId</p></td>
<td><p>SoAd.h</p></td>
<td><p>Returns socket connection index related to the specified TxPduId.</p></td>
</tr>
<tr class="row-even"><td><p>SoAd_IfTransmit</p></td>
<td><p>SoAd.h</p></td>
<td><p>Requests transmission of a PDU.</p></td>
</tr>
<tr class="row-odd"><td><p>SoAd_OpenSoCon</p></td>
<td><p>SoAd.h</p></td>
<td><p>This service opens the socket connection specified by SoConId.</p></td>
</tr>
<tr class="row-even"><td><p>SoAd_ReleaseIpAddrAssignment</p></td>
<td><p>SoAd.h</p></td>
<td><p>By this API service the local IP address assignment used for the socket connection specified by SoConId is released.</p></td>
</tr>
<tr class="row-odd"><td><p>SoAd_RequestIpAddrAssignment</p></td>
<td><p>SoAd.h</p></td>
<td><p>By this API service the local IP address assignment which shall be used for the socket connection specified by SoConId is initiated.</p></td>
</tr>
<tr class="row-even"><td><p>SoAd_TpTransmit</p></td>
<td><p>SoAd.h</p></td>
<td><p>Requests transmission of a PDU.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="optional-interface">
<h4>可选接口 Optional Interface<a class="headerlink" href="#optional-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Det_ReportError</p></td>
<td><p>Det.h</p></td>
<td><p>Service to report development errors</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="configuration">
<h2>配置 Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<section id="paylaod-allowed-payload-field-length">
<h3>允许的 paylaod 字段长度 Allowed Payload Field Length<a class="headerlink" href="#paylaod-allowed-payload-field-length" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="payload-maximum-payload-field-value">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPMaxRequestBytes.png" />
<figcaption>
<p><span class="caption-text">DoIPMaxRequestBytes 配置示意图 (DoIPMaxRequestBytes Configuration Diagram)</span><a class="headerlink" href="#payload-maximum-payload-field-value" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>若 DoIP 消息的 payload 字段值超过该配置项( 这里是 1028 字节 )，DoIP 会发送 NACK。</p>
<p>If the value of the payload field in a DoIP message exceeds this configuration item (here, 1028 bytes), DoIP will send a NACK.</p>
</section>
<section id="gidlaeid">
<h3>GID、LA、EID<a class="headerlink" href="#gidlaeid" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="gid-la">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/GID_LA.png" />
<figcaption>
<p><span class="caption-text">GID、LA 配置示意图 (GID and LA Configuration Diagram)</span><a class="headerlink" href="#gid-la" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="eid">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/EID.png" />
<figcaption>
<p><span class="caption-text">EID 配置示意图 (EID Configuration Diagram)</span><a class="headerlink" href="#eid" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>DoIP 会在车辆公告消息、车辆身份识别响应消息中携带 GID、LA、EID。VIN 通过调用 Dcm_GetVin() 获取。</p>
<p>DoIP includes the GID, LA, and EID in vehicle announcement messages and vehicle identification response messages. The VIN is obtained by calling Dcm_GetVin().</p>
</section>
<section id="allowed-number-of-client-connections">
<h3>允许连接的客户端数量 Allowed Number of Client Connections<a class="headerlink" href="#allowed-number-of-client-connections" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="doipmaxtesterconnections">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPMaxTesterConnections.png" />
<figcaption>
<p><span class="caption-text">DoIPMaxTesterConnections 配置示意图 (DoIPMaxTesterConnections Configuration Diagram)</span><a class="headerlink" href="#doipmaxtesterconnections" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>DoIP 只允许与 DoIPMaxTesterConnections 数量的客户端建立 TCP 连接( 此处只允许与 1 个客户端建立连接 )。</p>
<p>DoIP only allows TCP connections to be established with the number of clients specified by DoIPMaxTesterConnections (here, only 1 client connection is allowed).</p>
</section>
<section id="channel">
<h3>通道 Channel<a class="headerlink" href="#channel" title="Link to this heading">¶</a></h3>
<p>通道有 2 个功能：</p>
<p>The channel has two functions:</p>
<p>1.确定客户端( DoIPChannelSARef )与服务端( DoIPChannelTARef )通信双方；</p>
<p>1.To identify the communicating parties: the client (DoIPChannelSARef) and the server (DoIPChannelTARef);</p>
<p>2.确定将从客户端收到的消息传递给哪个模块( DoIPPduRRxPduRef )，将从 PduR 收到的消息发送给哪个客户端( DoIPPduRTxPduRef )。</p>
<p>2.To determine which module to pass messages received from the client to (DoIPPduRRxPduRef), and which client to send messages received from PduR to (DoIPPduRTxPduRef).</p>
<figure class="align-center" id="sa-ta">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/channel_test_target.png" />
<figcaption>
<p><span class="caption-text">通道 SA、TA 配置示意图 (Channel SA and TA Configuration Diagram)</span><a class="headerlink" href="#sa-ta" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="doippdurrxpduref">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/channel_srcpdu.png" />
<figcaption>
<p><span class="caption-text">DoIPPduRRxPduRef 配置示意图 (DoIPPduRRxPduRef Configuration Diagram)</span><a class="headerlink" href="#doippdurrxpduref" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="doippdurtxpduref">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/channel_destpdu.png" />
<figcaption>
<p><span class="caption-text">DoIPPduRTxPduRef 配置示意图 (DoIPPduRTxPduRef Configuration Diagram)</span><a class="headerlink" href="#doippdurtxpduref" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Pdu 默认是 TP 类型，若需使用 IF 类型，可勾选绿框处配置。</p>
<p>By default, the PDU is of type TP. To use the IF type, check the configuration option in the green box.</p>
<section id="pdur-related-configurations-in-pdur">
<h4>PduR 中的相关配置 Related Configurations in PduR<a class="headerlink" href="#pdur-related-configurations-in-pdur" title="Link to this heading">¶</a></h4>
<p>DoIPPduRRxPduRef、DoIPPduRTxPduRef 所引用的 Pdu，需要在 PduR 中建立通信路由。</p>
<p>For the PDUs referenced by DoIPPduRRxPduRef and DoIPPduRTxPduRef, a communication route must be established in PduR.</p>
<section id="pdursrcpdu-pdursrcpdu-configuration">
<h5>PduRSrcPdu 配置 PduRSrcPdu Configuration<a class="headerlink" href="#pdursrcpdu-pdursrcpdu-configuration" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="id1">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/PduR_srcpdu.png" />
<figcaption>
<p><span class="caption-text">PduRSrcPdu 配置示意图 (PduRSrcPdu Configuration Diagram )</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 PduRSrcPdu 容器( 此处是 PduRSrcPdu_DCM_PHY_RX )，来指定 Pdu 来源。</p>
<p>A new PduRSrcPdu container needs to be added (here, PduRSrcPdu_DCM_PHY_RX) to specify the PDU source.</p>
<p>需要将 DoIPPduRRxPduRef 所引用的 Pdu( 此处是 DoIP_Phy_Rx ) 配置到 PduRSrcPduRef 配置项中，表明 Pdu 来源于 DoIP。</p>
<p>The PDU referenced by DoIPPduRRxPduRef (here, DoIP_Phy_Rx) needs to be configured in the PduRSrcPduRef, indicating that the PDU originates from DoIP.</p>
</section>
<section id="pdurdestpdu-pdurdestpdu-configuration">
<h5>PduRDestPdu 配置 PduRDestPdu Configuration<a class="headerlink" href="#pdurdestpdu-pdurdestpdu-configuration" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="id2">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/PduR_destpdu.png" />
<figcaption>
<p><span class="caption-text">PduRDestPdu 配置示意图 (PduRDestPdu Configuration Diagram)</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 PduRDestPdu 容器( 此处是 PduRDestPdu_DCM_TX )，来指定将 Pdu 传递给哪个模块。</p>
<p>A new PduRDestPdu container needs to be added (here, PduRDestPdu_DCM_TX) to specify which module the PDU shall be passed to.</p>
<p>需要将 DoIPPduRTxPduRef 所引用的 Pdu( 此处是 DoIP_Tx ) 配置到 PduRDestPduRef 配置项中，表明将 Pdu 传递给 DoIP。</p>
<p>The PDU referenced by DoIPPduRTxPduRef (here, DoIP_Tx) needs to be configured in the PduRDestPduRef, indicating that the PDU is to be passed to DoIP.</p>
</section>
<section id="pdurroutingpath-pdurroutingpath-configuration">
<h5>PduRRoutingPath 配置 PduRRoutingPath Configuration<a class="headerlink" href="#pdurroutingpath-pdurroutingpath-configuration" title="Link to this heading">¶</a></h5>
<section id="receiving-link">
<h6>接收链路 Receiving Link<a class="headerlink" href="#receiving-link" title="Link to this heading">¶</a></h6>
<figure class="align-center" id="pdurroutingpath-recv">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/PduR_srcpath.png" />
<figcaption>
<p><span class="caption-text">PduRRoutingPath 接收配置示意图 (PduRRoutingPath Receiving Configuration Diagram)</span><a class="headerlink" href="#pdurroutingpath-recv" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 PduRRoutingPath 容器(此处是 PduRRoutingPath_DOIP_PHY_RX )，来关联 PduRSrcPdu、PduRDestPdu 指定 Pdu 的来源、目的地( 此处是指定接收路径 )。</p>
<p>A new PduRRoutingPath container needs to be added (here, PduRRoutingPath_DOIP_PHY_RX) to associate PduRSrcPdu and PduRDestPdu, specifying the source and destination of the PDU (here, specifying the receiving path).</p>
<p>配置 PduRDestPduRRef( 此处是 PduRDestPdu_DCM_PHY_RX ) 指定将 Pdu 转发给指定模块( 这里是 DCM )。</p>
<p>Configure PduRDestPduRRef (here, PduRDestPdu_DCM_PHY_RX) to specify that the PDU shall be forwarded to a specific module (here, DCM).</p>
<p>配置 PduRSrcPduRRef( 此处是 PduRSrcPdu_DCM_PHY_RX ) 指定 Pdu 来源( 此处是 DoIP )。</p>
<p>Configure PduRSrcPduRRef (here, PduRSrcPdu_DCM_PHY_RX) to specify the PDU source (here, DoIP).</p>
<p>( 所以该接收链路配置是指定将从 DoIP 收到的 Pdu 转发给 DCM。)</p>
<p>(Therefore, this receiving link configuration specifies that PDUs received from DoIP will be forwarded to DCM. )</p>
</section>
<section id="sending-link">
<h6>发送链路 Sending Link<a class="headerlink" href="#sending-link" title="Link to this heading">¶</a></h6>
<figure class="align-center" id="pdurroutingpath-send">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/PduR_dstpath.png" />
<figcaption>
<p><span class="caption-text">PduRRoutingPath 发送配置示意图 (PduRRoutingPath Sending Configuration Diagram)</span><a class="headerlink" href="#pdurroutingpath-send" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 PduRRoutingPath 容器(此处是 PduRRoutingPath_DOIP_TX )，来关联 PduRSrcPdu、PduRDestPdu 指定 Pdu 的来源、目的地( 此处是指定发送路径 )。</p>
<p>A new PduRRoutingPath container needs to be added (here, PduRRoutingPath_DOIP_TX) to associate PduRSrcPdu and PduRDestPdu, specifying the source and destination of the PDU (here, specifying the sending path).</p>
<p>配置 PduRDestPduRRef( 此处是 PduRDestPdu_DCM_TX ) 指定将 Pdu 转发给指定模块( 此处是 DoIP )。</p>
<p>Configure PduRDestPduRRef (here, PduRDestPdu_DCM_TX) to specify that the PDU shall be forwarded to a specific module (here, DoIP).</p>
<p>配置 PduRSrcPduRRef( 此处是 PduRSrcPdu_DCM_TX ) 指定 Pdu 来源( 这里是 DCM )。</p>
<p>Configure PduRSrcPduRRef (here, PduRSrcPdu_DCM_TX) to specify the PDU source (here, DCM).</p>
<p>( 所以该发送链路配置是指定将从 DCM 收到的 Pdu 转发给 DoIP。)</p>
<p>(Therefore, this sending link configuration specifies that PDUs received from DCM will be forwarded to DoIP.)</p>
</section>
</section>
</section>
<section id="physical-and-functional-addressing">
<h4>物理寻址、功能寻址 Physical and Functional Addressing<a class="headerlink" href="#physical-and-functional-addressing" title="Link to this heading">¶</a></h4>
<figure class="align-center" id="pyh-func">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/pyh_func.png" />
<figcaption>
<p><span class="caption-text">物理寻址、功能寻址配置示意图 (Physical and Functional Addressing Configuration Diagram)</span><a class="headerlink" href="#pyh-func" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>通道有物理寻址与功能寻址的区分，若配置了 DoIPPduRTxPdu 则为物理寻址( 所以 DoIPChannel_PHY 为物理寻址通道，DoIPChannel_FUN 为功能寻址通道 - 绿框处未配置 DoIPPduRTxPdu )。</p>
<p>Channels are distinguished as either physical or functional addressing. If DoIPPduRTxPdu is configured, it is physical addressing (thus, DoIPChannel_PHY is a physical addressing channel, and DoIPChannel_FUN is a functional addressing channel - DoIPPduRTxPdu is not configured in the green box).</p>
<p>若功能寻址通道需要发送 UDS 响应消息给客户端，需要使用物理寻址通道。</p>
<p>If a functional addressing channel needs to send a UDS response message to a client, it must use a physical addressing channel.</p>
</section>
</section>
<section id="connection">
<h3>连接 Connection<a class="headerlink" href="#connection" title="Link to this heading">¶</a></h3>
<p>TCP、UDP、announcement 连接有 2 个核心配置: DoIPSoAdRxPdu、DoIPSoAdTxPdu，前者告知 SoAd 将特定 IP、端口的以太网消息转发给 DoIP 模块，后者指定发送消息的远端 IP、端口。</p>
<p>TCP, UDP, and announcement connections have two core configurations: DoIPSoAdRxPdu and DoIPSoAdTxPdu. The former tells SoAd to forward Ethernet messages from a specific IP and port to the DoIP module, while the latter specifies the remote IP and port for sending messages.</p>
<section id="tcp-tcp-connection">
<h4>TCP 连接 TCP Connection<a class="headerlink" href="#tcp-tcp-connection" title="Link to this heading">¶</a></h4>
<p>最少配置 2 条 TCP 连接，此时只允许与一个客户端通信；若想与 n 个客户端通信，则需配置 n + 1 条 tcp 连接。</p>
<p>A minimum of two TCP connections must be configured, which allows communication with only one client. To communicate with n clients, n + 1 TCP connections must be configured.</p>
<section id="doipsoadtcprxpdu">
<h5>DoIPSoAdTcpRxPdu<a class="headerlink" href="#doipsoadtcprxpdu" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="id3">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPSoAdTcpRxPdu.png" />
<figcaption>
<p><span class="caption-text">DoIPSoAdTcpRxPdu 配置示意图 (DoIPSoAdTcpRxPdu Configuration Diagram)</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="soad-related-configurations-in-soad">
<h6>SoAd 中的相关配置 Related Configurations in SoAd<a class="headerlink" href="#soad-related-configurations-in-soad" title="Link to this heading">¶</a></h6>
<figure class="align-center" id="soadsocketroutedest">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketRouteDest.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketRouteDest 配置示意图 (SoAdSocketRouteDest Configuration Diagram)</span><a class="headerlink" href="#soadsocketroutedest" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 SoAdSocketRoute 容器( 此处是 SoAdSocketRoute_DOIP_TCP0 )，来指定消息是 TCP 还是 UDP 类型，指定消息来源，指定将消息传递给 DoIP 模块。</p>
<p>A new SoAdSocketRoute container needs to be added (here, SoAdSocketRoute_DOIP_TCP0) to specify whether the message is of TCP or UDP type, to specify the message source, and to specify that the message shall be passed to the DoIP module.</p>
<p>通过配置 SoAdSocketRouteDest 容器( 此处是 SoAdSocketRouteDest_2 )的 SoAdRxUpperLayerType 参数( 此处是 TP，为 TCP 类型 )来指定消息类型。</p>
<p>The message type is specified by configuring the SoAdRxUpperLayerType parameter of the SoAdSocketRouteDest container (here, SoAdSocketRouteDest_2) (here, TP, for TCP type).</p>
<p>通过配置 SoAdSocketRouteDest 容器( 此处是 SoAdSocketRouteDest_2 )的 SoAdRxPduRef 参数( 此处是 SoAd_Rx )来指定将收到的消息传递给 DoIP 模块。</p>
<p>Passing the received message to the DoIP module is specified by configuring the SoAdRxPduRef parameter of the SoAdSocketRouteDest container (here, SoAdSocketRouteDest_2) (here, SoAd_Rx).</p>
<figure class="align-center" id="soadsocketroute-tcp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketRoute_tcp.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketRoute 配置示意图 (SoAdSocketRoute Configuration Diagram)</span><a class="headerlink" href="#soadsocketroute-tcp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>通过配置 SoAdSocketRoute 容器( 此处是 SoAdSocketRoute_DOIP_TCP0 )的 SoAdRxSocketConnOrSocketConnBundleRef 参数( 此处是 SCGroup_DOIP_TCP0 )指定消息来源。</p>
<p>The message source is specified by configuring the SoAdRxSocketConnOrSocketConnBundleRef parameter of the SoAdSocketRoute container (here, SoAdSocketRoute_DOIP_TCP0) (here, SCGroup_DOIP_TCP0).</p>
<figure class="align-center" id="soadsocketremoteaddress">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketRemoteAddress.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketRemoteAddress 配置示意图 (SoAdSocketRemoteAddress Configuration Diagram)</span><a class="headerlink" href="#soadsocketremoteaddress" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 SoAdSocketConnectionGroup 容器( 此处是 SoAdSocketConnectionGroup_DOIP_TCP )，来指定传输层协议参数。</p>
<p>A new SoAdSocketConnectionGroup container needs to be added (here, SoAdSocketConnectionGroup_DOIP_TCP) to specify the transport layer protocol parameters.</p>
<p>需要新增一个 SoAdSocketConnection 容器( 此处是 SCGroup_DOIP_TCP0 )，来指定消息来源( 此处是 192.168.0.100 : 0 - 端口为 0，含义是将 从 192.168.0.100 收到的任意 TCP 消息都转发给 DoIP )。</p>
<p>A new SoAdSocketConnection container needs to be added (here, SCGroup_DOIP_TCP0) to specify the message source (here, 192.168.0.100:0 - a port of 0 means that any TCP message received from 192.168.0.100 will be forwarded to DoIP).</p>
</section>
</section>
<section id="doipsoadtcptxpdu">
<h5>DoIPSoAdTcpTxPdu<a class="headerlink" href="#doipsoadtcptxpdu" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="id4">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPSoAdTcpTxPdu.png" />
<figcaption>
<p><span class="caption-text">DoIPSoAdTcpTxPdu 配置示意图 (DoIPSoAdTcpTxPdu Configuration Diagram)</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="id5">
<h6>SoAd 中的相关配置 Related Configurations in SoAd<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h6>
<figure class="align-center" id="soadpduroute-tcp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdPduRoute_tcp.png" />
<figcaption>
<p><span class="caption-text">SoAdPduRoute 配置示意图 (SoAdPduRoute Configuration Diagram)</span><a class="headerlink" href="#soadpduroute-tcp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 SoAdPduRoute 容器( 此处是 SoAdPduRoute_DOIP_TCP0 )，来指定消息是 TCP 还是 UDP 类型，指定消息来源，指定将消息发送给哪个网络节点。</p>
<p>A new SoAdPduRoute container needs to be added (here, SoAdPduRoute_DOIP_TCP0) to specify whether the message is of TCP or UDP type, to specify the message source, and to specify which network node the message shall be sent to.</p>
<p>通过配置 SoAdTxPduRef( 此处是 SoAd_Tx ) 来指定消息来源于 DoIP。</p>
<p>The message source is specified as DoIP by configuring SoAdTxPduRef (here, SoAd_Tx).</p>
<p>通过配置 SoAdRxUpperLayerType( 此处配置为 TP，为 TCP 类型 ) 来指定消息类型。</p>
<p>The message type is specified by configuring SoAdRxUpperLayerType (here, configured as TP, for TCP type).</p>
<figure class="align-center" id="soadpduroutedest">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdPduRouteDest.png" />
<figcaption>
<p><span class="caption-text">SoAdPduRouteDest 配置示意图 (SoAdPduRouteDest Configuration Diagram)</span><a class="headerlink" href="#soadpduroutedest" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>通过配置 SoAdPduRouteDest 容器( 此处是 SoAdPduRouteDest_2 )的 SoAdTxSocketConnOrSocketConnBundleRef 参数( 此处是 SCGroup_DOIP_TCP0，所以此处配置的含义是将消息发送给 192.168.0.100 - 目的端口为接收消息时的源端口 )，来指定将消息发送给哪个网络节点。</p>
<p>The network node to which the message is sent is specified by configuring the SoAdTxSocketConnOrSocketConnBundleRef parameter of the SoAdPduRouteDest container (here, SoAdPduRouteDest_2) (here, SCGroup_DOIP_TCP0, so the configuration here means that the message will be sent to 192.168.0.100 - the destination port will be the source port of the received message).</p>
</section>
</section>
</section>
<section id="udp-udp-connection">
<h4>UDP 连接 UDP Connection<a class="headerlink" href="#udp-udp-connection" title="Link to this heading">¶</a></h4>
<section id="doipsoadudprxpdu">
<h5>DoIPSoAdUdpRxPdu<a class="headerlink" href="#doipsoadudprxpdu" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="id6">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPSoAdUdpRxPdu.png" />
<figcaption>
<p><span class="caption-text">DoIPSoAdUdpRxPdu 配置示意图 (DoIPSoAdUdpRxPdu Configuration Diagram)</span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="id7">
<h6>SoAd 中的相关配置 Related Configurations in SoAd<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h6>
<figure class="align-center" id="soadsocketroutedest-udp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketRouteDest_udp.png" />
</figure>
<p>需要新增一个 SoAdSocketRoute 容器( 此处是 SoAdSocketRoute_DOIP_UDP0 )，来指定消息是 TCP 还是 UDP 类型，指定消息来源，指定将消息传递给 DoIP 模块。</p>
<p>A new SoAdSocketRoute container needs to be added (here, SoAdSocketRoute_DOIP_UDP0) to specify whether the message is of TCP or UDP type, to specify the message source, and to specify that the message shall be passed to the DoIP module.</p>
<p>通过配置 SoAdSocketRouteDest 容器( 此处是 SoAdSocketRouteDest_4 )的 SoAdRxUpperLayerType 参数( 此处是 IF，为 UDP 类型 )来指定消息类型。</p>
<p>The message type is specified by configuring the SoAdRxUpperLayerType parameter of the SoAdSocketRouteDest container (here, SoAdSocketRouteDest_4) (here, IF, for UDP type).</p>
<p>通过配置 SoAdSocketRouteDest 容器( 此处是 SoAdSocketRouteDest_4 )的 SoAdRxPduRef 参数( 此处是 SoAd_Rx_Udp )来指定将收到的消息传递给 DoIP 模块。</p>
<p>Passing the received message to the DoIP module is specified by configuring the SoAdRxPduRef parameter of the SoAdSocketRouteDest container (here, SoAdSocketRouteDest_4) (here, SoAd_Rx_Udp).</p>
<figure class="align-center" id="soadsocketroute-udp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketRoute_udp.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketRoute 配置示意图 (SoAdSocketRoute Configuration Diagram)</span><a class="headerlink" href="#soadsocketroute-udp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>通过配置 SoAdSocketRoute 容器( 此处是 SoAdSocketRoute_DOIP_UDP0 )的 SoAdRxSocketConnOrSocketConnBundleRef 参数( 此处是 SCGroup_DOIP_UDP0 )指定消息来源。</p>
<p>The message source is specified by configuring the SoAdRxSocketConnOrSocketConnBundleRef parameter of the SoAdSocketRoute container (here, SoAdSocketRoute_DOIP_UDP0) (here, SCGroup_DOIP_UDP0).</p>
<figure class="align-center" id="soadsocketremoteaddress-udp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketRemoteAddress_udp.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketRemoteAddress 配置示意图 (SoAdSocketRemoteAddress Configuration Diagram)</span><a class="headerlink" href="#soadsocketremoteaddress-udp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 SoAdSocketConnectionGroup 容器( 此处是 SoAdSocketConnectionGroup_DOIP_UDP )，来指定传输层协议参数。</p>
<p>A new SoAdSocketConnectionGroup container needs to be added (here, SoAdSocketConnectionGroup_DOIP_UDP) to specify the transport layer protocol parameters.</p>
<p>需要新增一个 SoAdSocketConnection 容器( 此处是 SCGroup_DOIP_UDP0 )，来指定消息来源( 此处是 192.168.0.100 : 0 - 端口为 0，含义是将 从 192.168.0.100 收到的任意 UDP 消息都转发给 DoIP )。</p>
<p>A new SoAdSocketConnection container needs to be added (here, SCGroup_DOIP_UDP0) to specify the message source (here, 192.168.0.100:0 - a port of 0 means that any UDP message received from 192.168.0.100 will be forwarded to DoIP).</p>
</section>
</section>
<section id="doipsoadudptxpdu">
<h5>DoIPSoAdUdpTxPdu<a class="headerlink" href="#doipsoadudptxpdu" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="id8">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPSoAdUdpTxPdu.png" />
<figcaption>
<p><span class="caption-text">DoIPSoAdUdpTxPdu 配置示意图 (DoIPSoAdUdpTxPdu Configuration Diagram)</span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="id9">
<h6>SoAd 中的相关配置 Related Configurations in SoAd<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h6>
<figure class="align-center" id="soadpduroute-udp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdPduRoute_udp.png" />
<figcaption>
<p><span class="caption-text">SoAdPduRoute 配置示意图 (SoAdPduRoute Configuration Diagram)</span><a class="headerlink" href="#soadpduroute-udp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 SoAdPduRoute 容器( 此处是 SoAdPduRoute_DOIP_UDP0 )，来指定消息是 TCP 还是 UDP 类型，指定消息来源，指定将消息发送给哪个网络节点。</p>
<p>A new SoAdPduRoute container needs to be added (here, SoAdPduRoute_DOIP_UDP0) to specify whether the message is of TCP or UDP type, to specify the message source, and to specify which network node the message shall be sent to.</p>
<p>通过配置 SoAdTxPduRef( 此处是 SoAd_Tx_Udp ) 来指定消息来源于 DoIP。</p>
<p>The message source is specified as DoIP by configuring SoAdTxPduRef (here, SoAd_Tx_Udp).</p>
<p>通过配置 SoAdRxUpperLayerType( 此处配置为 IF，为 UDP 类型 ) 来指定消息类型。</p>
<p>The message type is specified by configuring SoAdRxUpperLayerType (here, configured as IF, for UDP type).</p>
<figure class="align-center" id="soadpduroutedest-udp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdPduRouteDest_udp.png" />
<figcaption>
<p><span class="caption-text">SoAdPduRouteDest 配置示意图 (SoAdPduRouteDest Configuration Diagram)</span><a class="headerlink" href="#soadpduroutedest-udp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>通过配置 SoAdPduRouteDest 容器( 此处是 SoAdPduRouteDest_4 )的 SoAdTxSocketConnOrSocketConnBundleRef 参数( 此处是 SCGroup_DOIP_UDP0，所以此处配置的含义是将消息发送给 192.168.0.100 - 目的端口为接收消息时的源端口 )，来指定将消息发送给哪个网络节点。</p>
<p>The network node to which the message is sent is specified by configuring the SoAdTxSocketConnOrSocketConnBundleRef parameter of the SoAdPduRouteDest container (here, SoAdPduRouteDest_4) (here, SCGroup_DOIP_UDP0, so the configuration here means that the message will be sent to 192.168.0.100 - the destination port will be the source port of the received message).</p>
</section>
</section>
</section>
<section id="announcement-announcement-connection">
<h4>announcement 连接 Announcement Connection<a class="headerlink" href="#announcement-announcement-connection" title="Link to this heading">¶</a></h4>
<section id="doipsoadudpvehicleannouncementtxpdu">
<h5>DoIPSoAdUdpVehicleAnnouncementTxPdu<a class="headerlink" href="#doipsoadudpvehicleannouncementtxpdu" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="id10">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPSoAdUdpVehicleAnnouncementTxPdu.png" />
<figcaption>
<p><span class="caption-text">DoIPSoAdUdpVehicleAnnouncementTxPdu 配置示意图 (DoIPSoAdUdpVehicleAnnouncementTxPdu Configuration Diagram)</span><a class="headerlink" href="#id10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="id11">
<h6>SoAd 中的相关配置 Related Configurations in SoAd<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h6>
<figure class="align-center" id="soadpduroute-anc">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdPduRoute_anc.png" />
<figcaption>
<p><span class="caption-text">SoAdPduRoute 配置示意图 (SoAdPduRoute Configuration Diagram)</span><a class="headerlink" href="#soadpduroute-anc" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 SoAdPduRoute 容器( 此处是 SoAdPduRoute_DOIP_UDP_MUTIL )，来指定消息是 TCP 还是 UDP 类型，指定消息来源，指定将消息发送给哪个网络节点。</p>
<p>A new SoAdPduRoute container needs to be added (here, SoAdPduRoute_DOIP_UDP_MUTIL) to specify whether the message is of TCP or UDP type, to specify the message source, and to specify which network node the message shall be sent to.</p>
<p>通过配置 SoAdTxPduRef( 此处是 SoAd_Tx_Udp_multi ) 来指定消息来源于 DoIP。</p>
<p>The message source is specified as DoIP by configuring SoAdTxPduRef (here, SoAd_Tx_Udp_multi).</p>
<p>通过配置 SoAdRxUpperLayerType( 此处配置为 IF，为 UDP 类型 ) 来指定消息类型。</p>
<p>The message type is specified by configuring SoAdRxUpperLayerType (here, configured as IF, for UDP type).</p>
<figure class="align-center" id="soadpduroutedest-anc">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdPduRouteDest_anc.png" />
<figcaption>
<p><span class="caption-text">SoAdPduRouteDest 配置示意图 (SoAdPduRouteDest Configuration Diagram)</span><a class="headerlink" href="#soadpduroutedest-anc" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>通过配置 SoAdPduRouteDest 容器( 此处是 SoAdPduRouteDest_6 )的 SoAdTxSocketConnOrSocketConnBundleRef 参数( 此处是 SCGroup_DOIP_UDP_MUTIL )来指定将消息发送给哪个网络节点。</p>
<p>The network node to which the message is sent is specified by configuring the SoAdTxSocketConnOrSocketConnBundleRef parameter of the SoAdPduRouteDest container (here, SoAdPduRouteDest_6) (here, SCGroup_DOIP_UDP_MUTIL).</p>
<figure class="align-center" id="soadsocketremoteaddress-anc">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketRemoteAddress_anc.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketRemoteAddress 配置示意图 (SoAdSocketRemoteAddress Configuration Diagram)</span><a class="headerlink" href="#soadsocketremoteaddress-anc" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要新增一个 SoAdSocketConnectionGroup 容器( 此处是 SoAdSocketConnectionGroup_DOIP_UDP )，来指定传输层协议参数。</p>
<p>A new SoAdSocketConnectionGroup container needs to be added (here, SoAdSocketConnectionGroup_DOIP_UDP) to specify the transport layer protocol parameters.</p>
<p>需要新增一个 SoAdSocketConnection 容器( 此处是 SCGroup_DOIP_UDP_MUTIL )，来指定目标网络节点( 此处是 255.255.255.255 : 13400，含义是将车辆公告消息以广播形式发送，目的端口是 13400 - 必须配置为 13400 )。</p>
<p>A new SoAdSocketConnection container needs to be added (here, SCGroup_DOIP_UDP_MUTIL) to specify the target network node (here, 255.255.255.255:13400, which means that the vehicle announcement message will be sent as a broadcast, and the destination port is 13400 - it must be configured to 13400).</p>
</section>
</section>
</section>
<section id="soad-additional-configurations-in-soad">
<h4>SoAd 中的额外配置 Additional Configurations in SoAd<a class="headerlink" href="#soad-additional-configurations-in-soad" title="Link to this heading">¶</a></h4>
<section id="id12">
<h5>TCP 连接 TCP Connection<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="soadsocketconnectiongroup">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketConnectionGroup.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketConnectionGroup 配置示意图 (SoAdSocketConnectionGroup Configuration Diagram)</span><a class="headerlink" href="#soadsocketconnectiongroup" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>必须将本地端口配置为 13400。</p>
<p>The local port must be configured to 13400.</p>
<figure class="align-center" id="soadsockettcp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketTcp.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketTcp 配置示意图 (SoAdSocketTcp Configuration Diagram)</span><a class="headerlink" href="#soadsockettcp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>需要勾选 SoAdSocketTcpNoDelay 选项，不使用 Nagle 算法。</p>
<p>The SoAdSocketTcpNoDelay option must be checked to disable the Nagle algorithm.</p>
</section>
<section id="udpannouncement-udp-and-announcement-connection">
<h5>UDP、announcement 连接 UDP and Announcement Connection<a class="headerlink" href="#udpannouncement-udp-and-announcement-connection" title="Link to this heading">¶</a></h5>
<figure class="align-center" id="soadsocketconnectiongroup-udp">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/SoAdSocketConnectionGroup_udp.png" />
<figcaption>
<p><span class="caption-text">SoAdSocketConnectionGroup 配置示意图 (SoAdSocketConnectionGroup Configuration Diagram)</span><a class="headerlink" href="#soadsocketconnectiongroup-udp" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>必须将本地端口配置为 13400。</p>
<p>The local port must be configured to 13400.</p>
</section>
</section>
</section>
<section id="id13">
<h3>路由激活 Routing Activation<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="doiproutingactivation">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/DoIPRoutingActivation.png" />
<figcaption>
<p><span class="caption-text">DoIPRoutingActivation 配置示意图 (DoIPRoutingActivation Configuration Diagram)</span><a class="headerlink" href="#doiproutingactivation" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>可让 DoIPTargetAddressRef 引用多个 TargetAddress( 在绿框处配置 )，来表示允许的路由激活范围。</p>
<p>DoIPTargetAddressRef can reference multiple TargetAddress (configured in the green box) to represent the allowed range for routing activation.</p>
</section>
<section id="client">
<h3>客户端 Client<a class="headerlink" href="#client" title="Link to this heading">¶</a></h3>
<p>指定允许与哪些客户端( 由 LA  标识 )通信。</p>
<p>Specifies which clients (identified by LA) are allowed to communicate.</p>
<figure class="align-center" id="tester">
<img alt="DoIP架构层次图 (DoIP Architecture Hierarchy Diagram)" src="../../../_images/tester.png" />
<figcaption>
<p><span class="caption-text">DoIPTester 配置示意图 (DoIPTester Configuration Diagram)</span><a class="headerlink" href="#tester" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>DoIPTesterSA 指定只允许与 LA 为 DoIPTesterSA 的客户端通信。可让 DoIPRoutingActivationRef 引用多个 DoIPRoutingActivation，来表示允许的路由激活范围。</p>
<p>DDoIPTesterSA specifies that communication is only allowed with the client whose LA is DoIPTesterSA. DoIPRoutingActivationRef can reference multiple DoIPRoutingActivation to represent the allowed range for routing activation.</p>
</section>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="../Dlt/Dlt.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>Dlt
    </a>
    <a class="float-right" href="../E2E/E2E.html" title="Next">
        E2E <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">DoIP</a><ul>
<li><a class="reference internal" href="#document-information">文档信息 Document Information</a><ul>
<li><a class="reference internal" href="#version-history">版本历史 Version History</a></li>
<li><a class="reference internal" href="#references">参考文档 References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terms-and-abbreviations">术语与简写 Terms and Abbreviations</a><ul>
<li><a class="reference internal" href="#terms">术语 Terms</a></li>
<li><a class="reference internal" href="#abbreviations">简写 Abbreviations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#introduction">简介 Introduction</a></li>
<li><a class="reference internal" href="#functional-description">功能描述 Functional Description</a><ul>
<li><a class="reference internal" href="#features">特性 Features</a><ul>
<li><a class="reference internal" href="#vehicle-identification">车辆发现 Vehicle Identification</a></li>
<li><a class="reference internal" href="#routing-activation">路由激活 Routing Activation</a></li>
<li><a class="reference internal" href="#alive-check">存活检查 Alive Check</a></li>
<li><a class="reference internal" href="#power-mode">电源模式 Power Mode</a></li>
<li><a class="reference internal" href="#entity-information">实体信息 Entity Information</a></li>
<li><a class="reference internal" href="#multi-core">多核 Multi-Core</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deviation">偏差 Deviation</a><ul>
<li><a class="reference internal" href="#doipinterface">DoIPInterface</a></li>
<li><a class="reference internal" href="#doiproutingactivationauthenticationcallback">DoIPRoutingActivationAuthenticationCallback</a></li>
<li><a class="reference internal" href="#doiproutingactivationconfirmationcallback">DoIPRoutingActivationConfirmationCallback</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extension">扩展 Extension</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integration">集成 Integration</a><ul>
<li><a class="reference internal" href="#file-list">文件列表 File List</a><ul>
<li><a class="reference internal" href="#static-files">静态文件 Static Files</a></li>
<li><a class="reference internal" href="#dynamic-files">动态文件 Dynamic Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling">错误处理 Error Handling</a><ul>
<li><a class="reference internal" href="#development-errors">开发错误 Development Errors</a></li>
<li><a class="reference internal" href="#product-errors">产品错误 Product Errors</a></li>
<li><a class="reference internal" href="#runtime-errors">运行时错误 Runtime Errors</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#interface-description">接口描述 Interface Description</a><ul>
<li><a class="reference internal" href="#type-definitions">类型定义 Type Definitions</a></li>
<li><a class="reference internal" href="#services">提供的服务 Services</a><ul>
<li><a class="reference internal" href="#doip-init">DoIP_Init</a></li>
<li><a class="reference internal" href="#doip-getversioninfo">DoIP_GetVersionInfo</a></li>
<li><a class="reference internal" href="#doip-activationlineswitch">DoIP_ActivationLineSwitch</a></li>
<li><a class="reference internal" href="#doip-tptransmit">DoIP_TpTransmit</a></li>
<li><a class="reference internal" href="#doip-tpcanceltransmit">DoIP_TpCancelTransmit</a></li>
<li><a class="reference internal" href="#doip-tpcancelreceive">DoIP_TpCancelReceive</a></li>
<li><a class="reference internal" href="#doip-iftransmit">DoIP_IfTransmit</a></li>
<li><a class="reference internal" href="#doip-ifcanceltransmit">DoIP_IfCancelTransmit</a></li>
<li><a class="reference internal" href="#doip-mainfunction">DoIP_MainFunction</a></li>
<li><a class="reference internal" href="#doip-mainfunction-highfrequency">DoIP_MainFunction_HighFrequency</a></li>
</ul>
</li>
<li><a class="reference internal" href="#callback-function">回调函数 Callback Function</a><ul>
<li><a class="reference internal" href="#doip-soadtpcopytxdata">DoIP_SoAdTpCopyTxData</a></li>
<li><a class="reference internal" href="#doip-soadtptxconfirmation">DoIP_SoAdTpTxConfirmation</a></li>
<li><a class="reference internal" href="#doip-soadtpcopyrxdata">DoIP_SoAdTpCopyRxData</a></li>
<li><a class="reference internal" href="#doip-soadtpstartofreception">DoIP_SoAdTpStartOfReception</a></li>
<li><a class="reference internal" href="#doip-soadtprxindication">DoIP_SoAdTpRxIndication</a></li>
<li><a class="reference internal" href="#doip-soadifrxindication">DoIP_SoAdIfRxIndication</a></li>
<li><a class="reference internal" href="#doip-soadiftxconfirmation">DoIP_SoAdIfTxConfirmation</a></li>
<li><a class="reference internal" href="#doip-soconmodechg">DoIP_SoConModeChg</a></li>
<li><a class="reference internal" href="#doip-localipaddrassignmentchg">DoIP_LocalIpAddrAssignmentChg</a></li>
</ul>
</li>
<li><a class="reference internal" href="#applicable-services">依赖的服务 Applicable Services</a><ul>
<li><a class="reference internal" href="#compulsory-interface">强制接口 Compulsory interface</a></li>
<li><a class="reference internal" href="#optional-interface">可选接口 Optional Interface</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">配置 Configuration</a><ul>
<li><a class="reference internal" href="#paylaod-allowed-payload-field-length">允许的 paylaod 字段长度 Allowed Payload Field Length</a></li>
<li><a class="reference internal" href="#gidlaeid">GID、LA、EID</a></li>
<li><a class="reference internal" href="#allowed-number-of-client-connections">允许连接的客户端数量 Allowed Number of Client Connections</a></li>
<li><a class="reference internal" href="#channel">通道 Channel</a><ul>
<li><a class="reference internal" href="#pdur-related-configurations-in-pdur">PduR 中的相关配置 Related Configurations in PduR</a><ul>
<li><a class="reference internal" href="#pdursrcpdu-pdursrcpdu-configuration">PduRSrcPdu 配置 PduRSrcPdu Configuration</a></li>
<li><a class="reference internal" href="#pdurdestpdu-pdurdestpdu-configuration">PduRDestPdu 配置 PduRDestPdu Configuration</a></li>
<li><a class="reference internal" href="#pdurroutingpath-pdurroutingpath-configuration">PduRRoutingPath 配置 PduRRoutingPath Configuration</a><ul>
<li><a class="reference internal" href="#receiving-link">接收链路 Receiving Link</a></li>
<li><a class="reference internal" href="#sending-link">发送链路 Sending Link</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#physical-and-functional-addressing">物理寻址、功能寻址 Physical and Functional Addressing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connection">连接 Connection</a><ul>
<li><a class="reference internal" href="#tcp-tcp-connection">TCP 连接 TCP Connection</a><ul>
<li><a class="reference internal" href="#doipsoadtcprxpdu">DoIPSoAdTcpRxPdu</a><ul>
<li><a class="reference internal" href="#soad-related-configurations-in-soad">SoAd 中的相关配置 Related Configurations in SoAd</a></li>
</ul>
</li>
<li><a class="reference internal" href="#doipsoadtcptxpdu">DoIPSoAdTcpTxPdu</a><ul>
<li><a class="reference internal" href="#id5">SoAd 中的相关配置 Related Configurations in SoAd</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#udp-udp-connection">UDP 连接 UDP Connection</a><ul>
<li><a class="reference internal" href="#doipsoadudprxpdu">DoIPSoAdUdpRxPdu</a><ul>
<li><a class="reference internal" href="#id7">SoAd 中的相关配置 Related Configurations in SoAd</a></li>
</ul>
</li>
<li><a class="reference internal" href="#doipsoadudptxpdu">DoIPSoAdUdpTxPdu</a><ul>
<li><a class="reference internal" href="#id9">SoAd 中的相关配置 Related Configurations in SoAd</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#announcement-announcement-connection">announcement 连接 Announcement Connection</a><ul>
<li><a class="reference internal" href="#doipsoadudpvehicleannouncementtxpdu">DoIPSoAdUdpVehicleAnnouncementTxPdu</a><ul>
<li><a class="reference internal" href="#id11">SoAd 中的相关配置 Related Configurations in SoAd</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#soad-additional-configurations-in-soad">SoAd 中的额外配置 Additional Configurations in SoAd</a><ul>
<li><a class="reference internal" href="#id12">TCP 连接 TCP Connection</a></li>
<li><a class="reference internal" href="#udpannouncement-udp-and-announcement-connection">UDP、announcement 连接 UDP and Announcement Connection</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id13">路由激活 Routing Activation</a></li>
<li><a class="reference internal" href="#client">客户端 Client</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>