<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Hook Functions &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanSM/CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoIP/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EcuM/EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSM/EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StbM/StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Hook Functions</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/Os/08_hook_func_api.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="hook-functions">
<h1>Hook Functions<a class="headerlink" href="#hook-functions" title="Link to this heading">¶</a></h1>
<p>ORIENTAIS OS为用户提供了一系列钩子函数功能（Hook）。例如在钩子函数StartupHook中初始化一些硬件，在钩子函数ErrorHook中捕获并处理的一些错误。</p>
<p>ORIENTAIS OS provides users with a series of hook function features (Hook). For example, some hardware can be initialized in the hook function StartupHook, and some errors can be captured and handled in the hook function ErrorHook.</p>
<section id="errorhook">
<h2>ErrorHook<a class="headerlink" href="#errorhook" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ErrorHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>The specific error hook is called whenever a Task or ISR calls system service to cause an error.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">ActivateTask</span><span class="p">(</span><span class="n">OS_TASK_INVALID</span><span class="p">);</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="o">*/</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span> <span class="p">:</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ID</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">ErrorHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span> <span class="o">*/</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_ID</span> <span class="o">==</span> <span class="n">Error</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="o">......</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>执行错误处理。该接口由用户实现错误处理，并由ORIENTAIS OS调用。</p>
<p>Executes error handling. This interface is implemented by the user for error handling and called by ORIENTAIS OS.</p>
</li>
<li><p>用户可以通过输入参数&lt; Error &gt;的值来了解错误类型。</p>
<p>Users can learn about the error type through the value of the input parameter &lt; Error &gt;.</p>
</li>
</ul>
</div>
</section>
<section id="posttaskhook">
<h2>PostTaskHook<a class="headerlink" href="#posttaskhook" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">PostTaskHook</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by ORIENTAIS OS after executing the current task, but before leaving the task’s running state (to allow evaluation of the TaskID by GetTaskID).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>

<span class="n">TerminateTask</span><span class="p">();</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="n">TerminateTask</span><span class="p">,</span> <span class="n">ChainTask</span><span class="p">,</span> <span class="n">WaitEvent</span> <span class="ow">and</span> <span class="n">Schedule</span> <span class="n">can</span> <span class="n">make</span> <span class="n">OS</span> <span class="n">scheduling</span><span class="o">.*/</span>
<span class="o">/*</span> <span class="n">If</span> <span class="n">a</span> <span class="n">task</span> <span class="ow">is</span> <span class="n">terminated</span><span class="p">,</span> <span class="n">the</span> <span class="n">PostTaskHook</span> <span class="n">shall</span> <span class="n">be</span> <span class="n">triggered</span><span class="o">.*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">PostTaskHook</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="n">TaskType</span> <span class="n">taskid</span><span class="p">;</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span> <span class="o">*/</span>
<span class="n">GetTaskID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">taskid</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">taskid</span> <span class="o">=</span> <span class="n">OS_TASK_INVALID</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="pretaskhook">
<h2>PreTaskHook<a class="headerlink" href="#pretaskhook" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">PreTaskHook</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by ORIENTAIS OS before executing a new task, but after the transition of the task to the running state (to allow evaluation of the TaskID by GetTaskID.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="n">Before</span> <span class="n">a</span> <span class="n">task</span> <span class="n">execult</span><span class="p">,</span> <span class="n">the</span> <span class="n">PreTaskHook</span> <span class="n">shall</span> <span class="n">be</span> <span class="n">triggered</span><span class="o">.*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TaskType</span> <span class="n">taskid</span><span class="p">;</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span> <span class="o">*/</span>
<span class="n">GetTaskID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">taskid</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">taskid</span> <span class="o">=</span> <span class="n">Task0</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">PreTaskHook</span><span class="p">()</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="startuphook">
<h2>StartupHook<a class="headerlink" href="#startuphook" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StartupHook</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by the operating system at the end of the operating system in itialisation and before the scheduler is running. At this time the applicationcan initialise device drivers etc.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">......</span>
  <span class="n">StartOS</span><span class="p">(</span><span class="n">OSDEFAULTAPPMODE</span><span class="p">);</span> <span class="o">/*</span><span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">3</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
<span class="n">void</span> <span class="n">StartupHook</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="shutdownhook">
<h2>ShutdownHook<a class="headerlink" href="#shutdownhook" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ShutdownHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by the operating system when the OS service ShutdownOS has been called. This routine is called during the operating system shutdown.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">ShutdownOS</span><span class="p">(</span><span class="n">E_OK</span><span class="p">);</span> <span class="o">/*</span><span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
<span class="o">/*</span> <span class="n">Won</span><span class="s1">&#39;t execute here.*/</span>
<span class="o">/*</span> <span class="n">If</span> <span class="n">user</span> <span class="n">calls</span> <span class="n">ShutdownAllCores</span> <span class="ow">in</span> <span class="n">mutil</span><span class="o">-</span><span class="n">core</span><span class="p">,</span> <span class="n">a</span> <span class="n">similar</span> <span class="n">situation</span> <span class="n">shall</span> <span class="n">happen</span> <span class="ow">in</span> <span class="n">every</span> <span class="n">core</span><span class="o">.</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">ShutdownHook</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="protectionhook">
<h2>ProtectionHook<a class="headerlink" href="#protectionhook" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ProtectionReturnType</span> <span class="n">ProtectionHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Fatalerror</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by the operating system when the OS service protection functions.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Fatalerror</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>ProtectionReturnType</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span> <span class="n">Non</span><span class="o">-</span><span class="n">Trusted</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
      <span class="n">TimingProtection</span><span class="p">:</span> <span class="n">ExecutionBudget</span><span class="p">:</span><span class="mf">0.005</span>
<span class="n">uint8</span> <span class="n">var</span><span class="p">;</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="n">TerminateTask</span><span class="p">();</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">Invalid</span> <span class="n">Calling</span><span class="p">,</span> <span class="n">It</span> <span class="n">triggers</span> <span class="n">E_OS_SPINLOCK</span> <span class="n">error</span><span class="o">.*/</span>
  <span class="n">var</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">/*</span> <span class="n">Writing</span> <span class="k">global</span> <span class="n">variable</span> <span class="n">to</span> <span class="n">trigger</span> <span class="n">the</span> <span class="n">memory</span> <span class="n">protection</span><span class="o">*/</span>
  <span class="n">DelayMs</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>  <span class="o">/*</span> <span class="n">Execution</span> <span class="n">time</span> <span class="n">out</span> <span class="n">to</span> <span class="n">trigger</span> <span class="n">the</span> <span class="n">timing</span> <span class="n">protection</span><span class="o">*/</span>
<span class="p">}</span>

<span class="n">ProtectionReturnType</span> <span class="n">ProtectionHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Fatalerror</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="n">ProtectionReturnType</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_IGNORE</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_SPINLOCK</span> <span class="o">==</span> <span class="n">Fatalerror</span><span class="p">)</span>
  <span class="p">{</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_TERMINATETASKISR</span><span class="p">;</span>
<span class="o">/*</span><span class="n">Return</span> <span class="k">with</span> <span class="n">PRO_TERMINATETASKISR</span><span class="o">.</span>
<span class="n">The</span> <span class="n">fault</span> <span class="n">task</span><span class="o">/</span><span class="n">isr</span> <span class="n">shall</span> <span class="n">be</span> <span class="n">terminated</span><span class="o">.*/</span>
  <span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_PROTECTION_MEMORY</span> <span class="o">==</span> <span class="n">Fatalerror</span><span class="p">)</span>
  <span class="p">{</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_SHUTDOWN</span><span class="p">;</span>
<span class="o">/*</span><span class="n">Return</span> <span class="k">with</span> <span class="n">PRO_SHUTDOWN</span><span class="o">.</span>
<span class="n">The</span> <span class="n">OS</span> <span class="n">shall</span> <span class="n">shutdown</span><span class="o">.*/</span>
  <span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_PROTECTION_TIME</span> <span class="o">==</span> <span class="n">Fatalerror</span><span class="p">)</span>
  <span class="p">{</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_TERMINATEAPPL_RESTART</span><span class="p">;</span>
<span class="o">/*</span><span class="n">Return</span> <span class="k">with</span> <span class="n">PRO_TERMINATEAPPL_RESTART</span><span class="o">.</span>
<span class="n">The</span> <span class="n">fault</span> <span class="n">application</span> <span class="n">shall</span> <span class="n">restart</span><span class="o">.*/</span>
  <span class="p">}</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现错误处理，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user for error handling and called by ORIENTAIS OS.</p>
</li>
<li><p>用户可以通过返回值来选择五种处理方式中的一种处理。</p>
<p>Users can select one of the five processing methods through the return value.</p>
</li>
</ul>
</div>
</section>
<section id="idlehook-core-n">
<h2>IdleHook_Core&lt;n&gt;<a class="headerlink" href="#idlehook-core-n" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">IdleHook_Core</span><span class="o">&lt;</span><span class="n">n</span><span class="o">&gt;</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This HOOK is called when ORIENTAIS OS enters an idle task.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
<li><p>如果没有正在运行的任务/中断，则调用此接口。</p>
<p>This interface is called if there is no running task/interrupt.</p>
</li>
</ul>
</div>
</section>
<section id="errorhook-applicationname">
<h2>ErrorHook_&lt;ApplicationName&gt;<a class="headerlink" href="#errorhook-applicationname" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ErrorHook_</span><span class="o">&lt;</span><span class="n">ApplicationName</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>This HOOK is called when ORIENTAIS OS enters an idle task.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="startuphook-applicationname">
<h2>StartupHook_&lt;ApplicationName&gt;<a class="headerlink" href="#startuphook-applicationname" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StartupHook_</span><span class="o">&lt;</span><span class="n">ApplicationName</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>When a specific application has the startup hook function enabled, ORIENTAIS OS calls this function when that application starts.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="shutdownhook-applicationname">
<h2>ShutdownHook_&lt;ApplicationName&gt;<a class="headerlink" href="#shutdownhook-applicationname" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ShutdownHook_</span><span class="o">&lt;</span><span class="n">ApplicationName</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">StatusType</span> <span class="n">Fatalerror</span><span class="p">)</span>
</pre></div>
</div>
<p>When a specific application has the shutdown hook function enabled, ORIENTAIS OS calls this hook function when that application is being shut down.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Fatalerror</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
</section>

</main>
                        
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Hook Functions</a><ul>
<li><a class="reference internal" href="#errorhook">ErrorHook</a></li>
<li><a class="reference internal" href="#posttaskhook">PostTaskHook</a></li>
<li><a class="reference internal" href="#pretaskhook">PreTaskHook</a></li>
<li><a class="reference internal" href="#startuphook">StartupHook</a></li>
<li><a class="reference internal" href="#shutdownhook">ShutdownHook</a></li>
<li><a class="reference internal" href="#protectionhook">ProtectionHook</a></li>
<li><a class="reference internal" href="#idlehook-core-n">IdleHook_Core&lt;n&gt;</a></li>
<li><a class="reference internal" href="#errorhook-applicationname">ErrorHook_&lt;ApplicationName&gt;</a></li>
<li><a class="reference internal" href="#startuphook-applicationname">StartupHook_&lt;ApplicationName&gt;</a></li>
<li><a class="reference internal" href="#shutdownhook-applicationname">ShutdownHook_&lt;ApplicationName&gt;</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>