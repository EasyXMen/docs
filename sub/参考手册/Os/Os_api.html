<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>接口描述（Interface Description） &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanSM/CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoIP/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EcuM/EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSM/EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StbM/StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">接口描述（Interface Description）</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/Os/Os_api.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="interface-description">
<h1>接口描述（Interface Description）<a class="headerlink" href="#interface-description" title="Link to this heading">¶</a></h1>
<section id="task-functions">
<h2>Task Functions<a class="headerlink" href="#task-functions" title="Link to this heading">¶</a></h2>
<p>ORIENTAIS OS提供两种类型的任务:</p>
<p>The ORIENTAIS OS provides two types of tasks:</p>
<ul class="simple">
<li><p>基本任务（Basic Task）</p></li>
<li><p>拓展任务（Extended Task）</p></li>
</ul>
<p>拓展任务与基本任务的区别是，拓展任务允许使用系统服务WaitEvent，这可能会使任务进入Waiting状态。</p>
<p>The difference between an Extended Task and a Basic Task is that the Extended Task is allowed to use the system service WaitEvent, which may cause the task to enter the Waiting state.</p>
<figure class="align-center" id="id1">
<img alt="Basic Task State Model" src="../../../_images/Basic_Task_State_Model.png" />
<figcaption>
<p><span class="caption-text">基本任务状态模型（Basic Task State Model）</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 14.3%" />
<col style="width: 14.3%" />
<col style="width: 14.3%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>过度（Transition）</p></th>
<th class="head"><p>历史状态（Previous State）</p></th>
<th class="head"><p>新状态（New State）</p></th>
<th class="head"><p>描述（Description）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>activate</strong></p></td>
<td><p>suspended</p></td>
<td><p>ready</p></td>
<td><p>系统服务将新任务设置为就绪状态。ORIENTAIS OS确保任务的执行将从第一条指令开始。</p>
<p>The system service sets the new task to the Ready state. ORIENTAIS OS ensures that the task execution starts from the first instruction.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>start</strong></p></td>
<td><p>ready</p></td>
<td><p>running</p></td>
<td><p>执行调度器选择的就绪任务。</p>
<p>Execute the ready task selected by the scheduler.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>preempt</strong></p></td>
<td><p>running</p></td>
<td><p>ready</p></td>
<td><p>调度程序尝试启动另一个任务。正在运行的任务变为就绪状态。（通常是在低优先级任务的运行过程中，激活或者释放更高优先级任务）</p>
<p>The scheduler attempts to start another task. The currently running task transitions to the Ready state. (Typically, this occurs when a higher-priority task is activated or released during the execution of a lower-priority task)</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>terminate</strong></p></td>
<td><p>running</p></td>
<td><p>suspended</p></td>
<td><p>正在运行的任务通过系统服务使其转变为挂起状态。</p>
<p>The running task transitions to the Suspended state via a system service.</p>
</td>
</tr>
</tbody>
</table>
<figure class="align-center" id="id2">
<img alt="Extend Task State Model" src="../../../_images/Extend_Task_State_Model.png" />
<figcaption>
<p><span class="caption-text">拓展任务状态模型（Extended Task State Model）</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 14.3%" />
<col style="width: 14.3%" />
<col style="width: 14.3%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>过度（Transition）</p></th>
<th class="head"><p>历史状态（Previous State）</p></th>
<th class="head"><p>新状态（New State）</p></th>
<th class="head"><p>描述（Description）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>activate</strong></p></td>
<td><p>suspended</p></td>
<td><p>ready</p></td>
<td><p>系统服务将新任务设置为就绪状态。ORIENTAIS OS确保任务的执行将从第一条指令开始。</p>
<p>The system service sets the new task to the Ready state. ORIENTAIS OS ensures that the task execution starts from the first instruction.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>start</strong></p></td>
<td><p>ready</p></td>
<td><p>running</p></td>
<td><p>执行调度器选择的就绪任务。</p>
<p>Execute the ready task selected by the scheduler.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>wait</strong></p></td>
<td><p>running</p></td>
<td><p>waiting</p></td>
<td><p>过渡到等待状态是由系统服务引起的（例如：WaitEvent）。为了任务能够继续运行，需要为该任务设置一个它所等待的事件。</p>
<p>The transition to the Waiting state is triggered by a system service (e.g., WaitEvent). For the task to resume running, an event that the task is waiting for must be set for it.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>release</strong></p></td>
<td><p>waiting</p></td>
<td><p>ready</p></td>
<td><p>设置至少一个任务等待的事件。</p>
<p>Set at least one event that the task is waiting for.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>preempt</strong></p></td>
<td><p>running</p></td>
<td><p>ready</p></td>
<td><p>调度程序尝试启动另一个任务。正在运行的任务变为就绪状态。（通常是在低优先级任务的运行过程中，激活或者释放更高优先级任务）</p>
<p>The scheduler attempts to start another task. The currently running task transitions to the Ready state. (Typically, this happens when a higher-priority task is activated or released during the execution of a lower-priority task)</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>terminate</strong></p></td>
<td><p>running</p></td>
<td><p>suspended</p></td>
<td><p>正在运行的任务通过系统服务使其转变为挂起状态。</p>
<p>The running task transitions to the Suspended state through a system service.</p>
</td>
</tr>
</tbody>
</table>
<section id="activatetask">
<h3>ActivateTask<a class="headerlink" href="#activatetask" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ActivateTask</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">)</span>
</pre></div>
</div>
<p>The task&lt;TaskID&gt; is transferred from the suspended state into the ready state.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_LIMIT</p></td>
<td><p>The number of activations has exceeded the limit.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>Application state error/ No access to this object.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Example.1
TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True

TASK(TaskInit)
{
    StatusType ret;
ret = ActivateTask(Task0);
/* If the priority of Task0 is greater than TaskInit&#39;s, the ActivateTask is don&#39;t return directly, and Task0 start to execute. If not, ActivateTask return ‘E_OK’ and program execution continues*/
......
}

Example.2
TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True
Task0: Priority:1, Preemptive Policy:FULL, Activation Limit:1

TASK(TaskInit)
{
    StatusType ret;
ret = ActivateTask(Task0);
/* ret = E_OK*/
ret = ActivateTask(Task0);
/* ret = E_OS_LIMIT */
......
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>如果有多个激活请求，ActivateTask不会立即更改任务状态。如果任务不为挂起状态，任务的激活次数将被记录，并在之后执行激活。</p>
<p>If there are multiple activation requests, ActivateTask will not change the task state immediately. If the task is not in the Suspended state, the number of activation times of the task will be recorded and the activation will be executed later.</p>
</li>
<li><p>ActivateTask激活一个与运行中的任务拥有相同内部资源的任务，该任务不会直接执行。</p>
<p>ActivateTask activates a task that shares the same internal resources as the running task, and this task will not be executed directly.</p>
</li>
<li><p>激活任务后，激活计数将增加。如果激活计数超过配置的计数值，那么本次ActivateTask的调用无效。</p>
<p>After the task is activated, the activation count will increase. If the activation count exceeds the configured count value, the current call to ActivateTask will be invalid.</p>
</li>
</ul>
</div>
</section>
<section id="terminatetask">
<h3>TerminateTask<a class="headerlink" href="#terminatetask" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">TerminateTask</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service causes the termination of the calling task. The calling task is transferred from the running state into the suspended state.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>this</p></td>
<td><p>function does not return in correct case</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_RESOURCE</p></td>
<td><p>Resources are still occupied by tasks</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_SPINLOCK</p></td>
<td><p>Spinlock are still occupied by tasks</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>OsResource: Type:INTERNAL
TaskInit: Priority:1, Preemptive Policy:FULL, Resource:OsResource, Autostart:True
Task0: Priority:2, Preemptive Policy:FULL
Task1: Priority:3, Preemptive Policy:FULL, Resource:OsResource

TASK(TaskInit)
{
  /*user code*/
  ActivateTask(Task1);
/* TaskInit and Task1 own same internal resource OsResource, therefore Task1 don’t preempt TaskInit. */
  ChainTask(Task0);
/*Task0 is activated. ChainTask release TaskInit’s internal resource, therefore Task1 executes firstly due to the highest priority, then Task0 executes. */
  ......
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>严格禁止在未调用TerminateTask或ChainTask的情况下结束任务功能（请勿使用“ return”），并且可能会使系统处于不确定状态。</p>
<p>It is strictly prohibited to terminate a task function without calling TerminateTask or ChainTask (do not use “return”), as this may leave the system in an undefined state.</p>
</li>
<li><p>任务必须释放占用的标准资源后才能使用该服务。</p>
<p>A task must release the standard resources it occupies before using this service.</p>
</li>
</ul>
</div>
</section>
<section id="chaintask">
<h3>ChainTask<a class="headerlink" href="#chaintask" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ChainTask</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service causes the termination of the calling task. After termination of the calling task a succeeding task &lt;TaskID&gt; is activated.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>this</p></td>
<td><p>function does not return in correct case</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_LIMIT</p></td>
<td><p>The number of activations has exceeded the limit</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_RESOURCE</p></td>
<td><p>Resources are still occupied by tasks</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_SPINLOCK</p></td>
<td><p>Spinlock are still occupied by tasks</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>Application state error/ No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>OsResource: Type:INTERNAL
TaskInit: Priority:1, Preemptive Policy:FULL, Resource:OsResource, Autostart:True
Task0: Priority:2, Preemptive Policy:FULL
Task1: Priority:3, Preemptive Policy:FULL, Resource:OsResource

TASK(TaskInit)
{
  /*user code*/
  ActivateTask(Task1);
/* TaskInit and Task1 own same internal resource OsResource, therefore Task1 don’t preempt TaskInit. */
  ChainTask(Task0);
/*Task0 is activated. ChainTask release TaskInit’s internal resource, therefore Task1 executes firstly due to the highest priority, then Task0 executes. */
  ......
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>如果后续任务与当前任务相同，则不会导致多个请求。任务不会转移到挂起状态，但是会立即再次准备就绪。</p>
<p>If the subsequent task is the same as the current task, it will not result in multiple requests. The task will not transition to the Suspended state, but will immediately become Ready again.</p>
</li>
<li><p>即使后续任务与当前任务相同，分配给调用任务的内部资源也会自动释放。</p>
<p>Even if the subsequent task is the same as the current task, the internal resources allocated to the calling task will be automatically released.</p>
</li>
<li><p>调用任务所占用的非内部资源应在调用ChainTask之前释放。</p>
<p>The non-internal resources occupied by the calling task should be released before calling ChainTask.</p>
</li>
<li><p>激活任务后，计数将增加。如果激活计数超过配置的计数，本次ChainTask调用无效。</p>
<p>After the task is activated, the count will increase. If the activation count exceeds the configured count, the current call to ChainTask will be invalid.</p>
</li>
</ul>
</div>
</section>
<section id="schedule">
<h3>Schedule<a class="headerlink" href="#schedule" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">Schedule</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>If a higher-priority task is ready , the internal resource of the task is released, the current task is put into the ready state, its context is saved and the highe r-priority task is executed. Otherwise the calling task is continued.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_RESOURCE</p></td>
<td><p>Resources are still occupied by tasks</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_SPINLOCK</p></td>
<td><p>Spinlock are still occupied by tasks</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>OsResource: Type:INTERNAL
TaskInit: Priority:1, Preemptive Policy:FULL, Resource:OsResource, Autostart:True
Task1: Priority:3, Preemptive Policy:FULL, Resource:OsResource

TASK(TaskInit)
{
  /*user code*/
  ActivateTask(Task1);
/* TaskInit and Task1 own same internal resource OsResource, therefore Task1 don’t preempt TaskInit. */
  Schedule();
/* Schedule release TaskInit’s internal resource, therefore Task1 executes. */
  ......
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该服务对分配了内部资源的任务有影响。</p>
<p>This service has an impact on tasks allocated with internal resources.</p>
</li>
<li><p>任务必须释放占用的非内部资源后才能调用。</p>
<p>The task must release the occupied non-internal resources before calling this service.</p>
</li>
</ul>
</div>
</section>
<section id="gettaskid">
<h3>GetTaskID<a class="headerlink" href="#gettaskid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetTaskID</span><span class="p">(</span><span class="n">TaskRefType</span> <span class="n">TaskID</span><span class="p">)</span>
</pre></div>
</div>
<p>GetTaskID returns the information about the TaskID of the task which is currently running.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">ISR_0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">101</span><span class="p">,</span> <span class="n">Category</span><span class="p">:</span><span class="n">CATEGORY_2</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">TaskType</span> <span class="n">taskid</span><span class="p">;</span>
  <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">taskid</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span> <span class="p">,</span> <span class="n">taskid</span> <span class="o">=</span> <span class="n">TaskInit</span> <span class="o">*/</span>
  <span class="o">/*</span> <span class="n">trigger</span> <span class="n">interrupt</span> <span class="n">ISR_0</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">ISR</span><span class="p">(</span><span class="n">ISR_0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TaskType</span> <span class="n">taskid</span><span class="p">;</span>
  <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">taskid</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span> <span class="p">,</span> <span class="n">taskid</span> <span class="o">=</span> <span class="n">TaskInit</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>当没有任务在运行时，“ TaskID”的值为INVALID_TASK。</p>
<p>When no task is running, the value of “TaskID” is INVALID_TASK.</p>
</li>
</ul>
</div>
</section>
<section id="gettaskstate">
<h3>GetTaskState<a class="headerlink" href="#gettaskstate" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">,</span> <span class="n">TaskStateRefType</span> <span class="n">State</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns the state of a task (running, ready, waiting, suspended)at the time of calling GetTaskState.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>State</p></td>
<td><p>Status of the task</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>Application state error/ No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-odd"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span>
<span class="n">Task1</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span>
<span class="n">Task2</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Event</span><span class="p">:</span> <span class="n">Event_0</span>
<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TaskStateType</span> <span class="n">taskstate</span><span class="p">;</span>
  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task2</span><span class="p">);</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="o">/*</span> <span class="n">step4</span><span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">,</span><span class="o">&amp;</span><span class="n">taskstate</span><span class="p">);</span><span class="o">/*</span><span class="n">taskstate</span> <span class="o">=</span> <span class="n">TASK_STATE_READY</span><span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">Task0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">taskstate</span><span class="p">);</span> <span class="o">/*</span><span class="n">taskstate</span> <span class="o">=</span> <span class="n">TASK_STATE_RUNNING</span><span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">Task1</span><span class="p">,</span><span class="o">&amp;</span><span class="n">taskstate</span><span class="p">);</span><span class="o">/*</span><span class="n">taskstate</span> <span class="o">=</span> <span class="n">TASK_STATE_SUSPENDED</span><span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">Task2</span><span class="p">,</span><span class="o">&amp;</span><span class="n">taskstate</span><span class="p">);</span> <span class="o">/*</span><span class="n">taskstate</span> <span class="o">=</span> <span class="n">TASK_STATE_WAITING</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
<span class="n">TASK</span><span class="p">(</span><span class="n">Task2</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">WaitEvent</span><span class="p">(</span><span class="n">Event_0</span><span class="p">);</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在完全抢占式系统中从任务进行调用时，返回时结果可能已经不正确。</p>
<p>When invoking from a task in a fully preemptive system, the result may no longer be correct upon return.</p>
</li>
<li><p>如果为某个任务（多次激活）调用服务，则如果该任务的任何实例正在运行，则状态将设置为“正在运行”。</p>
<p>If the service is called for a specific task (with multiple activations), the status will be set to “Running” if any instance of that task is currently running.</p>
</li>
</ul>
</div>
</section>
<section id="activatetaskasyn">
<h3>ActivateTaskAsyn<a class="headerlink" href="#activatetaskasyn" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ActivateTaskAsyn</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">)</span>
</pre></div>
</div>
<p>Asynchronous version of the</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_LIMIT</p></td>
<td><p>The number of activations has exceeded the limit</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>Application state error/ No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C0_TaskInit</span><span class="p">(</span><span class="n">Core0</span><span class="p">):</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">C1_Task0</span><span class="p">(</span><span class="n">Core0</span><span class="p">):</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">C0_TaskInit</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">ActivateTaskAsyn</span> <span class="p">(</span><span class="n">C1_Task0</span><span class="p">);</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>如果待激活的任务与当前任务不在同一个核，ActivateTaskAsyn()采用异步的方式激活该任务。</p>
<p>If the task to be activated is not on the same core as the current task, ActivateTaskAsyn() activates the task in an asynchronous manner.</p>
</li>
</ul>
</div>
</section>
</section>
<section id="interrupt-functions">
<h2>Interrupt Functions<a class="headerlink" href="#interrupt-functions" title="Link to this heading">¶</a></h2>
<p>处理中断的函数（中断服务程序：ISR）分为两类中断：</p>
<p>Functions that handle interrupts (Interrupt Service Routines: ISRs) are divided into two types of interrupts:</p>
<blockquote>
<div><ul>
<li><p>1类中断: 此类中断不使用操作系统服务。中断结束后，程序将在发生中断位置继续执行，即中断对任务管理没有影响。此类别的中断具有最小的开销。</p>
<p>Type 1 Interrupts: This type of interrupt does not use operating system services. After the interrupt ends, the program will continue execution from the location where the interrupt occurred, meaning the interrupt has no impact on task management. Interrupts of this type have minimal overhead.</p>
</li>
<li><p>2类中断: Os提供一个中断框架，为特定的用户程序提供运行环境。这类中断能够使用Os的系统服务。</p>
<p>Type 2 Interrupts: The Os provides an interrupt framework that offers a runtime environment for specific user programs. This type of interrupt can use the system services of the Os.</p>
</li>
</ul>
</div></blockquote>
<figure class="align-center" id="id3">
<img alt="ORIENTAIS OS的ISR类别" src="../../../_images/ISR%E7%B1%BB%E5%88%AB.png" />
<figcaption>
<p><span class="caption-text">ORIENTAIS OS的ISR类别（ISR Types of ORIENTAIS OS）</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="enableallinterrupts">
<h3>EnableAllInterrupts<a class="headerlink" href="#enableallinterrupts" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">EnableAllInterrupts</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service restores the state saved by DisableAllInterrupts.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">DisableAllInterrupts</span><span class="p">();</span>
  <span class="o">/*</span><span class="n">user</span> <span class="n">action</span> <span class="k">except</span> <span class="n">system</span> <span class="n">service</span><span class="o">*/</span>
  <span class="n">EnableAllInterrupts</span><span class="p">();</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该服务与DisableAllInterrupts服务相对应，后者必须在之前被调用，其目的是保障代码临界区的完整性。</p>
<p>This service corresponds to the DisableAllInterrupts service, which must have been called beforehand to ensure the integrity of the code critical section.</p>
</li>
</ul>
</div>
</section>
<section id="disableallinterrupts">
<h3>DisableAllInterrupts<a class="headerlink" href="#disableallinterrupts" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">DisableAllInterrupts</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service disables all interrupts for which the hardware supports disabling. The state before is saved for the EnableAllInterrupts call.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>主要用于某些不能使用ORIENTAIS OS API的临界段。</p>
<p>It is mainly used for certain critical sections where the ORIENTAIS OS API cannot be used.</p>
</li>
</ul>
</div>
</section>
<section id="resumeallinterrupts">
<h3>ResumeAllInterrupts<a class="headerlink" href="#resumeallinterrupts" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ResumeAllInterrupts</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service restores t he recognition status of all interrupts saved by the SuspendAllInterrupts service.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">void</span> <span class="n">function_0</span><span class="p">()</span>
<span class="p">{</span>
<span class="n">SuspendAllInterrupts</span><span class="p">();</span>
  <span class="o">/*</span><span class="n">user</span> <span class="n">action</span> <span class="k">except</span> <span class="n">system</span> <span class="n">service</span><span class="o">*/</span>
  <span class="n">ResumeAllInterrupts</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">SuspendAllInterrupts</span><span class="p">();</span>
  <span class="o">/*</span><span class="n">user</span> <span class="n">action</span> <span class="k">except</span> <span class="n">system</span> <span class="n">service</span><span class="o">*/</span>
  <span class="n">ResumeAllInterrupts</span><span class="p">();</span>

<span class="n">SuspendAllInterrupts</span><span class="p">();</span>
  <span class="o">/*</span><span class="n">user</span> <span class="n">action</span> <span class="k">except</span> <span class="n">system</span> <span class="n">service</span><span class="o">*/</span>
  <span class="n">function_0</span><span class="p">();</span> <span class="o">/*</span><span class="n">nested</span> <span class="n">using</span><span class="o">*/</span>
  <span class="n">ResumeAllInterrupts</span><span class="p">();</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>SuspendAllInterrupts / ResumeAllInterrupts可以嵌套使用。如果嵌套调用SuspendAllInterrupts和ResumeAllInterrupts，SuspendAllInterrupts第一次调用时保存的中断识别状态将在ResumeAllInterrupts最后一次调用时恢复。</p>
<p>SuspendAllInterrupts / ResumeAllInterrupts can be used in a nested way. If SuspendAllInterrupts and ResumeAllInterrupts are called nestedly, the interrupt identification state saved during the first call of SuspendAllInterrupts will be restored during the last call of ResumeAllInterrupts.</p>
</li>
</ul>
</div>
</section>
<section id="suspendallinterrupts">
<h3>SuspendAllInterrupts<a class="headerlink" href="#suspendallinterrupts" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">SuspendAllInterrupts</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service saves the re cognition status of all interrupts and disables all interrupts for which the hardware supports.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>主要用于某些不能使用ORIENTAIS OS API的临界段。</p>
<p>It is mainly used for certain critical sections where the ORIENTAIS OS API cannot be used.</p>
</li>
</ul>
</div>
</section>
<section id="resumeosinterrupts">
<h3>ResumeOSInterrupts<a class="headerlink" href="#resumeosinterrupts" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ResumeOSInterrupts</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service restores the recognition status of interrupts saved by the SuspendOSInterrupts service.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>SuspendOSInterrupts / ResumeOSInterrupts可以嵌套使用。如果嵌套调用SuspendOSInterrupts和ResumeOSInterrupts，SuspendOSInterrupts的第一次调用时保存的中断识别状态将在ResumeAllInterrupts最后一次调用时恢复。</p>
<p>SuspendOSInterrupts / ResumeOSInterrupts can be used in a nested manner. If SuspendOSInterrupts and ResumeOSInterrupts are called nestedly, the interrupt identification state saved when SuspendOSInterrupts is first called will be restored when ResumeAllInterrupts is called for the last time.</p>
</li>
<li><p>SuspendOSInterrupts / ResumeOSInterrupts仅对2类中断有影响。</p>
<p>SuspendOSInterrupts / ResumeOSInterrupts only affect Type 2 Interrupts.</p>
</li>
</ul>
</div>
</section>
<section id="suspendosinterrupts">
<h3>SuspendOSInterrupts<a class="headerlink" href="#suspendosinterrupts" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">SuspendOSInterrupts</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service saves the recognition status of interrupts of category 2 and disables the recognition of these interrupts.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>主要用于某些不能使用ORIENTAIS OS API的临界段。</p>
<p>It is mainly used for certain critical sections where the ORIENTAIS OS API cannot be used.</p>
</li>
</ul>
</div>
</section>
<section id="getisrid">
<h3>GetISRID<a class="headerlink" href="#getisrid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ISRType</span> <span class="n">GetISRID</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns the identifier of the currently executing ISR.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>ISRType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Returns</p></td>
<td><p>the ID of CATEGORY_2 interrupt</p></td>
</tr>
<tr class="row-odd"><td><p>INVALID_ISR</p></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span> <span class="n">Trusted</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
  <span class="n">ERAY_INT0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">101</span><span class="p">,</span> <span class="n">Category</span><span class="p">:</span> <span class="n">CATEGORY_2</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ISRType</span> <span class="n">isr</span><span class="p">;</span>

  <span class="o">/*</span> <span class="n">OS_REG32</span><span class="p">(</span><span class="n">OS_SRC_ERAY_INT0_ADDR</span><span class="p">))</span> <span class="o">|=</span> <span class="mh">0x04000000</span><span class="o">*/</span>
  <span class="n">TriggerInterrupt</span><span class="p">(</span><span class="n">OS_SRC_ERAY_INT0_ADDR</span><span class="p">);</span>

<span class="n">ISRType</span> <span class="n">isr</span><span class="p">;</span>
  <span class="n">isr</span> <span class="o">=</span> <span class="n">GetISRID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">isr</span> <span class="o">=</span> <span class="n">OS_ISR_INVALID</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">ISR</span><span class="p">(</span><span class="n">ERAY_INT0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ISRType</span> <span class="n">isr</span><span class="p">;</span>
  <span class="n">isr</span> <span class="o">=</span> <span class="n">GetISRID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">isr</span> <span class="o">=</span> <span class="n">CFG_ISR_ERAY_INT0_ID</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="enableinterruptsource">
<h3>EnableInterruptSource<a class="headerlink" href="#enableinterruptsource" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">EnableInterruptSource</span><span class="p">(</span><span class="n">ISRType</span> <span class="n">ISRID</span><span class="p">,</span> <span class="n">boolean</span> <span class="n">ClearPending</span><span class="p">)</span>
</pre></div>
</div>
<p>Enables the interrupt source by modifying the interrupt controller registers. Additionally it may clear the interrupt pending flag.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ISRID</p></td>
<td><p>The ID of a category 2 ISR.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ClearPending</p></td>
<td><p>Whether to clear the interrupt pending flag.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_NOFUNC</p></td>
<td><p>EnableInterruptSource is called for an interrupt source which is already enabled.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>ISRID is not a valid category 2 ISR identifier.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong call context of the API function</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>The calling application is not the owner of the ISR passed in ISRID</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True

TASK(TaskInit)
{
  ……
  StatusType ret;
  ret = DisableInterruptSource(CFG_ISR_DMA_SF_DMA0_CH_10_ID);
  ……
  ret = EnableInterruptSource(CFG_ISR_DMA_SF_DMA0_CH_10_ID, TRUE);
  ……
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该服务为了短时间屏蔽特定的中断或在特定时间内忽略特定源的中断请求。</p>
<p>This service is used to mask specific interrupts for a short period of time or ignore interrupt requests from specific sources within a specific time frame.</p>
</li>
</ul>
</div>
</section>
<section id="disableinterruptsource">
<h3>DisableInterruptSource<a class="headerlink" href="#disableinterruptsource" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">DisableInterruptSource</span><span class="p">(</span><span class="n">ISRType</span> <span class="n">ISRID</span><span class="p">)</span>
</pre></div>
</div>
<p>Disables the interrupt source by modifying the interrupt controller registers.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ISRID</p></td>
<td><p>The ID of a category 2 ISR.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_NOFUNC</p></td>
<td><p>DisableInterruptSource is called for an interrupt source which is already disabled.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>ISRID is not a valid category 2 ISR identifier.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong call context of the API function</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>The calling application is not the owner of the ISR passed in ISRID</p></td>
</tr>
</tbody>
</table>
</section>
<section id="clearpendinginterrupt">
<h3>ClearPendingInterrupt<a class="headerlink" href="#clearpendinginterrupt" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ClearPendingInterrupt</span><span class="p">(</span><span class="n">ISRType</span> <span class="n">ISRID</span><span class="p">)</span>
</pre></div>
</div>
<p>Clears the interrupt pending flag by modifying the interrupt controller registers.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ISRID</p></td>
<td><p>The ID of a category 2 ISR.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>ISRID is not a valid category 2 ISR identifier.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong call context of the API function</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>The calling application is not the owner of the ISR passed in ISRID</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True

    TASK(TaskInit)
    {
      ……
      StatusType ret;
      ret = DisableInterruptSource(CFG_ISR_DMA_SF_DMA0_CH_10_ID);
      ……
      ret = ClearPendingInterrupt(CFG_ISR_DMA_SF_DMA0_CH_10_ID);
      ……
    }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该服务为了短时间屏蔽特定的中断或在特定时间内忽略特定源的中断请求。</p>
<p>This service is used to mask specific interrupts for a short period of time or ignore interrupt requests from specific sources within a given time frame.</p>
</li>
</ul>
</div>
</section>
</section>
<section id="counter-functions">
<h2>Counter Functions<a class="headerlink" href="#counter-functions" title="Link to this heading">¶</a></h2>
<p>一个计数器由一个以“滴答”为单位表示的计数器值和一些计数器特定的常数。 Os提供标准化的API，以直接操作计数器。
Os提供了两种不同的计数器：</p>
<p>A counter consists of a counter value represented in “tick” units and some counter-specific constants. The Os provides standardized APIs to directly manipulate counters.
The Os offers two distinct types of counters:</p>
<blockquote>
<div><ul class="simple">
<li><p>硬件Counter（Hardware Counter）</p></li>
<li><p>软件Counter（Software Counter）</p></li>
</ul>
</div></blockquote>
<p><strong>硬件Counter:</strong> 由硬件（例如定时器）增加计数器的计数值。计数值由外围设备“在硬件中”维护。</p>
<p><strong>Hardware Counter</strong>: The counter value is incremented by hardware (e.g., a timer). The counter value is maintained “in hardware” by peripheral devices.</p>
<p><strong>软件Counter:</strong> 通过调用IncrementCounter增加计数器的计数值。计数值由ORIENTAIS OS “在软件中”维护。</p>
<p><strong>Software Counter</strong>: The counter value is incremented by calling IncrementCounter. The counter value is maintained “in software” by ORIENTAIS OS.</p>
<section id="incrementcounter">
<h3>IncrementCounter<a class="headerlink" href="#incrementcounter" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IncrementCounter</span><span class="p">(</span><span class="n">CounterType</span> <span class="n">CounterID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service increments a software counter.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>CounterID</p></td>
<td><p>Counter Identifier</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>CounterID is invalid or the counter implemented by hardware cannot be incremented by software</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The object is not belong to local core</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Alarm_10ms</span><span class="p">:</span> <span class="n">ActivateTask</span><span class="p">:</span> <span class="n">Task_10ms</span><span class="p">,</span> <span class="n">CycleTime</span><span class="p">:</span><span class="mi">10</span><span class="n">ms</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">Task_10ms</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">CounterType</span><span class="p">:</span><span class="n">SOFTWARE</span>
<span class="n">TASK</span><span class="p">(</span><span class="n">Task_10ms</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span> <span class="o">/*</span><span class="n">The</span> <span class="n">current</span> <span class="n">tick</span> <span class="n">value</span> <span class="n">of</span> <span class="n">Counter_0</span> <span class="n">increases</span> <span class="mi">1</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该函数不能增加硬件计数器的计数值。</p>
<p>This function cannot increment the count value of a hardware counter.</p>
</li>
</ul>
</div>
</section>
<section id="getcountervalue">
<h3>GetCounterValue<a class="headerlink" href="#getcountervalue" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetCounterValue</span><span class="p">(</span><span class="n">CounterType</span> <span class="n">CounterID</span><span class="p">,</span> <span class="n">TickRefType</span> <span class="n">Value</span><span class="p">)</span>
</pre></div>
</div>
<p>This service reads the current count value of a counter .</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>CounterID</p></td>
<td><p>Counter Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Value</p></td>
<td><p>Counter’s current clock value</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>CounterID is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_VALUE</p></td>
<td><p>Parameter address is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Alarm_10ms</span><span class="p">:</span> <span class="n">ActivateTask</span><span class="p">:</span> <span class="n">Task_10ms</span><span class="p">,</span> <span class="n">CycleTime</span><span class="p">:</span><span class="mi">10</span><span class="n">ms</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">Task_10ms</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">CounterType</span><span class="p">:</span><span class="n">SOFTWARE</span>
<span class="n">Counter_1</span><span class="p">:</span> <span class="n">CounterType</span><span class="p">:</span><span class="n">HARDWARE</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task_10ms</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TickType</span> <span class="n">tick</span><span class="p">;</span>
  <span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span>
<span class="o">/*</span><span class="n">The</span> <span class="n">software</span> <span class="n">counter</span> <span class="n">need</span> <span class="n">to</span> <span class="n">increse</span> <span class="n">by</span> <span class="n">calling</span> <span class="n">IncrementCounter</span><span class="o">.*/</span>
  <span class="n">GetCounterValue</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span> <span class="o">/*</span><span class="n">The</span> <span class="n">current</span> <span class="n">tick</span> <span class="n">value</span> <span class="n">of</span> <span class="n">Counter_0</span><span class="o">*/</span>
  <span class="n">GetCounterValue</span><span class="p">(</span><span class="n">Counter_1</span><span class="p">,</span><span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span> <span class="o">/*</span><span class="n">The</span> <span class="n">current</span> <span class="n">tick</span> <span class="n">value</span> <span class="n">of</span> <span class="n">Counter_1</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>如果计数器是由硬件驱动的，则返回硬件计数器的计数值；如果计数器是由软件驱动的，则返回软件计数器的计数值。</p>
<p>If the counter is driven by hardware, it returns the count value of the hardware counter; if the counter is driven by software, it returns the count value of the software counter.</p>
</li>
</ul>
</div>
</section>
<section id="getelapsedvalue">
<h3>GetElapsedValue<a class="headerlink" href="#getelapsedvalue" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetElapsedValue</span><span class="p">(</span><span class="n">CounterType</span> <span class="n">CounterID</span><span class="p">,</span> <span class="n">TickRefType</span> <span class="n">Value</span><span class="p">,</span> <span class="n">TickRefType</span> <span class="n">ElapsedValue</span><span class="p">)</span>
</pre></div>
</div>
<p>This service gets the number of ticks between the current tick value and a previously read tick value.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>CounterID</p></td>
<td><p>Counter Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Value</p></td>
<td><p>The current value of the counter (used as the next starting value)</p></td>
</tr>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>ElapsedValue</p></td>
<td><p>Interval between current clock value and start value</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>CounterID is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_VALUE</p></td>
<td><p>Parameter address is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True
Counter_0: CounterType:SOFTWARE, MaxTick:1000,MinTick:1

TASK(TaskInit)
{
  TickType tick0,tick1,tick2;
  IncrementCounter(Counter_0);  /* the count of calling IncrementCounter is n.*/
  tick0 = 5;
GetElapsedValue(Counter_0,&amp;tick0,&amp;tick1);
GetCounterValue(Counter_0,&amp;tick2);
/* tick1 = ((n + 1000) – tick0(5)) % 1000 = n - 5, tick0 = tick2 = 10*/
  ......
}
</pre></div>
</div>
</section>
</section>
<section id="resource-functions">
<h2>Resource Functions<a class="headerlink" href="#resource-functions" title="Link to this heading">¶</a></h2>
<p>资源管理用于协调具有不同优先级的多个任务对共享资源的并发访问，例如：管理的实体（调度器），程序，内存或硬件区域。</p>
<p>Resource management is used to coordinate the concurrent access of multiple tasks with different priorities to shared resources, such as managed entities (schedulers), programs, memory, or hardware regions.</p>
<p>在系统生成时，会为每个资源静态分配其自己的最高优先级。用户可以通过在任务/中断中调用GetResource / ReleaseResource来获取/释放标准资源。运行任务/中断的优先级暂时设置为资源的优先级，直到释放资源为止。</p>
<p>During system generation, each resource is statically assigned its own highest priority. Users can acquire/release standard resources by calling GetResource / ReleaseResource in tasks/interrupts. The priority of the running task/interrupt is temporarily set to the priority of the resource until the resource is released.</p>
<figure class="align-center" id="id4">
<img alt="可抢占任务间优先级天花板的资源分配" src="../../../_images/%E8%B5%84%E6%BA%90%E5%A4%A9%E8%8A%B1%E6%9D%BF%E6%9C%BA%E5%88%B6.png" />
<figcaption>
<p><span class="caption-text">可抢占任务间优先级天花板的资源分配（Resource Allocation with Priority Ceiling Among Preemptive Tasks）</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>内部资源是用户不可见的资源，因此系统功能GetResource和ReleaseResource无法操作内部资源。它们在一组明确定义的系统功能内部严格管理。除此之外，内部资源的行为与标准资源完全相同。</p>
<p>Internal resources are invisible to users; therefore, the system functions GetResource and ReleaseResource cannot operate on internal resources. They are strictly managed within a well-defined set of system functions. Beyond this, the behavior of internal resources is identical to that of standard resources.</p>
<p>占用标准资源时，不得调用TerminateTask，ChainTask，Schedule，WaitEvent。中断服务程序不应在占据资源的情况下结束。</p>
<p>When occupying standard resources, TerminateTask, ChainTask, Schedule, and WaitEvent must not be called. Interrupt Service Routines (ISRs) should not terminate while occupying resources.</p>
<section id="getresource">
<h3>GetResource<a class="headerlink" href="#getresource" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetResource</span><span class="p">(</span><span class="n">ResourceType</span> <span class="n">ResID</span><span class="p">)</span>
</pre></div>
</div>
<p>This call serves to enter critical sections in the code that are assigned to the resource referenced by &lt;ResID&gt;. A critical section shall always be left using ReleaseResource.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ResID</p></td>
<td><p>Resource Identifier</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid ResID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>Attempt to obtain a resource that has been occupied by a task, interrupt, or statically assigned to a ceiling priority task or an interrupt higher than the ceiling priority</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Example.1
OsResource: Type:STANDARD

TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True, Resource:OsResource
Task0: Priority:2, Preemptive Policy:FULL, Resource:OsResource

TASK(TaskInit)
{
  GetResource(OsResource);
  /* user code*/
  ReleaseResource(OsResource);/*If a task don’t release resource occupied, it cannot activate other tasks configuring the resource and terminate itself.*/
  ActivateTask(Task0);
  ......
}

Example.2
OsResource: Type:STANDARD
TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True, Resource:OsResource
Task0: Priority:2, Preemptive Policy:FULL, Resource:OsResource

TASK(TaskInit)
{
  GetResource(OsResource);
  ActivateTask(Task0);
  ReleaseResource(OsResource); /* The ReleaseResource can make OS scheduling. Task0 start to execute immediately.*/
  ......
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>同一资源不能嵌套获取。用户可以多次获得不同的资源，并且以后进先出（LIFO）的顺序进行操作。</p>
<p>The same resource cannot be acquired in a nested manner. Users can acquire different resources multiple times and operate on them in Last-In-First-Out (LIFO) order.</p>
</li>
<li><p>建议对GetResource和ReleaseResource的调用尽可能出现在同一函数中。</p>
<p>It is recommended that calls to GetResource and ReleaseResource appear in the same function whenever possible.</p>
</li>
<li><p>任务获取资源后，系统不允许为不可抢占任务的发起重调度的服务（例如：TerminateTask，ChainTask，Schedule和WaitEvent）。</p>
<p>After a task acquires a resource, the system does not allow services that initiate rescheduling for non-preemptive tasks (e.g., TerminateTask, ChainTask, Schedule, and WaitEvent).</p>
</li>
</ul>
</div>
</section>
<section id="releaseresource">
<h3>ReleaseResource<a class="headerlink" href="#releaseresource" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ReleaseResource</span><span class="p">(</span><span class="n">ResourceType</span> <span class="n">ResID</span><span class="p">)</span>
</pre></div>
</div>
<p>ReleaseResource is the counterpart of GetResource and serves to leave critical sections in the code that are assigned to the resource referenced by &lt;ResID&gt;.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ResID</p></td>
<td><p>Resource Identifier</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid ResID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_NOFUNC</p></td>
<td><p>Attempt to release unused resources / Task/ISR don’t release resource and spinlock in nest order</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>An attempt was made to release a resource with a lower ceiling priority than a task that calls a task or interrupts a static configuration.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The object is not belong to local core</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>资源释放者可以与资源获取者不同。</p>
<p>The resource releaser can be different from the resource acquirer.</p>
</li>
</ul>
</div>
</section>
</section>
<section id="alarm-functions">
<h2>Alarm Functions<a class="headerlink" href="#alarm-functions" title="Link to this heading">¶</a></h2>
<p>Os提供用于处理重复事件的服务，例如在Alarm到期时激活任务，设置事件或调用AlarmCallBack回调函数。Alarm回调函数是应用程序提供的简短函数。</p>
<p>The Os provides services for handling recurring events, such as activating tasks when an Alarm expires, setting events, or calling the AlarmCallBack callback function. The Alarm callback function is a short function provided by the application.</p>
<figure class="align-center" id="id5">
<img alt="Alarm的分层模型" src="../../../_images/alarm%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B.png" />
<figcaption>
<p><span class="caption-text">管理Alarm的分层模型（Hierarchical Model for Managing Alarms）</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Counter和Alarm是静态定义的。Counter到Alarm的分配以及Alarm到期时要执行的具体操作也是静态定义的。</p>
<p>Counters and Alarms are defined statically. The assignment of Counters to Alarms and the specific actions to be performed when an Alarm expires are also defined statically.</p>
<p>动态参数是Alarm到期时的计数器值，以及周期性Alarm的周期时间。</p>
<p>Dynamic parameters include the counter value when the Alarm expires and the cycle time for periodic Alarms.</p>
<section id="getalarmbase">
<h3>GetAlarmBase<a class="headerlink" href="#getalarmbase" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetAlarmBase</span><span class="p">(</span><span class="n">AlarmType</span> <span class="n">AlarmID</span><span class="p">,</span> <span class="n">AlarmBaseRefType</span> <span class="n">Info</span><span class="p">)</span>
</pre></div>
</div>
<p>The system service GetAlarmBase reads the alarm base characteristics. The return value &lt;Info&gt; is a structure in which the information of data type</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>AlarmID</p></td>
<td><p>Alarm Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Info</p></td>
<td><p>Information pointing to AlarmID alarms</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid AlarmID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-odd"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">SecondsPerTick</span><span class="p">:</span><span class="mf">0.001</span>
<span class="n">Alarm_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span> <span class="n">Counter_0</span>

<span class="n">typedef</span> <span class="n">struct</span>
<span class="p">{</span>
    <span class="n">Os_TickType</span>             <span class="n">maxallowedvalue</span><span class="p">;</span>
    <span class="n">Os_TickType</span>             <span class="n">ticksperbase</span><span class="p">;</span>
    <span class="n">Os_TickType</span>             <span class="n">mincycle</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Os_AlarmBaseType</span><span class="p">;</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">AlarmBaseType</span> <span class="n">alarmbase</span><span class="p">;</span>
  <span class="n">GetAlarmBase</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">alarmbase</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">alarmbase</span><span class="o">.</span> <span class="n">maxallowedvalue</span> <span class="o">=</span> <span class="n">MaxTick</span> <span class="o">*/</span>
  <span class="o">/*</span> <span class="n">alarmbase</span><span class="o">.</span> <span class="n">mincycle</span> <span class="o">=</span> <span class="n">MinTick</span> <span class="o">*/</span>
  <span class="o">/*</span> <span class="n">alarmbase</span><span class="o">.</span> <span class="n">ticksperbase</span> <span class="o">=</span> <span class="n">SecondsPerTick</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="getalarm">
<h3>GetAlarm<a class="headerlink" href="#getalarm" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">AlarmType</span> <span class="n">AlarmID</span><span class="p">,</span> <span class="n">TickRefType</span> <span class="n">Tick</span><span class="p">)</span>
</pre></div>
</div>
<p>The system service GetAlarm returns the relative value in ticks before the alarm &lt;AlarmID&gt; expires.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>AlarmID</p></td>
<td><p>Alarm Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Tick</p></td>
<td><p>Relative number of ticks before the alarm is triggered</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_NOFUNC</p></td>
<td><p>alarm is not used</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>invalid AlarmID</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span><span class="p">,</span> <span class="n">SecondsPerTick</span><span class="p">:</span><span class="mf">0.001</span><span class="p">,</span>
<span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span>
<span class="n">Alarm_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span> <span class="n">Counter_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TickType</span> <span class="n">tick</span><span class="p">;</span>
  <span class="o">/*</span> <span class="n">alarm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">acitve</span><span class="o">.</span> <span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span> <span class="o">/*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_NOFUNC</span> <span class="o">*/</span>
  <span class="n">SetRelAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">alarm</span> <span class="ow">is</span> <span class="n">acitve</span><span class="o">.</span> <span class="o">*/</span>
<span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span> <span class="o">/*</span> <span class="n">Execute</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="n">times</span> <span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span> <span class="o">/*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="p">,</span> <span class="n">tick</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>如果&lt;AlarmID&gt;没有定义，则&lt;Tick&gt;指向的内容不会改变。</p>
<p>If &lt;AlarmID&gt; is not defined, the content pointed to by &lt;Tick&gt; will not change.</p>
</li>
</ul>
</div>
</section>
<section id="setrelalarm">
<h3>SetRelAlarm<a class="headerlink" href="#setrelalarm" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">SetRelAlarm</span><span class="p">(</span><span class="n">AlarmType</span> <span class="n">AlarmID</span><span class="p">,</span> <span class="n">TickType</span> <span class="n">increment</span><span class="p">,</span> <span class="n">TickType</span> <span class="n">cycle</span><span class="p">)</span>
</pre></div>
</div>
<p>The system service occupies the alarm &lt;AlarmID&gt; element. After &lt;increment&gt; ticks have elapsed, the task assigned to the alarm &lt;AlarmID&gt; is activated or the assigned event (only for extended tasks) is set or the alarm-callback routine is called.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>AlarmID</p></td>
<td><p>Alarm Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>increment</p></td>
<td><p>the number of clocks triggered for the first time relative to the current number of clocks</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>cycle</p></td>
<td><p>The period of the alarm (Tick number), the cycle value of a single alarm is 0</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>Alarm corresponding to AlarmID is in use</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>Invalid AlarmID</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_VALUE</p></td>
<td><p>Increment value is not within the normal range (less than 0 or greater than maxallowedvalue) or Cycle value is not equal to 0 and is not within the allowed count range (less than mincycle or greater than maxallowedvalue)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-odd"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>预设时间到期，将根据配置情况触发相关服务，例如：激活任务，设置事件，回调等。</p>
<p>When the preset time expires, the relevant services will be triggered according to the configuration, such as activating tasks, setting events, and callbacks.</p>
</li>
<li><p>如果相对时间为零，将立即触发相关服务。</p>
<p>If the relative time is zero, the relevant services will be triggered immediately.</p>
</li>
</ul>
</div>
</section>
<section id="setabsalarm">
<h3>SetAbsAlarm<a class="headerlink" href="#setabsalarm" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">SetAbsAlarm</span><span class="p">(</span><span class="n">AlarmType</span> <span class="n">AlarmID</span><span class="p">,</span> <span class="n">TickType</span> <span class="n">start</span><span class="p">,</span> <span class="n">TickType</span> <span class="n">cycle</span><span class="p">)</span>
</pre></div>
</div>
<p>The system service occupies the alarm &lt;AlarmID&gt; element. When &lt;start&gt; ticks are reached, the task assigned to the alarm &lt;AlarmID&gt; is activated or the assigned event (only for extended tasks) is set or the alarm-callback routine is called.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>AlarmID</p></td>
<td><p>Alarm Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>start</p></td>
<td><p>Number of absolute clocks triggered for the first time</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>cycle</p></td>
<td><p>The period of the alarm (Tick number), the cycle value of a single alarm is 0</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>Alarm is active</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>invalid AlarmID</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_VALUE</p></td>
<td><p>Increment value is not within the normal range (less than 0 or greater than maxallowedvalue) or Cycle value is not equal to 0 and is not within the allowed count range (less than mincycle or greater than maxallowedvalue)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-odd"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">Alarm_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span> <span class="n">Counter_0</span> <span class="n">ActivateTask</span><span class="p">:</span><span class="n">Task0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span><span class="o">/*</span><span class="mi">1</span><span class="o">*/</span>
  <span class="n">SetAbsAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span><span class="o">/*</span><span class="mi">2</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>预设时间到期，将根据配置情况触发相关服务，例如：激活任务，设置事件，回调等。</p>
<p>When the preset time expires, the relevant services will be triggered according to the configuration, such as activating tasks, setting events, and callbacks.</p>
</li>
<li><p>如果绝对时间等于或接近当前时间，将立即触发相关服务。</p>
<p>If the absolute time is equal to or close to the current time, the relevant services will be triggered immediately.</p>
</li>
<li><p>如果绝对时间已过，相关服务将在下次到达时触发。</p>
<p>If the absolute time has passed, the relevant services will be triggered when the time is reached next time.</p>
</li>
</ul>
</div>
</section>
<section id="cancelalarm">
<h3>CancelAlarm<a class="headerlink" href="#cancelalarm" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">CancelAlarm</span><span class="p">(</span><span class="n">AlarmType</span> <span class="n">AlarmID</span><span class="p">)</span>
</pre></div>
</div>
<p>The system service cancels the alarm &lt;AlarmID&gt;.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>AlarmID</p></td>
<td><p>Alarm Identifier</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_NOFUNC</p></td>
<td><p>Alarm is not used</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ID</p></td>
<td><p>invalid AlarmID</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">Alarm_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span> <span class="n">Counter_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
  <span class="n">TickType</span> <span class="n">tick</span><span class="p">;</span>
  <span class="o">/*</span> <span class="n">alarm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">acitve</span><span class="o">.</span> <span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span> <span class="o">/*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_NOFUNC</span> <span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">SetRelAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span> <span class="o">/*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
  <span class="o">/*</span> <span class="n">alarm</span> <span class="ow">is</span> <span class="n">acitve</span><span class="o">.</span> <span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span> <span class="o">/*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">CancelAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">);</span> <span class="o">/*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
  <span class="o">/*</span> <span class="n">alarm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">acitve</span><span class="o">.</span> <span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span> <span class="o">/*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_NOFUNC</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="event-functions">
<h2>Event Functions<a class="headerlink" href="#event-functions" title="Link to this heading">¶</a></h2>
<p>事件机制（Event Mechanism）：</p>
<blockquote>
<div><ul>
<li><p>是一种同步手段</p>
<p>It is a synchronization method.</p>
</li>
<li><p>仅拓展任务可用</p>
<p>Only extended tasks can use it.</p>
</li>
</ul>
</div></blockquote>
<p>Figure解释了在完全抢占式调度的情况下通过设置事件使扩展任务的同步，其中扩展任务T1具有更高的优先级。</p>
<p>Figure explains the synchronization of extended tasks by setting events under fully preemptive scheduling, where the extended task T1 has a higher priority.</p>
<figure class="align-center" id="id6">
<img alt="可抢占扩展任务的同步" src="../../../_images/event%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1.png" />
<figcaption>
<p><span class="caption-text">可抢占扩展任务的同步（Synchronization of Preemptive Extended Tasks）</span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="setevent">
<h3>SetEvent<a class="headerlink" href="#setevent" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">SetEvent</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">,</span> <span class="n">EventMaskType</span> <span class="n">Mask</span><span class="p">)</span>
</pre></div>
</div>
<p>The events of task &lt;TaskID&gt; are set according to the event mask &lt;Mask&gt;. Calling SetEvent causes the task &lt;TaskID&gt; to be transferred to the ready state, if it was waiting for at least one of the events specified in &lt;Mask&gt;.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Mask</p></td>
<td><p>Event mask, the configured event name</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>Task is not an extended task / No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>event cannot be set when the task is suspended</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>事件的状态以‘位’为单位，事件中未设置的位保持不变。</p>
<p>The state of an event is in “bit” units, and the bits not set in the event remain unchanged.</p>
</li>
<li><p>任务可以自行设置事件。</p>
<p>A task can set events by itself.</p>
</li>
<li><p>在ECC1，ECC2下有效。</p>
<p>Valid under ECC1 and ECC2.</p>
</li>
</ul>
</div>
</section>
<section id="clearevent">
<h3>ClearEvent<a class="headerlink" href="#clearevent" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ClearEvent</span><span class="p">(</span><span class="n">EventMaskType</span> <span class="n">Mask</span><span class="p">)</span>
</pre></div>
</div>
<p>The events of the extended task calling ClearEvent are cleared according to the event mask &lt;Mask&gt;.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Mask</p></td>
<td><p>Event mask, the configured event name</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>Task is not an extended task</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>仅拓展任务可用。</p>
<p>Only extended tasks are available to use it.</p>
</li>
<li><p>在ECC1，ECC2下有效。</p>
<p>It is valid under ECC1 and ECC2.</p>
</li>
</ul>
</div>
</section>
<section id="getevent">
<h3>GetEvent<a class="headerlink" href="#getevent" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetEvent</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">,</span> <span class="n">EventMaskRefType</span> <span class="n">Event</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns the current state of all event bits of the task &lt;TaskID&gt;, not the events that the task is waiting for.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Event</p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>Task is not an extended task</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>task is suspended</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>用户可以获取当前正在运行的任务的事件。</p>
<p>Users can obtain the events of the task that is currently running.</p>
</li>
<li><p>在ECC1，ECC2下有效。</p>
<p>It is valid under ECC1 and ECC2.</p>
</li>
</ul>
</div>
</section>
<section id="waitevent">
<h3>WaitEvent<a class="headerlink" href="#waitevent" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">WaitEvent</span><span class="p">(</span><span class="n">EventMaskType</span> <span class="n">Mask</span><span class="p">)</span>
</pre></div>
</div>
<p>The state of the calling task is set to waiting, unless at least one of the events specified in &lt;Mask&gt; has already been set.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Mask</p></td>
<td><p>Event mask, the configured event name</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>this</p></td>
<td><p>function does not return in correct case</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>Task is not an extended task</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_RESOURCE</p></td>
<td><p>Resources are still occupied by tasks</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_SPINLOCK</p></td>
<td><p>Spinlock are still occupied by tasks</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True
Task0: Priority:2, Preemptive Policy:FULL, Event:Event_0

TASK(TaskInit)
{
  ActivateTask(Task0); /* step 1*/
  SetEvent(Task0,Event_0);/* step 3: Task state from waiting to running*/
  ......
}

TASK(Task0)
{
  EventMaskType eventmask;
  GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = 0 */
  WaitEvent(Event_0); /* step 2: Task state from running to waiting*/

GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = Event_0 */
  WaitEvent(Event_0); /* step 4: Task continues execute because the bit of event don’t be cleared. */

GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = Event_0 */
  ClearEvent(Event_0); /* step 5*/
  GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = 0 */
  ......
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在ECC1，ECC2下有效。</p>
<p>It is valid under ECC1 and ECC2.</p>
</li>
<li><p>仅拓展任务可用。</p>
<p>Only extended tasks can use it.</p>
</li>
<li><p>如果等待的事件未被设置，则当前任务进入等待状态并进行任务切换。如果等待的事件已被设置，则继续执行当前任务。</p>
<p>If the event being waited for is not set, the current task enters the waiting state and task switching occurs. If the event being waited for has been set, the current task continues to execute.</p>
</li>
<li><p>调用前必须释放占据的资源。</p>
<p>Occupied resources must be released before calling.</p>
</li>
<li><p>设置的事件不会被主动清除。用户必须调用ClearEvent来清除事件。</p>
<p>The set event will not be actively cleared. Users must call ClearEvent to clear the event.</p>
</li>
</ul>
</div>
</section>
<section id="waitallevents">
<h3>WaitAllEvents<a class="headerlink" href="#waitallevents" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">WaitAllEvents</span><span class="p">(</span><span class="n">EventMaskType</span> <span class="n">Mask</span><span class="p">)</span>
</pre></div>
</div>
<p>The state of the calling task is set to waiting, must all the events specified in &lt;Mask&gt; has already been set.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Mask</p></td>
<td><p>Event mask, the configured event name</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>this</p></td>
<td><p>function does not return in correct case</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>Task is not an extended task</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_RESOURCE</p></td>
<td><p>Resources are still occupied by tasks</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_SPINLOCK</p></td>
<td><p>Spinlock are still occupied by tasks</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True
Task0: Priority:2, Preemptive Policy:FULL, Event:Event_0

TASK(TaskInit)
{
  ActivateTask(Task0); /* step 1*/
  SetEvent(Task0,Event_0 | Event_1);/* step 3: Task state from waiting to running*/
  ......
}

TASK(Task0)
{
  EventMaskType eventmask;
  GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = 0 */
  WaitAllEvents(Event_0 | Event_1); /* step 2: Task state from running to waiting*/

GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = Event_0 */
  WaitEvent(Event_0); /* step 4: Task continues execute because the bit of event don’t be cleared. */

GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = Event_0 */
  ClearEvent(Event_0 | Event_1); /* step 5*/
  GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = 0 */
  ......
}
</pre></div>
</div>
</section>
<section id="seteventasyn">
<h3>SetEventAsyn<a class="headerlink" href="#seteventasyn" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">SetEventAsyn</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">,</span> <span class="n">EventMaskType</span> <span class="n">Mask</span><span class="p">)</span>
</pre></div>
</div>
<p>Asynchronous version of the</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task reference</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Mask</p></td>
<td><p>Event mask, the configured event name</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid TaskID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>Task is not an extended task / No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>event cannot be set when the task is suspended</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True
Task0: Priority:2, Preemptive Policy:FULL, Event:Event_0

TASK(TaskInit)
{
  ActivateTask(Task0); /* step 1*/
  SetEventAsyn(Task0,Event_0 | Event_1);/* step 3: Task state from waiting to running*/
  ......
}

TASK(Task0)
{
  EventMaskType eventmask;
  GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = 0 */
  WaitAllEvents(Event_0 | Event_1); /* step 2: Task state from running to waiting*/

GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = Event_0 */
  WaitEvent(Event_0); /* step 4: Task continues execute because the bit of event don’t be cleared. */

GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = Event_0 */
  ClearEvent(Event_0 | Event_1); /* step 5*/
  GetEvent(Task0, &amp;eventmask);/* eventmask &amp; Event_0 = 0 */
  ......
}
</pre></div>
</div>
</section>
</section>
<section id="scheduletable-functions">
<h2>ScheduleTable Functions<a class="headerlink" href="#scheduletable-functions" title="Link to this heading">¶</a></h2>
<p>调度表类似于使用Counter和一系列自动启动的Alarms来实现静态定义的任务激活机制。</p>
<p>A schedule table is similar to a statically defined task activation mechanism implemented using a Counter and a series of automatically started Alarms.</p>
<p>调度表提供了一组静态定义的溢出点封装。每个溢出点定义：</p>
<p>A schedule table provides a set of statically defined overflow point encapsulations. Each overflow point defines:</p>
<blockquote>
<div><ul>
<li><p>处理溢出点时，将执行动作（通过ORIENTAIS配置工具OS模块配置）。动作是任务的激活或事件的设置。</p>
<p>When processing the overflow point, an action (configured via the OS module of the ORIENTAIS configuration tool) will be executed. The action is either the activation of a task or the setting of an event.</p>
</li>
<li><p>从调度表的开始处以“滴答”为单位的偏移量。</p>
<p>An offset in “tick” units from the start of the schedule table.</p>
</li>
</ul>
</div></blockquote>
<p>在运行时，ORIENTAIS OS将遍历调度表，依次处理每个溢出点。调度表由一个计数器驱动。计数器的属性会影响调度表中允许配置的内容。</p>
<p>During runtime, the ORIENTAIS OS traverses the schedule table and processes each overflow point in sequence. The schedule table is driven by a counter, and the properties of the counter affect the configurable content allowed in the schedule table.</p>
<p>用户可以为调度表设置为同步模式。ORIENTAIS OS通过两种方式提供对同步的支持：</p>
<p>Users can set the schedule table to synchronous mode. The ORIENTAIS OS provides support for synchronization in two ways:</p>
<ul>
<li><p>隐式同步：驱动调度表的计数器要求是同步计数器。这通常是采用时间触发的网络技术（例如FlexRay，TTP）实现同步的方式-底层硬件管理网络时间同步，并简单地将时间显示为ORIENTAIS OS的输出/比较计时器接口。Figure显示了隐式同步调度表可能出现的状态。</p>
<p>Implicit Synchronization: The counter driving the schedule table is required to be a synchronous counter. This is typically a synchronization method implemented using time-triggered network technologies (e.g., FlexRay, TTP) — the underlying hardware manages network time synchronization and simply presents the time as an output/compare timer interface for the ORIENTAIS OS. Figure 5-7 shows the possible states of a schedule table with implicit synchronization.</p>
</li>
</ul>
<figure class="align-center" id="id7">
<img alt="隐式同步调度表的状态图" src="../../../_images/%E9%9A%90%E5%BC%8F%E5%90%8C%E6%AD%A5%E8%B0%83%E5%BA%A6%E8%A1%A8%E7%9A%84%E7%8A%B6%E6%80%81%E5%9B%BE.png" />
<figcaption>
<p><span class="caption-text">隐式同步调度表的状态（States of Schedule Table with Implicit Synchronization）</span><a class="headerlink" href="#id7" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><p>显式同步：调度表由ORIENTAIS OS计数器驱动，而不要求是同步的计数器。ORIENTAIS OS还提供一些其他功能，以使其计数器驱动的调度表与同步计数器同步。通常，这是与定期广播全局时间进行同步的方式。Figure显示了显式同步调度表可能出现的状态。</p>
<p>Explicit Synchronization: The schedule table is driven by an ORIENTAIS OS counter, which is not required to be a synchronous counter. The ORIENTAIS OS also provides additional functions to synchronize its counter-driven schedule table with a synchronous counter. Typically, this is a method of synchronizing with periodically broadcast global time. Figure 5-8 shows the possible states of a schedule table with explicit synchronization.</p>
</li>
</ul>
<figure class="align-center" id="id8">
<img alt="显式同步调度表的状态图" src="../../../_images/%E6%98%BE%E5%BC%8F%E5%90%8C%E6%AD%A5%E8%B0%83%E5%BA%A6%E8%A1%A8%E7%9A%84%E7%8A%B6%E6%80%81%E5%9B%BE.png" />
<figcaption>
<p><span class="caption-text">显式同步调度表的状态（图中未显示所有的跳转条件）</span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>States of Schedule Table with Explicit Synchronization (not all transition conditions are shown in the diagram)</p>
<section id="startscheduletablerel">
<h3>StartScheduleTableRel<a class="headerlink" href="#startscheduletablerel" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">StartScheduleTableRel</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID</span><span class="p">,</span> <span class="n">TickType</span> <span class="n">Offset</span><span class="p">)</span>
</pre></div>
</div>
<p>This service starts the processing of a schedule table at “Offset” relative to the “Now” value on the underlying counter.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID</p></td>
<td><p>ScheduleTable Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Offset</p></td>
<td><p>The clock value from the current time to the start of the schedule (the tick value of the counter corresponds to the schedule)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>ScheduleTableID is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>Offset is greater than (OsCounterMaxAllowedValue-InitialOffset) or equal to 0</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>schedule has started</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>Application state error / No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-odd"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">OsScheduleTable_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span><span class="n">Counter_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">ststatus</span><span class="p">;</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
<span class="n">StartScheduleTableRel</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">OsScheduleTable_0</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">queue</span> <span class="n">but</span> <span class="ow">not</span> <span class="n">started</span><span class="o">.</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
<span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING</span> <span class="o">*/</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="startscheduletableabs">
<h3>StartScheduleTableAbs<a class="headerlink" href="#startscheduletableabs" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">StartScheduleTableAbs</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID</span><span class="p">,</span> <span class="n">TickType</span> <span class="n">Start</span><span class="p">)</span>
</pre></div>
</div>
<p>This service starts the processing of a schedule table at an absolute value “Start” on the underlying counter.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID</p></td>
<td><p>ScheduleTable Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Start</p></td>
<td><p>The clock value at which the schedule starts processing (the absolute tick value of the counter corresponding to the schedule)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid ScheduleTableID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>Start is greater than OsCounterMaxAllowedValue</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>schedule has started</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-odd"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stopscheduletable">
<h3>StopScheduleTable<a class="headerlink" href="#stopscheduletable" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">StopScheduleTable</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service cancels the processing of a schedule table immediately at any point while the schedule table is running.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID</p></td>
<td><p>ScheduleTable Identifier</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>ScheduleTableID is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_NOFUNC</p></td>
<td><p>The schedule has stopped</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Example</span><span class="mf">.1</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">OsScheduleTable_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span><span class="n">Counter_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">ststatus</span><span class="p">;</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
<span class="n">StartScheduleTableRel</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">OsScheduleTable_0</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">queue</span> <span class="n">but</span> <span class="ow">not</span> <span class="n">started</span><span class="o">.</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
<span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING</span> <span class="o">*/</span>
<span class="n">StopScheduleTable</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">);</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="nextscheduletable">
<h3>NextScheduleTable<a class="headerlink" href="#nextscheduletable" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">NextScheduleTable</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID_From</span><span class="p">,</span> <span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID_To</span><span class="p">)</span>
</pre></div>
</div>
<p>This service switches the processing from one schedule table to another schedule table.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID_From</p></td>
<td><p>Schedules currently being processed</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ScheduleTableID_To</p></td>
<td><p>Next processing schedule with a series of trigger points</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>ScheduleTableID_From or ScheduleTableID_To is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_NOFUNC</p></td>
<td><p>ScheduleTableID_From did not start</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>ScheduleTableID_To has started or is in Next</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>These two schedule tables do not belong to the same core</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">OsScheduleTable_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span>
<span class="n">The</span> <span class="n">Final</span> <span class="n">ExpiryPoint</span><span class="p">:</span> <span class="n">ExpPoint</span> <span class="n">Offset</span><span class="p">:</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span>
<span class="n">OsScheduleTable_1</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span><span class="n">Counter_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">ststatus</span><span class="p">;</span>
<span class="n">StartScheduleTableRel</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING</span> <span class="o">*/</span>
<span class="n">NextScheduleTable</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="n">OsScheduleTable_1</span><span class="p">);</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_NEXT</span> <span class="o">*/</span>
<span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span> <span class="o">/*</span> <span class="n">Execult</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="n">times</span><span class="o">.*/</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING</span> <span class="o">*/</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="startscheduletablesynchron">
<h3>StartScheduleTableSynchron<a class="headerlink" href="#startscheduletablesynchron" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">StartScheduleTableSynchron</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service starts an explicitly synchronized schedule table synchronously.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID</p></td>
<td><p>ScheduleTable Identifier</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>ScheduleTableID is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_STATE</p></td>
<td><p>ScheduleTableID has been started</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The object is not belong to local core</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Example</span><span class="mf">.1</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">OsScheduleTable_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span> <span class="n">Sync</span> <span class="n">Strategy</span><span class="p">:</span><span class="n">EXPLICIT</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">ststatus</span><span class="p">;</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
  <span class="n">StartScheduleTableSynchron</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">);</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_WAITING</span> <span class="o">*/</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>仅在SC3、SC4下有效</p>
<p>It is only valid under SC3 and SC4.</p>
</li>
<li><p>调度表同步策略必须是显性。</p>
<p>The schedule table synchronization strategy must be explicit.</p>
</li>
</ul>
</div>
</section>
<section id="syncscheduletable">
<h3>SyncScheduleTable<a class="headerlink" href="#syncscheduletable" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">SyncScheduleTable</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID</span><span class="p">,</span> <span class="n">TickType</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>This service provides the schedule table with a synchronization count and start synchronization.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID</p></td>
<td><p>ScheduleTable Identifier</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>value</p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>ScheduleTableID is invalid or the schedule cannot be synchronized (OsScheduleTblSyncStrategy is not set or OsScheduleTblSynStrategy = IMPLICIT)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>Value is out of range</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>The status of ScheduleTableID is SCHEDULETABLE_STOPPED</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The object is not belong to local core</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">OsScheduleTable_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span> <span class="n">Sync</span> <span class="n">Strategy</span><span class="p">:</span><span class="n">EXPLICIT</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">ststatus</span><span class="p">;</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>
  <span class="n">StartScheduleTableSynchron</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">);</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_WAITING</span> <span class="o">*/</span>
<span class="n">SyncScheduleTable</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span><span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING_AND_SYNCHRONOUS</span><span class="o">*/</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>仅在SC3、SC4下有效</p>
<p>It is only valid under SC3 and SC4.</p>
</li>
<li><p>调度表同步策略必须是显性</p>
<p>The schedule table synchronization strategy must be explicit.</p>
</li>
</ul>
</div>
</section>
<section id="setscheduletableasync">
<h3>SetScheduleTableAsync<a class="headerlink" href="#setscheduletableasync" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">SetScheduleTableAsync</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID</span><span class="p">)</span>
</pre></div>
</div>
<p>Stop schedule table explicit sync and set state to running.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID</p></td>
<td><p>ScheduleTable Identifier</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid ScheduleTableID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_STATE</p></td>
<td><p>The schedule table is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The object is not belong to local core</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span> <span class="n">SOFTWARE</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">OsScheduleTable_0</span><span class="p">:</span> <span class="n">Counter</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span> <span class="n">Sync</span> <span class="n">Strategy</span><span class="p">:</span><span class="n">EXPLICIT</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">ststatus</span><span class="p">;</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_STOPPED</span> <span class="o">*/</span>

  <span class="n">StartScheduleTableSynchron</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">);</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_WAITING</span> <span class="o">*/</span>

<span class="n">SyncScheduleTable</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span><span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING_AND_SYNCHRONOUS</span><span class="o">*/</span>

<span class="n">SetScheduleTableAsync</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">);</span>
<span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ststatus</span><span class="p">);</span>
<span class="o">/*</span><span class="n">default</span> <span class="p">:</span> <span class="n">ststatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING</span> <span class="o">*/</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>仅在SC3、SC4下有效</p>
<p>It is only valid under SC3 and SC4.</p>
</li>
<li><p>调度表同步策略必须是显性</p>
<p>The schedule table synchronization strategy must be explicit.</p>
</li>
</ul>
</div>
</section>
<section id="getscheduletablestatus">
<h3>GetScheduleTableStatus<a class="headerlink" href="#getscheduletablestatus" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">ScheduleTableType</span> <span class="n">ScheduleTableID</span><span class="p">,</span> <span class="n">ScheduleTableStatusRefType</span> <span class="n">ScheduleStatus</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the status of the specified schedule.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ScheduleTableID</p></td>
<td><p>ScheduleTable Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>ScheduleStatus</p></td>
<td><p>Pointer to the status value of the obtained schedule</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid ScheduleTableID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal, or rpcData is NULL_PTR.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CORE</p></td>
<td><p>The remote core is not running</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_VALUE</p></td>
<td><p>Parameter address is invalid</p></td>
</tr>
<tr class="row-even"><td><p>E_BUSY</p></td>
<td><p>The free node can’t be gotten from free queue.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_TIMEOUT</p></td>
<td><p>Waiting the execution result timeout.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="hook-functions">
<h2>Hook Functions<a class="headerlink" href="#hook-functions" title="Link to this heading">¶</a></h2>
<p>ORIENTAIS OS为用户提供了一系列钩子函数功能（Hook）。例如在钩子函数StartupHook中初始化一些硬件，在钩子函数ErrorHook中捕获并处理的一些错误。</p>
<p>ORIENTAIS OS provides users with a series of hook function features (Hook). For example, some hardware can be initialized in the hook function StartupHook, and some errors can be captured and handled in the hook function ErrorHook.</p>
<section id="errorhook">
<h3>ErrorHook<a class="headerlink" href="#errorhook" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ErrorHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>The specific error hook is called whenever a Task or ISR calls system service to cause an error.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">ActivateTask</span><span class="p">(</span><span class="n">OS_TASK_INVALID</span><span class="p">);</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="o">*/</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span> <span class="p">:</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ID</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">ErrorHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span> <span class="o">*/</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_ID</span> <span class="o">==</span> <span class="n">Error</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="o">......</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>执行错误处理。该接口由用户实现错误处理，并由ORIENTAIS OS调用。</p>
<p>Executes error handling. This interface is implemented by the user for error handling and called by ORIENTAIS OS.</p>
</li>
<li><p>用户可以通过输入参数&lt; Error &gt;的值来了解错误类型。</p>
<p>Users can learn about the error type through the value of the input parameter &lt; Error &gt;.</p>
</li>
</ul>
</div>
</section>
<section id="posttaskhook">
<h3>PostTaskHook<a class="headerlink" href="#posttaskhook" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">PostTaskHook</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by ORIENTAIS OS after executing the current task, but before leaving the task’s running state (to allow evaluation of the TaskID by GetTaskID).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>

<span class="n">TerminateTask</span><span class="p">();</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="n">TerminateTask</span><span class="p">,</span> <span class="n">ChainTask</span><span class="p">,</span> <span class="n">WaitEvent</span> <span class="ow">and</span> <span class="n">Schedule</span> <span class="n">can</span> <span class="n">make</span> <span class="n">OS</span> <span class="n">scheduling</span><span class="o">.*/</span>
<span class="o">/*</span> <span class="n">If</span> <span class="n">a</span> <span class="n">task</span> <span class="ow">is</span> <span class="n">terminated</span><span class="p">,</span> <span class="n">the</span> <span class="n">PostTaskHook</span> <span class="n">shall</span> <span class="n">be</span> <span class="n">triggered</span><span class="o">.*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">PostTaskHook</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="n">TaskType</span> <span class="n">taskid</span><span class="p">;</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span> <span class="o">*/</span>
<span class="n">GetTaskID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">taskid</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">taskid</span> <span class="o">=</span> <span class="n">OS_TASK_INVALID</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="pretaskhook">
<h3>PreTaskHook<a class="headerlink" href="#pretaskhook" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">PreTaskHook</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by ORIENTAIS OS before executing a new task, but after the transition of the task to the running state (to allow evaluation of the TaskID by GetTaskID.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="n">Before</span> <span class="n">a</span> <span class="n">task</span> <span class="n">execult</span><span class="p">,</span> <span class="n">the</span> <span class="n">PreTaskHook</span> <span class="n">shall</span> <span class="n">be</span> <span class="n">triggered</span><span class="o">.*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TaskType</span> <span class="n">taskid</span><span class="p">;</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span> <span class="o">*/</span>
<span class="n">GetTaskID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">taskid</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">taskid</span> <span class="o">=</span> <span class="n">Task0</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">PreTaskHook</span><span class="p">()</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="startuphook">
<h3>StartupHook<a class="headerlink" href="#startuphook" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StartupHook</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by the operating system at the end of the operating system in itialisation and before the scheduler is running. At this time the applicationcan initialise device drivers etc.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">......</span>
  <span class="n">StartOS</span><span class="p">(</span><span class="n">OSDEFAULTAPPMODE</span><span class="p">);</span> <span class="o">/*</span><span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">3</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
<span class="n">void</span> <span class="n">StartupHook</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="shutdownhook">
<h3>ShutdownHook<a class="headerlink" href="#shutdownhook" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ShutdownHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by the operating system when the OS service ShutdownOS has been called. This routine is called during the operating system shutdown.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">ShutdownOS</span><span class="p">(</span><span class="n">E_OK</span><span class="p">);</span> <span class="o">/*</span><span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
<span class="o">/*</span> <span class="n">Won</span><span class="s1">&#39;t execute here.*/</span>
<span class="o">/*</span> <span class="n">If</span> <span class="n">user</span> <span class="n">calls</span> <span class="n">ShutdownAllCores</span> <span class="ow">in</span> <span class="n">mutil</span><span class="o">-</span><span class="n">core</span><span class="p">,</span> <span class="n">a</span> <span class="n">similar</span> <span class="n">situation</span> <span class="n">shall</span> <span class="n">happen</span> <span class="ow">in</span> <span class="n">every</span> <span class="n">core</span><span class="o">.</span> <span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">ShutdownHook</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="protectionhook">
<h3>ProtectionHook<a class="headerlink" href="#protectionhook" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ProtectionReturnType</span> <span class="n">ProtectionHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Fatalerror</span><span class="p">)</span>
</pre></div>
</div>
<p>This hook routine is called by the operating system when the OS service protection functions.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Fatalerror</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>ProtectionReturnType</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span> <span class="n">Non</span><span class="o">-</span><span class="n">Trusted</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
      <span class="n">TimingProtection</span><span class="p">:</span> <span class="n">ExecutionBudget</span><span class="p">:</span><span class="mf">0.005</span>
<span class="n">uint8</span> <span class="n">var</span><span class="p">;</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="n">TerminateTask</span><span class="p">();</span> <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">Invalid</span> <span class="n">Calling</span><span class="p">,</span> <span class="n">It</span> <span class="n">triggers</span> <span class="n">E_OS_SPINLOCK</span> <span class="n">error</span><span class="o">.*/</span>
  <span class="n">var</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">/*</span> <span class="n">Writing</span> <span class="k">global</span> <span class="n">variable</span> <span class="n">to</span> <span class="n">trigger</span> <span class="n">the</span> <span class="n">memory</span> <span class="n">protection</span><span class="o">*/</span>
  <span class="n">DelayMs</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>  <span class="o">/*</span> <span class="n">Execution</span> <span class="n">time</span> <span class="n">out</span> <span class="n">to</span> <span class="n">trigger</span> <span class="n">the</span> <span class="n">timing</span> <span class="n">protection</span><span class="o">*/</span>
<span class="p">}</span>

<span class="n">ProtectionReturnType</span> <span class="n">ProtectionHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Fatalerror</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">/*</span><span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="n">ProtectionReturnType</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_IGNORE</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_SPINLOCK</span> <span class="o">==</span> <span class="n">Fatalerror</span><span class="p">)</span>
  <span class="p">{</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_TERMINATETASKISR</span><span class="p">;</span>
<span class="o">/*</span><span class="n">Return</span> <span class="k">with</span> <span class="n">PRO_TERMINATETASKISR</span><span class="o">.</span>
<span class="n">The</span> <span class="n">fault</span> <span class="n">task</span><span class="o">/</span><span class="n">isr</span> <span class="n">shall</span> <span class="n">be</span> <span class="n">terminated</span><span class="o">.*/</span>
  <span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_PROTECTION_MEMORY</span> <span class="o">==</span> <span class="n">Fatalerror</span><span class="p">)</span>
  <span class="p">{</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_SHUTDOWN</span><span class="p">;</span>
<span class="o">/*</span><span class="n">Return</span> <span class="k">with</span> <span class="n">PRO_SHUTDOWN</span><span class="o">.</span>
<span class="n">The</span> <span class="n">OS</span> <span class="n">shall</span> <span class="n">shutdown</span><span class="o">.*/</span>
  <span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">E_OS_PROTECTION_TIME</span> <span class="o">==</span> <span class="n">Fatalerror</span><span class="p">)</span>
  <span class="p">{</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">PRO_TERMINATEAPPL_RESTART</span><span class="p">;</span>
<span class="o">/*</span><span class="n">Return</span> <span class="k">with</span> <span class="n">PRO_TERMINATEAPPL_RESTART</span><span class="o">.</span>
<span class="n">The</span> <span class="n">fault</span> <span class="n">application</span> <span class="n">shall</span> <span class="n">restart</span><span class="o">.*/</span>
  <span class="p">}</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现错误处理，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user for error handling and called by ORIENTAIS OS.</p>
</li>
<li><p>用户可以通过返回值来选择五种处理方式中的一种处理。</p>
<p>Users can select one of the five processing methods through the return value.</p>
</li>
</ul>
</div>
</section>
<section id="idlehook-core-n">
<h3>IdleHook_Core&lt;n&gt;<a class="headerlink" href="#idlehook-core-n" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">IdleHook_Core</span><span class="o">&lt;</span><span class="n">n</span><span class="o">&gt;</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This HOOK is called when ORIENTAIS OS enters an idle task.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
<li><p>如果没有正在运行的任务/中断，则调用此接口。</p>
<p>This interface is called if there is no running task/interrupt.</p>
</li>
</ul>
</div>
</section>
<section id="errorhook-applicationname">
<h3>ErrorHook_&lt;ApplicationName&gt;<a class="headerlink" href="#errorhook-applicationname" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ErrorHook_</span><span class="o">&lt;</span><span class="n">ApplicationName</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>This HOOK is called when ORIENTAIS OS enters an idle task.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="startuphook-applicationname">
<h3>StartupHook_&lt;ApplicationName&gt;<a class="headerlink" href="#startuphook-applicationname" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StartupHook_</span><span class="o">&lt;</span><span class="n">ApplicationName</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>When a specific application has the startup hook function enabled, ORIENTAIS OS calls this function when that application starts.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
<section id="shutdownhook-applicationname">
<h3>ShutdownHook_&lt;ApplicationName&gt;<a class="headerlink" href="#shutdownhook-applicationname" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ShutdownHook_</span><span class="o">&lt;</span><span class="n">ApplicationName</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">StatusType</span> <span class="n">Fatalerror</span><span class="p">)</span>
</pre></div>
</div>
<p>When a specific application has the shutdown hook function enabled, ORIENTAIS OS calls this hook function when that application is being shut down.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Fatalerror</p></td>
<td><p>Error code</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口由用户实现，并由ORIENTAIS OS调用。</p>
<p>This interface is implemented by the user and called by ORIENTAIS OS.</p>
</li>
</ul>
</div>
</section>
</section>
<section id="os-app-functions">
<h2>OS-APP Functions<a class="headerlink" href="#os-app-functions" title="Link to this heading">¶</a></h2>
<p>Os能够支持一系列操作系统对象的集合（任务，中断，Alarm，调度表，计数器）。该对象集合称为OS-Application。</p>
<p>Os can support a collection of a series of operating system objects (tasks, interrupts, Alarms, schedule tables, counters). This collection of objects is called an OS-Application.</p>
<p>存在两类OS-Application：</p>
<p>There are two types of OS-Applications:</p>
<blockquote>
<div><ul>
<li><p>可信OS-Application在监视或保护功能关闭的情况下运行。他们能够无限制地访问内存，操作系统模块的API，并且不需要在运行时受到强制时间限制。当处理器支持的情况下，允许它们在特权模式下运行。</p>
<p>Trusted OS-Applications run with monitoring or protection functions turned off. They have unrestricted access to memory, APIs of operating system modules, and do not need to be subject to mandatory time limits during runtime. When supported by the processor, they are allowed to run in privileged mode.</p>
</li>
<li><p>不可信任的OS-Application在监视或保护功能开启的情况下运行。它们对内存的访问受到限制，对操作系统模块的API的访问受到限制，并且需要在运行时进行强制时间限制。当处理器支持时，不允许它们在特权模式下运行。</p>
<p>Untrusted OS-Applications run with monitoring or protection functions turned on. Their access to memory is restricted, access to APIs of operating system modules is restricted, and they are subject to mandatory time limits during runtime. When supported by the processor, they are not allowed to run in privileged mode.</p>
</li>
</ul>
</div></blockquote>
<p>ORIENTAIS OS提供一些服务，这些服务向调用者提供有关访问权限和对象成员身份的信息。这些服务主要在OS-Application之间检查访问权限和参数的情况下使用。</p>
<p>ORIENTAIS OS provides some services that provide callers with information about access rights and object membership. These services are mainly used in situations where access rights and parameters are checked between OS-Applications.</p>
<p>OS-Applications的状态决定其操作系统对象从其他OS-Applications访问的范围。每个OS-Application始终处于以下状态之一：</p>
<p>The state of OS-Applications determines the scope of access to its operating system objects from other OS-Applications. Each OS-Application is always in one of the following states:</p>
<blockquote>
<div><ul>
<li><p>激活且可访问的（APPLICATION_ACCESSIBLE）：可以从其他OS-Applications访问操作系统对象。这是启动时的默认状态。</p>
<p>Active and accessible (APPLICATION_ACCESSIBLE): Operating system objects can be accessed from other OS-Applications. This is the default state at startup.</p>
</li>
<li><p>当前处于重启阶段（APPLICATION_RESTART）。无法从其他OS-Applications访问操作系统对象。状态有效，直到OS-Application调用AllowAccess。</p>
<p>Currently in the restart phase (APPLICATION_RESTART). Operating system objects cannot be accessed from other OS-Applications. The state remains valid until the OS-Application calls AllowAccess.</p>
</li>
<li><p>已终止且不可访问（APPLICATION_TERMINATED）：不能从其他OS-Applications访问操作系统对象。状态不会改变。</p>
<p>Terminated and inaccessible (APPLICATION_TERMINATED): Operating system objects cannot be accessed from other OS-Applications. The state does not change.</p>
</li>
</ul>
</div></blockquote>
<p>Figure显示了状态的转换：</p>
<p>Figure shows the state transitions:</p>
<figure class="align-center" id="id9">
<img alt="APP状态图" src="../../../_images/OS-Applications%E7%8A%B6%E6%80%81%E5%9B%BE.png" />
<figcaption>
<p><span class="caption-text">OS-Applications状态图（OS-Applications state diagram）</span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="getapplicationid">
<h3>GetApplicationID<a class="headerlink" href="#getapplicationid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationType</span> <span class="n">GetApplicationID</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the OS-Application ID of the object calling the API.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>ApplicationType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Application</p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>INVALID_OSAPPLICATION</p></td>
<td><p>INVALID OSAPPLICATION Id</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3、SC4下有效</p>
<p>Valid under SC3 and SC4.</p>
</li>
</ul>
</div>
</section>
<section id="getcurrentapplicationid">
<h3>GetCurrentApplicationID<a class="headerlink" href="#getcurrentapplicationid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationType</span> <span class="n">GetCurrentApplicationID</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the OS-Application ID to which the currently running Task/ISR/Hook belongs.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>ApplicationType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Application</p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>INVALID_OSAPPLICATION</p></td>
<td><p>INVALID OSAPPLICATION Id</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span> <span class="n">Trusted</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
<span class="n">TrustedFunction</span><span class="p">:</span>
<span class="n">TRUSTED_OsApplicationTrustedFunction_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">uint8</span> <span class="n">para</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="n">ApplicationType</span> <span class="n">application</span><span class="p">;</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App0</span><span class="o">*/</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetCurrentApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App0</span><span class="o">*/</span>

<span class="n">ret</span><span class="o">=</span> <span class="n">CallTrustedFunction</span><span class="p">(</span><span class="n">CFG_TRUSTED_OsApplicationTrustedFunction_0_IX</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">para</span><span class="p">)</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">TRUSTED_OsApplicationTrustedFunction_0</span><span class="p">(</span><span class="n">TrustedFunctionIndexType</span> <span class="n">ix</span><span class="p">,</span>
                  <span class="n">TrustedFunctionParameterRefType</span> <span class="n">ref</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
<span class="n">ApplicationType</span> <span class="n">application</span><span class="p">;</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App1</span><span class="o">*/</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetCurrentApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App0</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>GetApplicationID和GetCurrentApplicationID区别在于GetApplicationID可以获取可信函数的应用程序ID。</p>
<p>The difference between GetApplicationID and GetCurrentApplicationID is that GetApplicationID can obtain the application ID of a trusted function.</p>
</li>
<li><p>在SC3、SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="checkobjectaccess">
<h3>CheckObjectAccess<a class="headerlink" href="#checkobjectaccess" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectAccessType</span> <span class="n">CheckObjectAccess</span><span class="p">(</span><span class="n">ApplicationType</span> <span class="n">ApplID</span><span class="p">,</span> <span class="n">ObjectTypeType</span> <span class="n">ObjectType</span><span class="p">,</span> <span class="n">AppObjectId</span> <span class="n">ObjectID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service determines if the OS-Applications, given by ApplID, is allowed to use the IDs of a Task, ISR, Resource,Counter, Alarm or Schedule Table in API calls.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ApplID</p></td>
<td><p>OsApplication number</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ObjectType</p></td>
<td><p>Entity type, see</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ObjectID</p></td>
<td><p>Entity number</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>ObjectAccessType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ACCESS</p></td>
<td><p>the ApplID has access to the object.</p></td>
</tr>
<tr class="row-odd"><td><p>NO_ACCESS</p></td>
<td><p>the ApplID is invalid; ObjectType is invalid;the ApplID does not have access to the object.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ObjectAccessType</span> <span class="n">objectaccess</span><span class="p">;</span>
  <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">CheckObjectAccess</span><span class="p">(</span><span class="n">App0</span><span class="p">,</span> <span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">TaskInit</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">ACCESS</span> <span class="o">*/</span>
  <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">CheckObjectAccess</span><span class="p">(</span><span class="n">App0</span><span class="p">,</span> <span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">Task0</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">NO_ACCESS</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>请确保对象类型和对象ID是匹配的。</p>
<p>Please ensure that the object type and object ID match.</p>
</li>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="checkobjectownership">
<h3>CheckObjectOwnership<a class="headerlink" href="#checkobjectownership" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationType</span> <span class="n">CheckObjectOwnership</span><span class="p">(</span><span class="n">ObjectTypeType</span> <span class="n">ObjectType</span><span class="p">,</span> <span class="n">AppObjectId</span> <span class="n">ObjectID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service determines to which OS-Application a given Task, ISR, Resource, Counter, Alarm or Schedule Table belongs.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ObjectType</p></td>
<td><p>Entity type, see</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ObjectID</p></td>
<td><p>Entity number</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>ApplicationType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>the OS-Application to which the object ObjectType belongs.</p></td>
</tr>
<tr class="row-odd"><td><p>INVALID_OSAPPLICATION</p></td>
<td><p>the ObjectID does not exist; ObjectType is invalid; the object type is BJECT_RESOURCE and the object is RES_SCHEDULER.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ApplicationType</span> <span class="n">application</span><span class="p">;</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">CheckObjectOwnership</span><span class="p">(</span><span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">TaskInit</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">App0</span><span class="p">,</span><span class="o">*/</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">CheckObjectOwnership</span><span class="p">(</span><span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">Task0</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">App1</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>请确保对象类型和对象ID是匹配的。</p>
<p>Please ensure that the object type and object ID match.</p>
</li>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="terminateapplication">
<h3>TerminateApplication<a class="headerlink" href="#terminateapplication" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">ApplicationType</span> <span class="n">Application</span><span class="p">,</span> <span class="n">RestartType</span> <span class="n">RestartOption</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns the current state of an OS-Application.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Application</p></td>
<td><p>Application user want to end</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>RestartOption</p></td>
<td><p>RESTART: Perform a restart NO_RESTART: Do not restart the app</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>&lt;Application&gt; was not valid (only in EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>&lt;RestartOption&gt; was neither RESTART nor NO_RESTART (only in EXTENDED status)</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>The caller does not have the right to terminate&lt;Application&gt; (only in EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_STATE</p></td>
<td><p>The state of &lt;Application&gt; does not allow terminating &lt;Application&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Call level at wrong context.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Interrupts are disabled/suspended, OS shall ignore the service.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Example</span><span class="mf">.1</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span><span class="n">SOFTWARE</span>
<span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">Task0</span><span class="p">:</span><span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span><span class="n">Resource</span><span class="p">:</span><span class="n">Resource_0</span><span class="p">,</span> <span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
  <span class="n">Alarm</span><span class="p">:</span><span class="n">Alarm_0</span><span class="p">,</span> <span class="n">Couner</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
  <span class="n">ScheduleTable</span><span class="p">:</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="n">Couner</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
  <span class="n">TickType</span> <span class="n">tick</span><span class="p">;</span>
  <span class="n">TaskStateRefType</span> <span class="n">taskState</span><span class="p">;</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">scheduletableStatus</span><span class="p">;</span>
  <span class="n">ApplicationStateType</span> <span class="n">applicationState</span><span class="p">;</span>

<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>

  <span class="n">SetRelAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">StartScheduleTableRel</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span>

  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">Task0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">taskState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">taskState</span> <span class="o">=</span> <span class="n">TASK_STATE_WAITING</span> <span class="o">*/</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">scheduletableStatus</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">scheduletableStatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING</span> <span class="o">*/</span>

  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span><span class="o">/*</span> <span class="n">Activating</span> <span class="n">Task0</span> <span class="n">to</span> <span class="n">terminate</span> <span class="n">App1</span><span class="o">*/</span>

<span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">==</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ACCESS</span><span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">OsTask_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">taskState</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ACCESS</span><span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">scheduletableStatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ACCESS</span><span class="o">*/</span>
<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_TERMINATED</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="n">NO_RESTART</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Example</span><span class="mf">.2</span>
<span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">RestartTask</span><span class="p">:</span> <span class="n">Task_Restart</span>
<span class="n">Task0</span><span class="p">:</span><span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
<span class="n">Task_Restart</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ApplicationStateType</span> <span class="n">applicationState</span><span class="p">;</span>

  <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>

  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">==</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

<span class="o">/*</span> <span class="n">step</span> <span class="mi">4</span><span class="o">*/</span>
<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_RESTARTING</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="n">RESTART</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task_Restart</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>如果重新启动的OS-Application配置了重启任务，则该任务将在重新启动时被激活。</p>
<p>If the OS-Application to be restarted is configured with a restart task, this task will be activated during the restart.</p>
</li>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="allowaccess">
<h3>AllowAccess<a class="headerlink" href="#allowaccess" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">AllowAccess</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service sets the own state of an OS-Application from APPLICATION_RESTARTING to APPLICATION_ACCESSIBLE.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>The OS-Application of the caller is in the wrong state</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Call level at wrong context.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Interrupts are disabled/suspended, OS shall ignore the service.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Example</span><span class="mf">.1</span>
<span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">RestartTask</span><span class="p">:</span> <span class="n">Task_Restart</span>
<span class="n">Task0</span><span class="p">:</span><span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
<span class="n">Task_Restart</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ApplicationStateType</span> <span class="n">applicationState</span><span class="p">;</span>

  <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>

  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">==</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">!=</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

<span class="o">/*</span> <span class="n">step</span> <span class="mi">4</span><span class="o">*/</span>
<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="n">RESTART</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task_Restart</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span><span class="o">*/</span>
<span class="n">AllowAccess</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="getapplicationstate">
<h3>GetApplicationState<a class="headerlink" href="#getapplicationstate" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">ApplicationType</span> <span class="n">Application</span><span class="p">,</span> <span class="n">ApplicationStateRefType</span> <span class="n">Value</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns the current state of an OS-Application.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Application</p></td>
<td><p>Application number user want to get</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Value</p></td>
<td><p>ACCESSIBLE:accessible RESTARTING:Restarting TERMINATED:ended</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>&lt;Application&gt; is not valid.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Call level at wrong context.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Interrupts are disabled/suspended, OS shall ignore the service.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>The address of Value is invalid.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
</section>
<section id="memory-protection-functions">
<h2>Memory Protection Functions<a class="headerlink" href="#memory-protection-functions" title="Link to this heading">¶</a></h2>
<p>内存保护策略是基于可执行程序的（数据，代码和堆栈）段。</p>
<p>The memory protection strategy is based on the (data, code, and stack) segments of the executable program.</p>
<p>堆栈：OS-Application包含许多任务和中断。根据定义，这些对象的堆栈仅属于所有者，因此即使这些对象属于同一OS-Application，对象之间也不应共享堆栈数据。</p>
<p>Stack: An OS-Application contains many tasks and interrupts. By definition, the stacks of these objects belong only to their owners, so stack data should not be shared between objects even if they belong to the same OS-Application.</p>
<p>任务和中断堆栈的内存保护非常有用，主要有两个原因：</p>
<p>Memory protection for task and interrupt stacks is very useful for two main reasons:</p>
<blockquote>
<div><ul>
<li><p>与堆栈监视相比，可以更直接地检测任务或中断的堆栈上溢和下溢</p>
<p>Compared with stack monitoring, it can more directly detect stack overflows and underflows of tasks or interrupts.</p>
</li>
<li><p>在OS-Application的组成部分之间提供保护，例如满足一些安全约束</p>
<p>It provides protection between components of an OS-Application, such as meeting some security constraints.</p>
</li>
</ul>
</div></blockquote>
<p>数据：OS-Application具有私有数据段，而任务/中断具有私有数据段。OS-Application的所有任务/中断共享OS-Application的私有数据段。</p>
<p>Data: An OS-Application has a private data segment, and tasks/interrupts have their own private data segments. All tasks/interrupts of an OS-Application share the private data segment of the OS-Application.</p>
<p>代码：代码段是OS-Application专用的，也可以在所有OS-Applications之间共享（以使用共享库）。在不使用代码保护的情况下，执行不正确的代码最终将导致内存，时序或服务冲突。</p>
<p>Code: Code segments are dedicated to an OS-Application, and can also be shared among all OS-Applications (for using shared libraries). Without code protection, executing incorrect code will eventually lead to memory, timing, or service conflicts.</p>
<section id="checkisrmemoryaccess">
<h3>CheckISRMemoryAccess<a class="headerlink" href="#checkisrmemoryaccess" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AccessType</span> <span class="n">CheckISRMemoryAccess</span><span class="p">(</span><span class="n">ISRType</span> <span class="n">ISRID</span><span class="p">,</span> <span class="n">MemoryStartAddressType</span> <span class="n">Address</span><span class="p">,</span> <span class="n">MemorySizeType</span> <span class="n">Size</span><span class="p">)</span>
</pre></div>
</div>
<p>This service checks if a memory region is write/read/execute accessible and also returns information if the memory region is part of the stack space.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ISRID</p></td>
<td><p>Interrupt Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Address</p></td>
<td><p>Memory area start address</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Size</p></td>
<td><p>Memory area size</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>AccessType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NO_PERMISSION</p></td>
<td><p>Permission denied</p></td>
</tr>
<tr class="row-odd"><td><p>OSMEMORY_IS_READABLE(Access)</p></td>
<td><p>Non-zero means read permission</p></td>
</tr>
<tr class="row-even"><td><p>OSMEMORY_IS_WRITEABLE(Access)</p></td>
<td><p>Non-zero means write permission</p></td>
</tr>
<tr class="row-odd"><td><p>OSMEMORY_IS_EXECUTABLE(Access)</p></td>
<td><p>Non-zero means execute permission</p></td>
</tr>
<tr class="row-even"><td><p>OSMEMORY_IS_STACKSPACE(Access)</p></td>
<td><p>Non-zero means stack space</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
<li><p>请在可信OS-Application的任务或中断中调用该服务</p>
<p>Please call this service in a task or interrupt of a trusted OS-Application</p>
</li>
</ul>
</div>
</section>
<section id="checktaskmemoryaccess">
<h3>CheckTaskMemoryAccess<a class="headerlink" href="#checktaskmemoryaccess" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AccessType</span> <span class="n">CheckTaskMemoryAccess</span><span class="p">(</span><span class="n">TaskType</span> <span class="n">TaskID</span><span class="p">,</span> <span class="n">MemoryStartAddressType</span> <span class="n">Address</span><span class="p">,</span> <span class="n">MemorySizeType</span> <span class="n">Size</span><span class="p">)</span>
</pre></div>
</div>
<p>This service checks if a memory region is write/read/execute accessible and also returns information if the memory region is part of the stack space.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TaskID</p></td>
<td><p>Task Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Address</p></td>
<td><p>Memory area start address</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Size</p></td>
<td><p>Memory area size</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>AccessType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NO_PERMISSION</p></td>
<td><p>Permission denied</p></td>
</tr>
<tr class="row-odd"><td><p>OSMEMORY_IS_READABLE(Access)</p></td>
<td><p>Non-zero means read permission</p></td>
</tr>
<tr class="row-even"><td><p>OSMEMORY_IS_WRITEABLE(Access)</p></td>
<td><p>Non-zero means write permission</p></td>
</tr>
<tr class="row-odd"><td><p>OSMEMORY_IS_EXECUTABLE(Access)</p></td>
<td><p>Non-zero means execute permission</p></td>
</tr>
<tr class="row-even"><td><p>OSMEMORY_IS_STACKSPACE(Access)</p></td>
<td><p>Non-zero means stack space</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span> <span class="n">Trusted</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span> <span class="n">No</span> <span class="n">Trusted</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
  <span class="n">ERAY_INT0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">101</span><span class="p">,</span> <span class="n">Category</span><span class="p">:</span> <span class="n">CATEGORY_2</span>

<span class="c1">#define OS_START_SEC_CORE0_APP0_PRI_DATA</span>
<span class="c1">#include “Os_Mp_MemMap.h”</span>
<span class="n">uint8</span> <span class="n">app0Data</span><span class="p">;</span>
<span class="c1">#define OS_STOP_SEC_CORE0_APP0_PRI_DATA</span>
<span class="c1">#include “Os_Mp_MemMap.h”</span>

<span class="c1">#define OS_START_SEC_CORE0_APP1_PRI_DATA</span>
<span class="c1">#include “Os_Mp_MemMap.h”</span>
<span class="n">uint8</span> <span class="n">app1Data</span><span class="p">;</span>
<span class="c1">#define OS_STOP_SEC_CORE0_APP1_PRI_DATA</span>
<span class="c1">#include “Os_Mp_MemMap.h”</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">AccessType</span> <span class="n">access</span><span class="p">;</span>

    <span class="n">access</span> <span class="o">=</span> <span class="n">CheckTaskMemoryAccess</span><span class="p">(</span><span class="n">Task0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">app1Data</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">access</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">(</span> <span class="mi">0011</span> <span class="p">)</span>  <span class="mi">4</span><span class="p">:</span><span class="n">execult</span> <span class="o">|</span> <span class="mi">2</span><span class="p">:</span><span class="n">write</span> <span class="o">|</span> <span class="mi">1</span><span class="p">:</span><span class="n">read</span>  <span class="o">*/</span>
  <span class="n">access</span> <span class="o">=</span> <span class="n">CheckISRMemoryAccess</span><span class="p">(</span><span class="n">CFG_ISR_ERAY_INT0_ID</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">app1Data</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">access</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">(</span> <span class="mi">0011</span> <span class="p">)</span><span class="o">*/</span>

  <span class="n">access</span> <span class="o">=</span> <span class="n">CheckTaskMemoryAccess</span><span class="p">(</span><span class="n">Task0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">app0Data</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">access</span> <span class="o">=</span> <span class="mi">0</span><span class="o">*/</span>
  <span class="n">access</span> <span class="o">=</span> <span class="n">CheckISRMemoryAccess</span><span class="p">(</span><span class="n">CFG_ISR_ERAY_INT0_ID</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">app0Data</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">access</span> <span class="o">=</span> <span class="mi">0</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
<li><p>请在可信OS-Application的任务或中断中调用该服务</p>
<p>Please call this service in a task or interrupt of a trusted OS-Application</p>
</li>
</ul>
</div>
</section>
</section>
<section id="service-protection-functions">
<h2>Service Protection Functions<a class="headerlink" href="#service-protection-functions" title="Link to this heading">¶</a></h2>
<p>当OS-Application进行API调用，服务保护需要考虑多种情况：</p>
<p>When an OS-Application makes an API call, service protection needs to consider various scenarios:</p>
<blockquote>
<div><ul>
<li><p>句柄无效或超出范围</p>
<p>The handle is invalid or out of range</p>
</li>
<li><p>在错误的调用场景中，例如在StartupHook中调用ActivateTask()</p>
<p>In an incorrect calling scenario, such as calling ActivateTask() in StartupHook</p>
</li>
<li><p>或未能进行API调用导致ORIENTAIS OS处于未定义状态，例如：在占用资源期间结束任务</p>
<p>Or failing to make an API call, causing ORIENTAIS OS to be in an undefined state, for example: terminating a task while occupying resources</p>
</li>
<li><p>会影响系统中其他所有OS-Application的行为，例如：ShutdownOS()</p>
<p>Affecting the behavior of all other OS-Applications in the system, such as: ShutdownOS()</p>
</li>
<li><p>操纵属于另一个OS-Application的操作系统对象（该OS对象没有必需的权限），例如 OS-Application尝试对其不拥有访问权限的任务执行ActivateTask()</p>
<p>Manipulating operating system objects belonging to another OS-Application (the OS object does not have the necessary permissions), for example, an OS-Application attempts to execute ActivateTask() on a task that it does not have access permissions to</p>
</li>
</ul>
</div></blockquote>
<p>关于系统服务在错误的场景中被调用，请参阅**错误!未找到引用源**。</p>
<p>For system services being called in incorrect scenarios, please refer to <strong>Error! Reference source not found</strong>.</p>
<section id="calltrustedfunction">
<h3>CallTrustedFunction<a class="headerlink" href="#calltrustedfunction" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">CallTrustedFunction</span><span class="p">(</span><span class="n">TrustedFunctionIndexType</span> <span class="n">FunctionIndex</span><span class="p">,</span> <span class="n">TrustedFunctionParameterRefType</span> <span class="n">FunctionParams</span><span class="p">)</span>
</pre></div>
</div>
<p>The interface provided by trusted functions to external calls. Untrusted apps can access internal resources of trusted apps.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>FunctionIndex</p></td>
<td><p>The index number of the trusted function</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>FunctionParams</p></td>
<td><p>Pointer to a trusted function parameter</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_SERVICEID</p></td>
<td><p>Incoming trusted function index error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CORE</p></td>
<td><p>The object is not belong to local core</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span> <span class="n">Trusted</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
<span class="n">TrustedFunction</span><span class="p">:</span>
<span class="n">TRUSTED_OsApplicationTrustedFunction_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
<span class="n">ret</span><span class="o">=</span> <span class="n">CallTrustedFunction</span><span class="p">(</span><span class="n">CFG_TRUSTED_OsApplicationTrustedFunction_0_IX</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">TRUSTED_OsApplicationTrustedFunction_0</span><span class="p">(</span><span class="n">TrustedFunctionIndexType</span> <span class="n">ix</span><span class="p">,</span>
                  <span class="n">TrustedFunctionParameterRefType</span> <span class="n">ref</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
</section>
<section id="system-control-functions">
<h2>System Control Functions<a class="headerlink" href="#system-control-functions" title="Link to this heading">¶</a></h2>
<section id="startos">
<h3>StartOS<a class="headerlink" href="#startos" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StartOS</span><span class="p">(</span><span class="n">AppModeType</span> <span class="n">Mode</span><span class="p">)</span>
</pre></div>
</div>
<p>The user can call this system service to start the operating system in a specific mode.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Mode</p></td>
<td><p>Application mode (launch mode), defined by the user on the tool</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>系统初始化时必须使用此接口。</p>
<p>This interface must be used during system initialization.</p>
</li>
<li><p>所有核必须以相同模式启动。</p>
<p>All cores must start in the same mode.</p>
</li>
</ul>
</div>
</section>
<section id="shutdownos">
<h3>ShutdownOS<a class="headerlink" href="#shutdownos" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ShutdownOS</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>The user can call this system service to abort the overall system (e.g. emergency off).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>Error type, see StatusType for detail</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该服务调用者所属OS-Application必须是可信OS-Application</p>
<p>The OS-Application to which the caller of this service belongs must be a trusted OS-Application.</p>
</li>
</ul>
</div>
</section>
<section id="getactiveapplicationmode">
<h3>GetActiveApplicationMode<a class="headerlink" href="#getactiveapplicationmode" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AppModeType</span> <span class="n">GetActiveApplicationMode</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns t he current application mode. It may be used to write mode dependent code.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>AppModeType</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">void</span> <span class="n">mian</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">......</span>
  <span class="n">StartOS</span><span class="p">(</span><span class="n">OSDEFAULTAPPMODE</span><span class="p">);</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">AppModeType</span> <span class="n">appMode</span><span class="p">;</span>
  <span class="n">appMode</span> <span class="o">=</span> <span class="n">GetActiveApplicationMode</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">appMode</span> <span class="o">=</span> <span class="n">OSDEFAULTAPPMODE</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="multi-core-functions">
<h2>Multi-Core Functions<a class="headerlink" href="#multi-core-functions" title="Link to this heading">¶</a></h2>
<section id="getcoreid">
<h3>GetCoreID<a class="headerlink" href="#getcoreid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CoreIdType</span> <span class="n">GetCoreID</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the logical ID of the currently executing core.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>CoreIdType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Logic</p></td>
<td><p>ID</p></td>
</tr>
<tr class="row-odd"><td><p>OS_CORE_INVALID</p></td>
<td><p>INVALID CORE ID</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">CoreIdType</span>  <span class="n">coreId</span><span class="p">;</span>
  <span class="n">coreId</span> <span class="o">=</span> <span class="n">GetCoreID</span><span class="p">();</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>用户可以在StratOS之前调用该服务</p>
<p>Users can call this service before StartOS.</p>
</li>
</ul>
</div>
</section>
<section id="getnumberofactivatedcores">
<h3>GetNumberOfActivatedCores<a class="headerlink" href="#getnumberofactivatedcores" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint32</span> <span class="n">GetNumberOfActivatedCores</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the number of cores currently activated (cores managed by ORIENTAIS OS)</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>uint32</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>The</p></td>
<td><p>number of cores currently activated</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">uint32</span>  <span class="n">coreNum</span><span class="p">;</span>
  <span class="n">coreNum</span> <span class="o">=</span> <span class="n">GetNumberOfActivatedCores</span> <span class="p">();</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="startcore">
<h3>StartCore<a class="headerlink" href="#startcore" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StartCore</span><span class="p">(</span><span class="n">CoreIdType</span> <span class="n">CoreID</span><span class="p">,</span> <span class="n">StatusType</span> <span class="o">*</span><span class="n">Status</span><span class="p">)</span>
</pre></div>
</div>
<p>Start the specified Autosar core.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>CoreID</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Status</p></td>
<td><p>StatusType, The return value of this service</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">main</span> <span class="p">()</span>
<span class="p">{</span>
    <span class="n">StatusType</span> <span class="n">rv</span><span class="p">;</span>
    <span class="n">switch</span> <span class="p">(</span><span class="n">GetCoreID</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="n">OS_CORE_ID_MASTER</span><span class="p">:</span>
            <span class="o">/*</span> <span class="n">Check</span> <span class="n">the</span> <span class="n">CPU</span> <span class="n">Information</span> <span class="o">*/</span>
            <span class="o">/*</span> <span class="n">Software</span> <span class="ow">and</span> <span class="n">hardware</span> <span class="n">initial</span><span class="o">.</span> <span class="o">*/</span>
            <span class="o">/*</span> <span class="n">The</span> <span class="n">master</span> <span class="n">core</span> <span class="n">starts</span> <span class="n">automatically</span><span class="o">.</span> <span class="o">*/</span>
            <span class="n">StartOS</span><span class="p">(</span><span class="n">OSDEFAULTAPPMODE</span><span class="p">);</span>
            <span class="o">/*</span> <span class="n">If</span> <span class="n">other</span> <span class="n">cores</span> <span class="n">exist</span><span class="p">,</span> <span class="n">they</span> <span class="n">can</span> <span class="n">be</span> <span class="n">started</span> <span class="n">by</span> <span class="n">calling</span> <span class="n">StartCore</span><span class="o">*/</span>
            <span class="c1">#if(TRUE == CFG_CORE1_AUTOSAROS_ENABLE)</span>
              <span class="n">StartCore</span><span class="p">(</span><span class="n">OS_CORE_ID_1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rv</span><span class="p">);</span>
<span class="c1">#endif</span>
            <span class="o">......</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">OS_CORE_ID_1</span><span class="p">:</span>
        <span class="o">......</span>
            <span class="o">/*</span> <span class="n">The</span> <span class="n">slave</span> <span class="n">core</span> <span class="ow">is</span> <span class="n">started</span> <span class="n">by</span> <span class="n">master</span> <span class="n">core</span><span class="o">.</span> <span class="o">*/</span>
            <span class="n">StartOS</span><span class="p">(</span><span class="n">OSDEFAULTAPPMODE</span><span class="p">);</span>
        <span class="o">......</span>
        <span class="k">break</span><span class="p">;</span>
        <span class="o">......</span>
<span class="p">}</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="startnonautosarcore">
<h3>StartNonAutosarCore<a class="headerlink" href="#startnonautosarcore" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">StartNonAutosarCore</span><span class="p">(</span><span class="n">CoreIdType</span> <span class="n">CoreID</span><span class="p">,</span> <span class="n">StatusType</span> <span class="o">*</span><span class="n">Status</span><span class="p">)</span>
</pre></div>
</div>
<p>Start the specified non-Autosar core.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>CoreID</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Status</p></td>
<td><p>StatusType, The return value of this service</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Cores</span> <span class="n">Number</span><span class="p">:</span><span class="mi">1</span>
<span class="c1">#define             CFG_CORE_MAX                                                    3U</span>
<span class="c1">#define             OS_CORE_ID_MASTER                                       ((Os_CoreIdType)0U)</span>

<span class="c1">#define             OS_CORE_ID_0                                                    ((Os_CoreIdType)0U)</span>
<span class="c1">#define             OS_NONAUTOSARCORE_ID_0                          ((Os_CoreIdType)1U)</span>
<span class="c1">#define             OS_NONAUTOSARCORE_ID_1                          ((Os_CoreIdType)2U)</span>

<span class="n">void</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">......</span>
<span class="n">StartNonAutosarCore</span><span class="p">(</span><span class="n">OS_NONAUTOSARCORE_ID_0</span><span class="p">);</span>
<span class="o">......</span>
<span class="n">StartNonAutosarCore</span><span class="p">(</span><span class="n">OS_NONAUTOSARCORE_ID_1</span><span class="p">);</span>
<span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该函数仅允许启动非Autosar内核。</p>
<p>This function only allows starting non-Autosar kernels.</p>
</li>
</ul>
</div>
</section>
<section id="shutdownallcores">
<h3>ShutdownAllCores<a class="headerlink" href="#shutdownallcores" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ShutdownAllCores</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the logical ID of the currently executing core.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Error</p></td>
<td><p>error code, see StatusType</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Logic</p></td>
<td><p>ID</p></td>
</tr>
<tr class="row-odd"><td><p>OS_CORE_INVALID</p></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span> <span class="n">Trusted</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ShutdownAllCores</span><span class="p">(</span><span class="n">E_OK</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">ShutdownHook</span><span class="p">(</span><span class="n">StatusType</span> <span class="n">Error</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">/*</span> <span class="n">All</span> <span class="n">cores</span> <span class="n">shall</span> <span class="n">enter</span> <span class="n">the</span> <span class="n">hook</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">Error</span> <span class="ow">is</span> <span class="n">E_OK</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该服务调用者所属OS-Application必须是可信OS-Application。</p>
<p>The OS-Application to which the caller of this service belongs must be a trusted OS-Application.</p>
</li>
</ul>
</div>
</section>
<section id="controlidle">
<h3>ControlIdle<a class="headerlink" href="#controlidle" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ControlIdle</span><span class="p">(</span><span class="n">CoreIdType</span> <span class="n">CoreID</span><span class="p">,</span> <span class="n">IdleModeType</span> <span class="n">IdleMode</span><span class="p">)</span>
</pre></div>
</div>
<p>This API allows the caller to select the idle mode action which is performed during idle time of the OS.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>CoreID</p></td>
<td><p>Core Identifier</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>IdleMode</p></td>
<td><p>Selected Idle Mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid core and/or invalid idleMode</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Call at interrupt level</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Interrupts are disabled/suspended, OS shall ignore the service</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span> <span class="n">Trusted</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">void</span> <span class="n">main</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">StatusType</span>  <span class="n">ret</span><span class="p">;</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">ControlIdle</span><span class="p">(</span><span class="n">OS_CORE_ID_0</span><span class="p">,</span> <span class="n">OS_RUN</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="spinlock-functions">
<h2>Spinlock Functions<a class="headerlink" href="#spinlock-functions" title="Link to this heading">¶</a></h2>
<p>在多核中，需要一种新的机制来支持不同核上任务的互斥。这种新机制不适用于同核上的任务，且将返回错误。</p>
<p>In multi-core systems, a new mechanism is required to support mutual exclusion of tasks on different cores. This new mechanism is not applicable to tasks on the same core and will return an error.</p>
<p>“SpinlockType”是类似于“ResourceType”，且离线配置的自旋锁。</p>
<p>“SpinlockType” is a spinlock that is similar to “ResourceType” and configured offline.</p>
<p>自旋锁是一种繁忙的等待机制，它轮询某个自旋锁变量（Spinlock Variable）直到可用。</p>
<p>A spinlock is a busy-waiting mechanism that polls a spinlock variable until it becomes available.</p>
<p>一旦自旋锁被任务或2类中断占用，其他内核上的任务或2类中断将无法占用这个自旋锁。自旋锁机制不会在轮询锁定变量时对其他任务进行调度。</p>
<p>Once a spinlock is occupied by a task or a Class 2 interrupt, tasks or Class 2 interrupts on other cores cannot occupy this spinlock. The spinlock mechanism does not schedule other tasks while polling the lock variable.</p>
<section id="getspinlock">
<h3>GetSpinlock<a class="headerlink" href="#getspinlock" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetSpinlock</span><span class="p">(</span><span class="n">SpinlockIdType</span> <span class="n">SpinlockId</span><span class="p">)</span>
</pre></div>
</div>
<p>GetSpinlock tries to occupy a spin-lock variable. If the function returns, either the lock is successfully taken or an error has occurred.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>SpinlockId</p></td>
<td><p>The spin lock number user want to get</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID:</p></td>
<td><p>Invalid ID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_INTERFERENCE_DEADLOCK</p></td>
<td><p>Conflict deadlock, lock is already occupied by task</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_NESTING_DEADLOCK</p></td>
<td><p>Nested deadlock, another task on the same core is occupying another spinlock</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Spinlock_0</span><span class="p">:</span><span class="n">LockMethod</span><span class="p">:</span><span class="n">LOCK_NOTHING</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span><span class="p">,</span><span class="n">App1</span>
<span class="n">App0</span><span class="p">:</span>  <span class="n">Core</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>  <span class="n">Core</span><span class="p">:</span><span class="mi">1</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
    <span class="n">AccessingApplication</span><span class="p">:</span><span class="n">App0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>  <span class="o">/*</span> <span class="n">core</span> <span class="mi">0</span><span class="o">*/</span>
<span class="p">{</span>
  <span class="n">GetSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span>
  <span class="o">/*</span><span class="n">user</span> <span class="n">code</span><span class="o">*/</span>
  <span class="n">ReleaseSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="o">......</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>  <span class="o">/*</span> <span class="n">core</span> <span class="mi">1</span><span class="o">*/</span>
<span class="p">{</span>
  <span class="n">GetSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="o">/*</span><span class="n">Waiting</span> <span class="n">releasing</span> <span class="n">spinlock</span> <span class="n">on</span> <span class="n">core0</span><span class="o">*/</span>
  <span class="o">/*</span><span class="n">user</span> <span class="n">code</span><span class="o">*/</span>
<span class="n">ReleaseSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>自旋锁机制是一种主动轮询机制。该功能不会引起调度问题。</p>
<p>The spinlock mechanism is an active polling mechanism. This function does not cause scheduling issues.</p>
</li>
</ul>
</div>
</section>
<section id="releasespinlock">
<h3>ReleaseSpinlock<a class="headerlink" href="#releasespinlock" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ReleaseSpinlock</span><span class="p">(</span><span class="n">SpinlockIdType</span> <span class="n">SpinlockId</span><span class="p">)</span>
</pre></div>
</div>
<p>ReleaseSpinlock is the counterpart of GetSpinlock. ReleaseSpinlock releases a spinlock variable that was occupied before.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>SpinlockId</p></td>
<td><p>The spin lock number user want to release</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid ID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>Spinlock is not occupied by a task</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_NOFUNC</p></td>
<td><p>The spin locks are released in the wrong order</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在终止任务之前，必须释放通过GetSpinlock占用的所有自旋锁变量。在调用WaitEvent之前，应释放所有自旋锁。</p>
<p>All spinlock variables occupied via GetSpinlock must be released before terminating a task. All spinlocks should be released before calling WaitEvent.</p>
</li>
<li><p>如果ReleaseSpinlock尝试释放未获得的自旋锁，则会发生错误。</p>
<p>If ReleaseSpinlock attempts to release a spinlock that has not been acquired, an error will occur.</p>
</li>
</ul>
</div>
</section>
<section id="trytogetspinlock">
<h3>TryToGetSpinlock<a class="headerlink" href="#trytogetspinlock" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">TryToGetSpinlock</span><span class="p">(</span><span class="n">SpinlockIdType</span> <span class="n">SpinlockId</span><span class="p">,</span> <span class="n">TryToGetSpinlockType</span> <span class="o">*</span><span class="n">Success</span><span class="p">)</span>
</pre></div>
</div>
<p>Try to acquire a spinlock.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>SpinlockId</p></td>
<td><p>The spin lock number user want to get</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Success</p></td>
<td><p>Returns whether the specified spin lock is occupied</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No Error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Invalid ID</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong calling environment</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Unable to call system services because of interrupt disable/suspend</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>Parameter address access illegal</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this object</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_INTERFERENCE_DEADLOCK</p></td>
<td><p>Conflict deadlock, lock is already occupied by task</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_NESTING_DEADLOCK</p></td>
<td><p>Nested deadlock, another task on the same core is occupying another spinlock</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>No access to this spin lock</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Spinlock_0</span><span class="p">:</span><span class="n">LockMethod</span><span class="p">:</span><span class="n">LOCK_NOTHING</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span><span class="p">,</span><span class="n">App1</span>
<span class="n">App0</span><span class="p">:</span>  <span class="n">Core</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>  <span class="n">Core</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
    <span class="n">AccessingApplication</span><span class="p">:</span><span class="n">App0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>  <span class="o">/*</span> <span class="n">core</span> <span class="mi">0</span><span class="o">*/</span>
<span class="p">{</span>
  <span class="n">GetSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span>
  <span class="o">/*</span><span class="n">user</span> <span class="n">code</span><span class="o">*/</span>
  <span class="n">ReleaseSpinlock</span><span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="o">......</span>
<span class="p">}</span>
<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>  <span class="o">/*</span> <span class="n">core</span> <span class="mi">1</span><span class="o">*/</span>
<span class="p">{</span>
  <span class="n">TryToGetSpinlock</span> <span class="p">(</span><span class="n">Spinlock_0</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">TryToGetSpinlock</span> <span class="k">return</span> <span class="n">error</span> <span class="n">directly</span><span class="p">,</span> <span class="k">if</span> <span class="n">the</span> <span class="n">Spinlock_0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">released</span> <span class="n">on</span> <span class="n">core0</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>TryToGetSpinlock具有与GetSpinlock相同的功能，不同之处在于，如果自旋锁已被另一个内核上的任务占用，则该函数将设置输出参数“Success”并返回E_OK。</p>
<p>TryToGetSpinlock has the same function as GetSpinlock, with the difference that if the spinlock is already occupied by a task on another core, this function will set the output parameter “Success” and return E_OK.</p>
</li>
</ul>
</div>
</section>
</section>
<section id="ioc-functions">
<h2>IOC Functions<a class="headerlink" href="#ioc-functions" title="Link to this heading">¶</a></h2>
<p>IOC负责Os-Application之间的通信，特别是跨越核心或存储器保护边界的通信。 其内部功能与操作系统密切相关。IOC 支持 1:1、N:1 和 N:M 通信。同时支持队列和非队列通信。</p>
<p>IOC is responsible for communication between Os-Applications, especially communication across core or memory protection boundaries. Its internal functions are closely related to the operating system. IOC supports 1:1, N:1, and N:M communication. It also supports both queued and non-queued communication.</p>
<section id="iocsend-iocid-senderid">
<h3>IocSend_&lt;IocId&gt;[_&lt;SenderId&gt;]<a class="headerlink" href="#iocsend-iocid-senderid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocSend_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span><span class="p">[</span><span class="n">_</span><span class="o">&lt;</span><span class="n">SenderId</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data</span><span class="o">&gt;</span> <span class="n">IN</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span> <span class="n">numberOfBytesIN</span><span class="p">])</span>
</pre></div>
</div>
<p>Send data to implement 1:1 or N:1 queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>This function is generated individually for each sender. A single function is not reentrant (if called from different runnable entities belonging to the same sender), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>IN</p></td>
<td><p>The data value sent is identified by &lt;IocId&gt;. Parameters are passed by value for primitive data elements and by reference for all other types.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>numberOfBytesIN</p></td>
<td><p>Number of bytes to send (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>The data has been successfully delivered to the communication service.</p></td>
</tr>
<tr class="row-odd"><td><p>IOC_E_LIMIT</p></td>
<td><p>IOC internal communication buffer is full (scenario: receiver is slower than sender). This error will generate an IOC_E_LOST_DATA override error on the receiver side on the next data reception.</p></td>
</tr>
<tr class="row-even"><td><p>IOC_E_LENGTH</p></td>
<td><p>&lt;numberOfBytesIN&gt; exceeds the internal buffer or is equal to 0, so no data is sent.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：20
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0


 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata = 0xAA;
 IocSend_0(Sourcedata);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData;
 IocReceive_0(&amp;desData);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocwrite-iocid-senderid">
<h3>IocWrite_&lt;IocId&gt;[_&lt;SenderId&gt;]<a class="headerlink" href="#iocwrite-iocid-senderid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocWrite_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span><span class="p">[</span><span class="n">_</span><span class="o">&lt;</span><span class="n">SenderId</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data</span><span class="o">&gt;</span> <span class="n">IN</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span> <span class="n">numberOfBytesIN</span><span class="p">])</span>
</pre></div>
</div>
<p>Send data to implement 1:1 or N:1 non-queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>This function is generated individually for each sender. A single function is not reentrant (if called from different runnable entities belonging to the same sender), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>IN</p></td>
<td><p>The data value sent is identified by &lt;IocId&gt;. Parameters are passed by value for primitive data elements and by reference for all other types.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>numberOfBytesIN</p></td>
<td><p>Number of bytes to send (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>The data has been successfully delivered to the communication service.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：Not checked
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata = 0xAA;
 IocWrite_0(Sourcedata);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData;
 IocRead_0(&amp;desData);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocsendgroup-iocid">
<h3>IocSendGroup_&lt;IocId&gt;<a class="headerlink" href="#iocsendgroup-iocid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocSendGroup_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data1</span><span class="o">&gt;</span> <span class="n">IN1</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span> <span class="n">numberOfBytesIN1</span><span class="p">],</span> <span class="o">&lt;</span><span class="n">Data2</span><span class="o">&gt;</span> <span class="n">IN2</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span> <span class="n">numberOfBytesIN2</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Send a set of data to implement 1:1 or N:1 queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>This function is generated individually for each sender. A single function is not reentrant (if called from different runnable entities belonging to the same sender), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>IN</p></td>
<td><p>The data value sent is identified by &lt;IocId&gt;. Parameters are passed by value for primitive data elements and by reference for all other types.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>numberOfBytesIN</p></td>
<td><p>Number of bytes to send (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>The data has been successfully delivered to the communication service.</p></td>
</tr>
<tr class="row-odd"><td><p>IOC_E_LIMIT</p></td>
<td><p>The IOC internal communication buffer is full (situation: the receiver is slower than the sender). This error will generate an IOC_E_LOST_DATA override error on the receiver side on the next data reception.</p></td>
</tr>
<tr class="row-even"><td><p>IOC_E_LENGTH</p></td>
<td><p>&lt;numberOfBytesIN&gt; is outside the internal buffer or equal to 0, so no data will be sent.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：20
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
  - OsIocDataProperties_1：
    - OsIocDataPropertyIndex：1
    - OsIocInitValue：Not checked
    - ArrayLength：20
    - OsIocDataTypeRef：uint16
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata0 = 0xAA;
 uint16 Sourcedata1 = 0xAA;
 IocSendGroup_0(Sourcedata0 ,Sourcedata1);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData0;
 uint32 desData1;
 IocReceiveGroup_0(&amp;desData0 ,desData1);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocwritegroup-iocid">
<h3>IocWriteGroup_&lt;IocId&gt;<a class="headerlink" href="#iocwritegroup-iocid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocWriteGroup_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data1</span><span class="o">&gt;</span> <span class="n">IN1</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span> <span class="n">numberOfBytesIN1</span><span class="p">],</span> <span class="o">&lt;</span><span class="n">Data2</span><span class="o">&gt;</span> <span class="n">IN2</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span> <span class="n">numberOfBytesIN2</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Send a set of data to achieve 1:1 or N:1 non-queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>This function is generated individually for each sender. A single function is not reentrant (if called from different runnable entities belonging to the same sender), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>IN</p></td>
<td><p>The data value sent is identified by &lt;IocId&gt;. Parameters are passed by value for primitive data elements and by reference for all other types.</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>numberOfBytesIN</p></td>
<td><p>Number of bytes to send (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>The data has been successfully delivered to the communication service.</p></td>
</tr>
<tr class="row-odd"><td><p>IOC_E_LIMIT</p></td>
<td><p>The IOC internal communication buffer is full (situation: the receiver is slower than the sender). This error will generate an IOC_E_LOST_DATA override error on the receiver side on the next data reception.</p></td>
</tr>
<tr class="row-even"><td><p>IOC_E_LENGTH</p></td>
<td><p>&lt;numberOfBytesIN&gt; is outside the internal buffer or equal to 0, so no data will be sent.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：Not checked
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
  - OsIocDataProperties_1：
    - OsIocDataPropertyIndex：1
    - OsIocInitValue：Not checked
    - ArrayLength：20
    - OsIocDataTypeRef：uint16
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata0 = 0xAA;
 uint16 Sourcedata1 = 0xAA;
 IocWriteGroup_0(Sourcedata0 ,Sourcedata1);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData0;
 uint32 desData1;
 IocReadGroup_0(&amp;desData0 ,desData1);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocreceive-iocid">
<h3>IocReceive_&lt;IocId&gt;<a class="headerlink" href="#iocreceive-iocid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocReceive_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data</span><span class="o">&gt;</span> <span class="n">OUT</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span><span class="o">*</span> <span class="n">numberOfBytesOUT</span><span class="p">])</span>
</pre></div>
</div>
<p>Receive data and implement 1:1 or N:1 queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>The function is generated individually for each receiver. A single function is not reentrant (if called from different runnable entities belonging to the same receiver), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>OUT</p></td>
<td><p>Receives a data reference for a data element.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>numberOfBytesOUT</p></td>
<td><p>Number of bytes to receive (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>Data was received successfully.</p></td>
</tr>
<tr class="row-odd"><td><p>IOC_E_NO_DATA</p></td>
<td><p>No data is available for reception.</p></td>
</tr>
<tr class="row-even"><td><p>IOC_E_LOST_DATA</p></td>
<td><p>This Overlayed Error indicates that the IOC communication service refused an IOCSend request from sender due to an internal buffer overflow. There is no error in the data returned in parameter.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：20
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata = 0xAA;
 IocSend_0(Sourcedata);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData;
 IocReceive_0(&amp;desData);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocread-iocid-receiverid">
<h3>IocRead_&lt;IocId&gt;[_&lt;ReceiverId&gt;]<a class="headerlink" href="#iocread-iocid-receiverid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocRead_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span><span class="p">[</span><span class="n">_</span><span class="o">&lt;</span><span class="n">ReceiverId</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data</span><span class="o">&gt;</span> <span class="n">OUT</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span><span class="o">*</span> <span class="n">numberOfBytesOUT</span><span class="p">])</span>
</pre></div>
</div>
<p>Receive data to implement 1:1 or N:1 non-queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>The function is generated individually for each receiver. A single function is not reentrant (if called from different runnable entities belonging to the same receiver), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>OUT</p></td>
<td><p>Receives a data reference for a data element.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>numberOfBytesOUT</p></td>
<td><p>Number of bytes to receive (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>Data was received successfully.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：Not checked
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata = 0xAA;
 IocWrite_0(Sourcedata);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData;
 IocRead_0(&amp;desData);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocreceivegroup-iocid">
<h3>IocReceiveGroup_&lt;IocId&gt;<a class="headerlink" href="#iocreceivegroup-iocid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocReceiveGroup_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data1</span><span class="o">&gt;</span> <span class="n">OUT1</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span><span class="o">*</span> <span class="n">numberOfBytesOUT1</span><span class="p">],</span> <span class="o">&lt;</span><span class="n">Data2</span><span class="o">&gt;</span> <span class="n">OUT2</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span><span class="o">*</span> <span class="n">numberOfBytesOUT2</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Receive a set of data to implement 1:1 or N:1 queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>The function is generated individually for each receiver. A single function is not reentrant (if called from different runnable entities belonging to the same receiver), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>OUT</p></td>
<td><p>Receives a data reference for a data element.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>numberOfBytesOUT</p></td>
<td><p>Number of bytes to receive (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>Data was received successfully.</p></td>
</tr>
<tr class="row-odd"><td><p>IOC_E_NO_DATA</p></td>
<td><p>No data is available for reception.</p></td>
</tr>
<tr class="row-even"><td><p>IOC_E_LOST_DATA</p></td>
<td><p>This Overlayed Error indicates that the IOC communication service refused an IOCSend request from sender due to an internal buffer overflow. There is no error in the data returned in parameter.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：20
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
  - OsIocDataProperties_1：
    - OsIocDataPropertyIndex：1
    - OsIocInitValue：Not checked
    - ArrayLength：20
    - OsIocDataTypeRef：uint16
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata0 = 0xAA;
 uint16 Sourcedata1 = 0xAA;
 IocSendGroup_0(Sourcedata0 ,Sourcedata1);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData0;
 uint32 desData1;
 IocReceiveGroup_0(&amp;desData0 ,desData1);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocreadgroup-iocid">
<h3>IocReadGroup_&lt;IocId&gt;<a class="headerlink" href="#iocreadgroup-iocid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocReadGroup_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">Data1</span><span class="o">&gt;</span> <span class="n">OUT1</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span><span class="o">*</span> <span class="n">numberOfBytesOUT1</span><span class="p">],</span> <span class="o">&lt;</span><span class="n">Data2</span><span class="o">&gt;</span> <span class="n">OUT2</span><span class="p">,</span> <span class="p">[</span><span class="n">uint16</span><span class="o">*</span> <span class="n">numberOfBytesOUT2</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Receives a set of data to implement 1:1 or N:1 non-queue communication between Os-Applications located on the same or different cores.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>FALSE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>The function is generated individually for each receiver. A single function is not reentrant (if called from different runnable entities belonging to the same receiver), but different functions can be called in parallel.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>OUT</p></td>
<td><p>Receives a data reference for a data element.</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>numberOfBytesOUT</p></td>
<td><p>Number of bytes to receive (optional generation)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>Data was received successfully.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：Not checked
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
  - OsIocDataProperties_1：
    - OsIocDataPropertyIndex：1
    - OsIocInitValue：Not checked
    - ArrayLength：20
    - OsIocDataTypeRef：uint16
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata0 = 0xAA;
 uint16 Sourcedata1 = 0xAA;
 IocWriteGroup_0(Sourcedata0 ,Sourcedata1);
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData0;
 uint32 desData1;
 IocReadGroup_0(&amp;desData0 ,desData1);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
<section id="iocemptyqueue-iocid">
<h3>IocEmptyQueue_&lt;IocId&gt;<a class="headerlink" href="#iocemptyqueue-iocid" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">IocEmptyQueue_</span><span class="o">&lt;</span><span class="n">IocId</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>If the &lt;IocId&gt; in the function name identifies queued communication, this interface can be called to delete the contents of the IOC internal communication queue.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IOC_E_OK</p></td>
<td><p>The queue contents were successfully deleted.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- OsIocBufferLength：20
- OsIocDataProperties：
  - OsIocDataProperties_0：
    - OsIocDataPropertyIndex：0
    - OsIocInitValue：0xFF
    - ArrayLength：Not checked
    - OsIocDataTypeRef：uint32
- OsIocReceiverProperties：
  - OsIocReceiverProperties_0：
    - OsIocReceiverId：0
    - OsIocReceiverPullCB：ReceiverPullCB_0
    - OsIocReceivingOsApplicationRef：OsApplication_0_core0
- OsIocSenderProperties：
  - OsIocSenderProperties_0：
    - OsIocSenderId：0
    - OsIocSendingOsApplicationRef：OsApplication_1_Core0

 TASK(Task0)  /* core 0*/ /*OsApplication_1*/
 {
 uint32 Sourcedata = 0xAA;
 IocSend_0(Sourcedata);
 IocEmptyQueue_0();
 }

 TASK(Task0)  /* core 0*/ /*OsApplication_0*/
 {
 uint32 desData;
 IocReceive_0(&amp;desData);
 }
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>此接口一般直接由RTE进行调用。</p>
<p>This interface is generally called directly by the RTE.</p>
</li>
<li><p>ORIENTAIS OS支持无RTE时直接调用。</p>
<p>ORIENTAIS OS supports direct calling without the RTE.</p>
</li>
</ul>
</div>
</section>
</section>
<section id="peripheral-functions">
<h2>Peripheral Functions<a class="headerlink" href="#peripheral-functions" title="Link to this heading">¶</a></h2>
<p>在某些MCU架构中，存在内存映射的硬件寄存器（外设区域），这些寄存器只能在特定模式（例如特权模式）下访问。只要任务/中断服务例程（Tasks/ISRs）具有完全的硬件访问权限，它们就可以直接访问这些寄存器。如果操作系统使用了内存保护，那么非受信任的操作系统应用程序的任务/中断服务例程不能直接访问这些寄存器，因为这会被操作系统识别为内存违规。</p>
<p>In some MCU architectures, there are memory-mapped hardware registers (peripheral areas) that can only be accessed in specific modes (such as privileged mode). As long as tasks/interrupt service routines (Tasks/ISRs) have full hardware access permissions, they can access these registers directly. If the operating system uses memory protection, tasks/interrupt service routines of untrusted OS-Applications cannot access these registers directly, as this will be recognized as a memory violation by the operating system.</p>
<p>外设访问的接口被划分为8位、16位和32位。为了简化表达，ReadPeripheral&lt;x&gt;代表ReadPeripheral8、ReadPeripheral16、ReadPeripheral32。WritePeripheral&lt;x&gt;代表WritePeripheral8、WritePeripheral16、WritePeripheral32。ModifyPeripheral&lt;x&gt;代表ModifyPeripheral8、ModifyPeripheral16、ModifyPeripheral32。</p>
<p>Interfaces for peripheral access are divided into 8-bit, 16-bit, and 32-bit. For the sake of simplicity, ReadPeripheral&lt;x&gt; represents ReadPeripheral8, ReadPeripheral16, and ReadPeripheral32. WritePeripheral&lt;x&gt; represents WritePeripheral8, WritePeripheral16, and WritePeripheral32. ModifyPeripheral&lt;x&gt; represents ModifyPeripheral8, ModifyPeripheral16, and ModifyPeripheral32.</p>
<section id="readperipheral-x">
<h3>ReadPeripheral&lt;x&gt;<a class="headerlink" href="#readperipheral-x" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ReadPeripheral8</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">const</span> <span class="n">uint8</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint8</span> <span class="o">*</span><span class="n">ReadValue</span><span class="p">)</span>

<span class="n">StatusType</span> <span class="n">ReadPeripheral16</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">const</span> <span class="n">uint16</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint16</span> <span class="o">*</span><span class="n">ReadValue</span><span class="p">)</span>

<span class="n">StatusType</span> <span class="n">ReadPeripheral32</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">const</span> <span class="n">uint32</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint32</span> <span class="o">*</span><span class="n">ReadValue</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns the content of a given memory location (&lt;Address&gt;).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Area</p></td>
<td><p>hardware peripheral area reference</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Address</p></td>
<td><p>memory address, which will be read</p></td>
</tr>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>ReadValue</p></td>
<td><p>Returned value</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Area id is out of range (EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>Address does not belong to given Area (EXTENDED status)</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong call context of the API function (EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>The calling task or ISR is not allowed to access the given</p></td>
</tr>
</tbody>
</table>
</section>
<section id="writeperipheral-x">
<h3>WritePeripheral&lt;x&gt;<a class="headerlink" href="#writeperipheral-x" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">WritePeripheral8</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">uint8</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint8</span> <span class="n">WriteValue</span><span class="p">)</span>

<span class="n">StatusType</span> <span class="n">WritePeripheral16</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">uint16</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint16</span> <span class="n">WriteValue</span><span class="p">)</span>

<span class="n">StatusType</span> <span class="n">WritePeripheral32</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">uint32</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">WriteValue</span><span class="p">)</span>
</pre></div>
</div>
<p>This service writes theto a given memory location (&lt;memory address&gt;).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Area</p></td>
<td><p>hardware peripheral area reference</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Address</p></td>
<td><p>memory address, which will be writed</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>WriteValue</p></td>
<td><p>write value</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Area id is out of range (EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>Address does not belong to given Area (EXTENDED status)</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong call context of the API function (EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>The calling task or ISR is not allowed to access the given</p></td>
</tr>
</tbody>
</table>
</section>
<section id="modifyperipheral-x">
<h3>ModifyPeripheral&lt;x&gt;<a class="headerlink" href="#modifyperipheral-x" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">ModifyPeripheral8</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">uint8</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint8</span> <span class="n">Clearmask</span><span class="p">,</span> <span class="n">uint8</span> <span class="n">Setmask</span><span class="p">)</span>

<span class="n">StatusType</span> <span class="n">ModifyPeripheral16</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">uint16</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint16</span> <span class="n">Clearmask</span><span class="p">,</span> <span class="n">uint16</span> <span class="n">Setmask</span><span class="p">)</span>

<span class="n">StatusType</span> <span class="n">ModifyPeripheral32</span><span class="p">(</span><span class="n">AreaIdType</span> <span class="n">Area</span><span class="p">,</span> <span class="n">uint32</span> <span class="o">*</span><span class="n">Address</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">Clearmask</span><span class="p">,</span> <span class="n">uint32</span> <span class="n">Setmask</span><span class="p">)</span>

<span class="n">This</span> <span class="n">service</span> <span class="n">modifies</span> <span class="n">a</span> <span class="n">given</span> <span class="n">memory</span> <span class="n">location</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">memory</span> <span class="n">address</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">with</span> <span class="n">the</span> <span class="n">formula</span><span class="p">:</span> <span class="o">*&lt;</span><span class="n">Address</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">((</span><span class="o">*&lt;</span><span class="n">Address</span><span class="o">&gt;</span> <span class="o">&amp;</span> <span class="o">&lt;</span><span class="n">clearmask</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">|</span> <span class="o">&lt;</span><span class="n">setmask</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>This service modifies a given memory location (&lt;memory address&gt;).</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Area</p></td>
<td><p>hardware peripheral area reference</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Address</p></td>
<td><p>memory address, which will be modified</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Clearmask</p></td>
<td><p>memory address will be modified by a bit-AND</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>Setmask</p></td>
<td><p>memory address will be modified by a bit-OR</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No error</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>Area id is out of range (EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>Address does not belong to given Area (EXTENDED status)</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Wrong call context of the API function (EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ACCESS</p></td>
<td><p>The calling task or ISR is not allowed to access the given</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Spinlock_0</span><span class="p">:</span><span class="n">LockMethod</span><span class="p">:</span><span class="n">LOCK_NOTHING</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span><span class="p">,</span><span class="n">App1</span>
<span class="n">App0</span><span class="p">:</span>  <span class="n">Core</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>  <span class="o">/*</span> <span class="n">core</span> <span class="mi">1</span><span class="o">*/</span>
<span class="p">{</span>
  <span class="n">uint8</span><span class="o">*</span> <span class="n">Address8</span> <span class="o">=</span> <span class="n">REG_XXX1</span><span class="p">;</span>
  <span class="n">uint8</span> <span class="n">ReadValue8</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">uint16</span><span class="o">*</span> <span class="n">Address16</span> <span class="o">=</span> <span class="n">REG_XXX2</span><span class="p">;</span>
  <span class="n">uint16</span> <span class="n">ModifyValue16</span> <span class="o">=</span> <span class="mi">165</span><span class="p">;</span>
  <span class="n">uint32</span><span class="o">*</span> <span class="n">Address32</span> <span class="o">=</span> <span class="n">REG_XXX3</span><span class="p">;</span>
<span class="n">StatusType</span>  <span class="n">status</span><span class="p">;</span>

  <span class="n">status</span> <span class="o">=</span> <span class="n">ReadPeripheral8</span> <span class="p">(</span><span class="n">OsPeripheral_0</span><span class="p">,</span> <span class="n">Address8</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ReadValue8</span><span class="p">);</span>
  <span class="o">......</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">WritePeripheral16</span> <span class="p">(</span><span class="n">OsPeripheral_0</span><span class="p">,</span> <span class="n">Address16</span><span class="p">,</span> <span class="n">ModifyValue16</span><span class="p">);</span>
  <span class="o">......</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">ModifyPeripheral32</span> <span class="p">(</span><span class="n">OsPeripheral_0</span><span class="p">,</span> <span class="n">Address32</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xab</span><span class="p">);</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="extend-functions">
<h2>Extend Functions<a class="headerlink" href="#extend-functions" title="Link to this heading">¶</a></h2>
<p>Extend模块为用户提供了一些扩展功能：获取系统堆栈、任务堆栈、ISR堆栈使用情况的接口，检查版本信息的接口，获取检查ISR中断源的接口，检查CPU信息的接口。</p>
<p>The Extend module provides users with several extended functions: interfaces for obtaining the usage of system stacks, task stacks, and ISR stacks; interfaces for checking version information; interfaces for obtaining and checking ISR interrupt sources; and interfaces for checking CPU information.</p>
<section id="osgetversioninfo">
<h3>OSGetVersionInfo<a class="headerlink" href="#osgetversioninfo" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OSGetVersionInfo</span><span class="p">(</span><span class="n">Std_VersionInfoType</span> <span class="o">*</span><span class="n">osVerInfoPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>Provide Version information to user.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>osVerInfoPtr</p></td>
<td><p>pointer for getting OS version</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True

TASK(TaskInit)
{
……
Std_VersionInfoType * osVerInfoPtr；
OSGetVersionInfo(osVerInfoPtr);
    ……
}
</pre></div>
</div>
</section>
<section id="osgetstackusage">
<h3>OSGetStackUsage<a class="headerlink" href="#osgetstackusage" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">osStackUsageType</span> <span class="n">OSGetStackUsage</span><span class="p">(</span><span class="n">osStackObject</span> <span class="n">stack</span><span class="p">,</span> <span class="n">uint16</span> <span class="nb">id</span><span class="p">)</span>
</pre></div>
</div>
<p>Get max usage of system,task,ISR2 stack.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>stack</p></td>
<td><p>Stack type</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>id</p></td>
<td><p>Object ID</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>osStackUsageType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>uint32</p></td>
<td><p>Max usage of stack</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TaskInit: Priority:1, Preemptive Policy:FULL, Autostart:True

TASK(TaskInit)
{
    ……
osStackUsageType MaxUsage;
MaxUsage = OSGetStackUsage(OS_STACK_TASK, TaskInit);
    ……
}
</pre></div>
</div>
</section>
<section id="oscheckisrsource">
<h3>OSCheckISRSource<a class="headerlink" href="#oscheckisrsource" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">OSCheckISRSource</span><span class="p">(</span><span class="n">uint32</span> <span class="n">Source</span><span class="p">)</span>
</pre></div>
</div>
<p>OSCheckISRSource is used to check the interrupt source.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Source</p></td>
<td><p>Isr source</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TRUE</p></td>
<td><p>current triggered interrupt.</p></td>
</tr>
<tr class="row-odd"><td><p>FALSE</p></td>
<td><p>not current triggered interrupt.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*
*ISR(ISR_DMA_SF_DMA0_CH_0: Core0(CPU0))
*/
ISR(ISR_DMA_SF_DMA0_CH_0)
{
    ……
    StatusType ret;
    ret = OSCheckISRSource(DMA_SF_DMA0_CH_0)
    ……
}
</pre></div>
</div>
</section>
<section id="oscheckcpuinformation">
<h3>OSCheckCPUInformation<a class="headerlink" href="#oscheckcpuinformation" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OSCheckCPUInformation</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>OSCheckCPUInformation is used to check if the CPU information is correct.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>

<span class="n">void</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="o">......</span>
  <span class="n">OSCheckCPUInformation</span><span class="p">();</span>
  <span class="n">StartOS</span><span class="p">(</span><span class="n">OSDEFAULTAPPMODE</span><span class="p">);</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>

</main>
                        
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">接口描述（Interface Description）</a><ul>
<li><a class="reference internal" href="#task-functions">Task Functions</a><ul>
<li><a class="reference internal" href="#activatetask">ActivateTask</a></li>
<li><a class="reference internal" href="#terminatetask">TerminateTask</a></li>
<li><a class="reference internal" href="#chaintask">ChainTask</a></li>
<li><a class="reference internal" href="#schedule">Schedule</a></li>
<li><a class="reference internal" href="#gettaskid">GetTaskID</a></li>
<li><a class="reference internal" href="#gettaskstate">GetTaskState</a></li>
<li><a class="reference internal" href="#activatetaskasyn">ActivateTaskAsyn</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interrupt-functions">Interrupt Functions</a><ul>
<li><a class="reference internal" href="#enableallinterrupts">EnableAllInterrupts</a></li>
<li><a class="reference internal" href="#disableallinterrupts">DisableAllInterrupts</a></li>
<li><a class="reference internal" href="#resumeallinterrupts">ResumeAllInterrupts</a></li>
<li><a class="reference internal" href="#suspendallinterrupts">SuspendAllInterrupts</a></li>
<li><a class="reference internal" href="#resumeosinterrupts">ResumeOSInterrupts</a></li>
<li><a class="reference internal" href="#suspendosinterrupts">SuspendOSInterrupts</a></li>
<li><a class="reference internal" href="#getisrid">GetISRID</a></li>
<li><a class="reference internal" href="#enableinterruptsource">EnableInterruptSource</a></li>
<li><a class="reference internal" href="#disableinterruptsource">DisableInterruptSource</a></li>
<li><a class="reference internal" href="#clearpendinginterrupt">ClearPendingInterrupt</a></li>
</ul>
</li>
<li><a class="reference internal" href="#counter-functions">Counter Functions</a><ul>
<li><a class="reference internal" href="#incrementcounter">IncrementCounter</a></li>
<li><a class="reference internal" href="#getcountervalue">GetCounterValue</a></li>
<li><a class="reference internal" href="#getelapsedvalue">GetElapsedValue</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resource-functions">Resource Functions</a><ul>
<li><a class="reference internal" href="#getresource">GetResource</a></li>
<li><a class="reference internal" href="#releaseresource">ReleaseResource</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alarm-functions">Alarm Functions</a><ul>
<li><a class="reference internal" href="#getalarmbase">GetAlarmBase</a></li>
<li><a class="reference internal" href="#getalarm">GetAlarm</a></li>
<li><a class="reference internal" href="#setrelalarm">SetRelAlarm</a></li>
<li><a class="reference internal" href="#setabsalarm">SetAbsAlarm</a></li>
<li><a class="reference internal" href="#cancelalarm">CancelAlarm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#event-functions">Event Functions</a><ul>
<li><a class="reference internal" href="#setevent">SetEvent</a></li>
<li><a class="reference internal" href="#clearevent">ClearEvent</a></li>
<li><a class="reference internal" href="#getevent">GetEvent</a></li>
<li><a class="reference internal" href="#waitevent">WaitEvent</a></li>
<li><a class="reference internal" href="#waitallevents">WaitAllEvents</a></li>
<li><a class="reference internal" href="#seteventasyn">SetEventAsyn</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scheduletable-functions">ScheduleTable Functions</a><ul>
<li><a class="reference internal" href="#startscheduletablerel">StartScheduleTableRel</a></li>
<li><a class="reference internal" href="#startscheduletableabs">StartScheduleTableAbs</a></li>
<li><a class="reference internal" href="#stopscheduletable">StopScheduleTable</a></li>
<li><a class="reference internal" href="#nextscheduletable">NextScheduleTable</a></li>
<li><a class="reference internal" href="#startscheduletablesynchron">StartScheduleTableSynchron</a></li>
<li><a class="reference internal" href="#syncscheduletable">SyncScheduleTable</a></li>
<li><a class="reference internal" href="#setscheduletableasync">SetScheduleTableAsync</a></li>
<li><a class="reference internal" href="#getscheduletablestatus">GetScheduleTableStatus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hook-functions">Hook Functions</a><ul>
<li><a class="reference internal" href="#errorhook">ErrorHook</a></li>
<li><a class="reference internal" href="#posttaskhook">PostTaskHook</a></li>
<li><a class="reference internal" href="#pretaskhook">PreTaskHook</a></li>
<li><a class="reference internal" href="#startuphook">StartupHook</a></li>
<li><a class="reference internal" href="#shutdownhook">ShutdownHook</a></li>
<li><a class="reference internal" href="#protectionhook">ProtectionHook</a></li>
<li><a class="reference internal" href="#idlehook-core-n">IdleHook_Core&lt;n&gt;</a></li>
<li><a class="reference internal" href="#errorhook-applicationname">ErrorHook_&lt;ApplicationName&gt;</a></li>
<li><a class="reference internal" href="#startuphook-applicationname">StartupHook_&lt;ApplicationName&gt;</a></li>
<li><a class="reference internal" href="#shutdownhook-applicationname">ShutdownHook_&lt;ApplicationName&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#os-app-functions">OS-APP Functions</a><ul>
<li><a class="reference internal" href="#getapplicationid">GetApplicationID</a></li>
<li><a class="reference internal" href="#getcurrentapplicationid">GetCurrentApplicationID</a></li>
<li><a class="reference internal" href="#checkobjectaccess">CheckObjectAccess</a></li>
<li><a class="reference internal" href="#checkobjectownership">CheckObjectOwnership</a></li>
<li><a class="reference internal" href="#terminateapplication">TerminateApplication</a></li>
<li><a class="reference internal" href="#allowaccess">AllowAccess</a></li>
<li><a class="reference internal" href="#getapplicationstate">GetApplicationState</a></li>
</ul>
</li>
<li><a class="reference internal" href="#memory-protection-functions">Memory Protection Functions</a><ul>
<li><a class="reference internal" href="#checkisrmemoryaccess">CheckISRMemoryAccess</a></li>
<li><a class="reference internal" href="#checktaskmemoryaccess">CheckTaskMemoryAccess</a></li>
</ul>
</li>
<li><a class="reference internal" href="#service-protection-functions">Service Protection Functions</a><ul>
<li><a class="reference internal" href="#calltrustedfunction">CallTrustedFunction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-control-functions">System Control Functions</a><ul>
<li><a class="reference internal" href="#startos">StartOS</a></li>
<li><a class="reference internal" href="#shutdownos">ShutdownOS</a></li>
<li><a class="reference internal" href="#getactiveapplicationmode">GetActiveApplicationMode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-core-functions">Multi-Core Functions</a><ul>
<li><a class="reference internal" href="#getcoreid">GetCoreID</a></li>
<li><a class="reference internal" href="#getnumberofactivatedcores">GetNumberOfActivatedCores</a></li>
<li><a class="reference internal" href="#startcore">StartCore</a></li>
<li><a class="reference internal" href="#startnonautosarcore">StartNonAutosarCore</a></li>
<li><a class="reference internal" href="#shutdownallcores">ShutdownAllCores</a></li>
<li><a class="reference internal" href="#controlidle">ControlIdle</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spinlock-functions">Spinlock Functions</a><ul>
<li><a class="reference internal" href="#getspinlock">GetSpinlock</a></li>
<li><a class="reference internal" href="#releasespinlock">ReleaseSpinlock</a></li>
<li><a class="reference internal" href="#trytogetspinlock">TryToGetSpinlock</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ioc-functions">IOC Functions</a><ul>
<li><a class="reference internal" href="#iocsend-iocid-senderid">IocSend_&lt;IocId&gt;[_&lt;SenderId&gt;]</a></li>
<li><a class="reference internal" href="#iocwrite-iocid-senderid">IocWrite_&lt;IocId&gt;[_&lt;SenderId&gt;]</a></li>
<li><a class="reference internal" href="#iocsendgroup-iocid">IocSendGroup_&lt;IocId&gt;</a></li>
<li><a class="reference internal" href="#iocwritegroup-iocid">IocWriteGroup_&lt;IocId&gt;</a></li>
<li><a class="reference internal" href="#iocreceive-iocid">IocReceive_&lt;IocId&gt;</a></li>
<li><a class="reference internal" href="#iocread-iocid-receiverid">IocRead_&lt;IocId&gt;[_&lt;ReceiverId&gt;]</a></li>
<li><a class="reference internal" href="#iocreceivegroup-iocid">IocReceiveGroup_&lt;IocId&gt;</a></li>
<li><a class="reference internal" href="#iocreadgroup-iocid">IocReadGroup_&lt;IocId&gt;</a></li>
<li><a class="reference internal" href="#iocemptyqueue-iocid">IocEmptyQueue_&lt;IocId&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#peripheral-functions">Peripheral Functions</a><ul>
<li><a class="reference internal" href="#readperipheral-x">ReadPeripheral&lt;x&gt;</a></li>
<li><a class="reference internal" href="#writeperipheral-x">WritePeripheral&lt;x&gt;</a></li>
<li><a class="reference internal" href="#modifyperipheral-x">ModifyPeripheral&lt;x&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extend-functions">Extend Functions</a><ul>
<li><a class="reference internal" href="#osgetversioninfo">OSGetVersionInfo</a></li>
<li><a class="reference internal" href="#osgetstackusage">OSGetStackUsage</a></li>
<li><a class="reference internal" href="#oscheckisrsource">OSCheckISRSource</a></li>
<li><a class="reference internal" href="#oscheckcpuinformation">OSCheckCPUInformation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>