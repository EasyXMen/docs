<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>OS-APP(Functions) &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanSM/CanSM.html">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoIP/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EcuM/EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSM/EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StbM/StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">OS-APP(Functions)</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
        <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/Os/09_app_func_api.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="os-app-functions">
<h1>OS-APP(Functions)<a class="headerlink" href="#os-app-functions" title="Link to this heading">¶</a></h1>
<p>Os能够支持一系列操作系统对象的集合(任务，中断，Alarm，调度表，计数器)。该对象集合称为OS-Application。</p>
<p>The OS can support a collection of operating system objects (tasks, interrupts, alarms, schedule tables, counters). This object collection is called an OS-Application.</p>
<p>存在两类OS-Application：</p>
<p>There are two types of OS-Applications:</p>
<blockquote>
<div><ul>
<li><p>可信OS-Application在监视或保护功能关闭的情况下运行。他们能够无限制地访问内存，操作系统模块的API，并且不需要在运行时受到强制时间限制。当处理器支持的情况下，允许它们在特权模式下运行。</p>
<p>Trusted OS-Applications run with monitoring or protection functions disabled. They have unrestricted access to memory and OS module APIs, and are not subject to mandatory time constraints during runtime. When processor support is available, they are permitted to run in privileged mode.</p>
</li>
<li><p>不可信任的OS-Application在监视或保护功能开启的情况下运行。它们对内存的访问受到限制，对操作系统模块的API的访问受到限制，并且需要在运行时进行强制时间限制。当处理器支持时，不允许它们在特权模式下运行。</p>
<p>Untrusted OS-Applications run with monitoring or protection functions enabled. Their access to memory is restricted, access to OS module APIs is limited, and they are subject to mandatory time constraints during runtime. When processor support is available, they are not permitted to run in privileged mode.</p>
</li>
</ul>
</div></blockquote>
<p>ORIENTAIS OS提供一些服务，这些服务向调用者提供有关访问权限和对象成员身份的信息。这些服务主要在OS-Application之间检查访问权限和参数的情况下使用。</p>
<p>ORIENTAIS OS provides services that supply callers with information about access rights and object membership. These services are primarily used to check access rights and parameters between OS-Applications.</p>
<p>OS-Applications的状态决定其操作系统对象从其他OS-Applications访问的范围。每个OS-Application始终处于以下状态之一：</p>
<p>The state of an OS-Application determines the accessibility scope of its operating system objects from other OS-Applications. Each OS-Application is always in one of the following states:</p>
<blockquote>
<div><ul>
<li><p>激活且可访问的(APPLICATION_ACCESSIBLE)：可以从其他OS-Applications访问操作系统对象。这是启动时的默认状态。</p>
<p>Active and accessible (APPLICATION_ACCESSIBLE): Operating system objects can be accessed from other OS-Applications. This is the default state at startup.</p>
</li>
<li><p>当前处于重启阶段(APPLICATION_RESTART)。无法从其他OS-Applications访问操作系统对象。状态有效，直到OS-Application调用AllowAccess。</p>
<p>Currently in restart phase (APPLICATION_RESTART): Operating system objects cannot be accessed from other OS-Applications. This state remains valid until the OS-Application calls AllowAccess.</p>
</li>
<li><p>已终止且不可访问(APPLICATION_TERMINATED)：不能从其他OS-Applications访问操作系统对象。状态不会改变。</p>
<p>Terminated and inaccessible (APPLICATION_TERMINATED): Operating system objects cannot be accessed from other OS-Applications. This state does not change.</p>
</li>
</ul>
</div></blockquote>
<p>Figure显示了状态的转换：</p>
<p>The figure shows the state transitions:</p>
<figure class="align-center" id="id1">
<img alt="APP状态图 (OS-Application State Diagram)" src="../../../_images/OS-Applications%E7%8A%B6%E6%80%81%E5%9B%BE.png" />
<figcaption>
<p><span class="caption-text">OS-Applications状态图 (OS-Application State Diagram)</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="getapplicationid">
<h2>GetApplicationID<a class="headerlink" href="#getapplicationid" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationType</span> <span class="n">GetApplicationID</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the OS-Application ID of the object calling the API.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>ApplicationType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Application</p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>INVALID_OSAPPLICATION</p></td>
<td><p>INVALID OSAPPLICATION Id</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3、SC4下有效</p>
<p>Valid under SC3 and SC4.</p>
</li>
</ul>
</div>
</section>
<section id="getcurrentapplicationid">
<h2>GetCurrentApplicationID<a class="headerlink" href="#getcurrentapplicationid" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationType</span> <span class="n">GetCurrentApplicationID</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the OS-Application ID to which the currently running Task/ISR/Hook belongs.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>ApplicationType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Application</p></td>
<td><p>number</p></td>
</tr>
<tr class="row-odd"><td><p>INVALID_OSAPPLICATION</p></td>
<td><p>INVALID OSAPPLICATION Id</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span> <span class="n">Trusted</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>
<span class="n">TrustedFunction</span><span class="p">:</span>
<span class="n">TRUSTED_OsApplicationTrustedFunction_0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">uint8</span> <span class="n">para</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="n">ApplicationType</span> <span class="n">application</span><span class="p">;</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App0</span><span class="o">*/</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetCurrentApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App0</span><span class="o">*/</span>

<span class="n">ret</span><span class="o">=</span> <span class="n">CallTrustedFunction</span><span class="p">(</span><span class="n">CFG_TRUSTED_OsApplicationTrustedFunction_0_IX</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">para</span><span class="p">)</span>
  <span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">TRUSTED_OsApplicationTrustedFunction_0</span><span class="p">(</span><span class="n">TrustedFunctionIndexType</span> <span class="n">ix</span><span class="p">,</span>
                  <span class="n">TrustedFunctionParameterRefType</span> <span class="n">ref</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
<span class="n">ApplicationType</span> <span class="n">application</span><span class="p">;</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App1</span><span class="o">*/</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">GetCurrentApplicationID</span><span class="p">();</span>
  <span class="o">/*</span> <span class="n">application</span> <span class="o">=</span> <span class="n">App0</span><span class="o">*/</span>
  <span class="o">......</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>GetApplicationID和GetCurrentApplicationID区别在于GetApplicationID可以获取可信函数的应用程序ID。</p>
<p>The difference between GetApplicationID and GetCurrentApplicationID is that GetApplicationID can retrieve the application ID of a trusted function.</p>
</li>
<li><p>在SC3、SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="checkobjectaccess">
<h2>CheckObjectAccess<a class="headerlink" href="#checkobjectaccess" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectAccessType</span> <span class="n">CheckObjectAccess</span><span class="p">(</span><span class="n">ApplicationType</span> <span class="n">ApplID</span><span class="p">,</span> <span class="n">ObjectTypeType</span> <span class="n">ObjectType</span><span class="p">,</span> <span class="n">AppObjectId</span> <span class="n">ObjectID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service determines if the OS-Applications, given by ApplID, is allowed to use the IDs of a Task, ISR, Resource,Counter, Alarm or Schedule Table in API calls.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ApplID</p></td>
<td><p>OsApplication number</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ObjectType</p></td>
<td><p>Entity type, see</p></td>
</tr>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ObjectID</p></td>
<td><p>Entity number</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>ObjectAccessType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ACCESS</p></td>
<td><p>the ApplID has access to the object.</p></td>
</tr>
<tr class="row-odd"><td><p>NO_ACCESS</p></td>
<td><p>the ApplID is invalid; ObjectType is invalid;the ApplID does not have access to the object.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ObjectAccessType</span> <span class="n">objectaccess</span><span class="p">;</span>
  <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">CheckObjectAccess</span><span class="p">(</span><span class="n">App0</span><span class="p">,</span> <span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">TaskInit</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">ACCESS</span> <span class="o">*/</span>
  <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">CheckObjectAccess</span><span class="p">(</span><span class="n">App0</span><span class="p">,</span> <span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">Task0</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">NO_ACCESS</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>请确保对象类型和对象ID是匹配的。</p>
<p>Ensure that the object type and object ID match.</p>
</li>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="checkobjectownership">
<h2>CheckObjectOwnership<a class="headerlink" href="#checkobjectownership" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ApplicationType</span> <span class="n">CheckObjectOwnership</span><span class="p">(</span><span class="n">ObjectTypeType</span> <span class="n">ObjectType</span><span class="p">,</span> <span class="n">AppObjectId</span> <span class="n">ObjectID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service determines to which OS-Application a given Task, ISR, Resource, Counter, Alarm or Schedule Table belongs.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ObjectType</p></td>
<td><p>Entity type, see</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ObjectID</p></td>
<td><p>Entity number</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>ApplicationType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>the OS-Application to which the object ObjectType belongs.</p></td>
</tr>
<tr class="row-odd"><td><p>INVALID_OSAPPLICATION</p></td>
<td><p>the ObjectID does not exist; ObjectType is invalid; the object type is BJECT_RESOURCE and the object is RES_SCHEDULER.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">Task0</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ApplicationType</span> <span class="n">application</span><span class="p">;</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">CheckObjectOwnership</span><span class="p">(</span><span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">TaskInit</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">App0</span><span class="p">,</span><span class="o">*/</span>
  <span class="n">application</span> <span class="o">=</span> <span class="n">CheckObjectOwnership</span><span class="p">(</span><span class="n">OBJECT_TASK</span><span class="p">,</span> <span class="n">Task0</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">objectaccess</span> <span class="o">=</span> <span class="n">App1</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>请确保对象类型和对象ID是匹配的。</p>
<p>Ensure that the object type and object ID match.</p>
</li>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="terminateapplication">
<h2>TerminateApplication<a class="headerlink" href="#terminateapplication" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">ApplicationType</span> <span class="n">Application</span><span class="p">,</span> <span class="n">RestartType</span> <span class="n">RestartOption</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns the current state of an OS-Application.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Application</p></td>
<td><p>Application user want to end</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>RestartOption</p></td>
<td><p>RESTART: Perform a restart NO_RESTART: Do not restart the app</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>&lt;Application&gt; was not valid (only in EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_VALUE</p></td>
<td><p>&lt;RestartOption&gt; was neither RESTART nor NO_RESTART (only in EXTENDED status)</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ACCESS</p></td>
<td><p>The caller does not have the right to terminate&lt;Application&gt; (only in EXTENDED status)</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_STATE</p></td>
<td><p>The state of &lt;Application&gt; does not allow terminating &lt;Application&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Call level at wrong context.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Interrupts are disabled/suspended, OS shall ignore the service.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Example</span><span class="mf">.1</span>
<span class="n">Counter_0</span><span class="p">:</span> <span class="n">MaxTick</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MinTick</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">CounterType</span><span class="p">:</span><span class="n">SOFTWARE</span>
<span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">Task0</span><span class="p">:</span><span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span><span class="n">Resource</span><span class="p">:</span><span class="n">Resource_0</span><span class="p">,</span> <span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
  <span class="n">Alarm</span><span class="p">:</span><span class="n">Alarm_0</span><span class="p">,</span> <span class="n">Couner</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
  <span class="n">ScheduleTable</span><span class="p">:</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="n">Couner</span><span class="p">:</span><span class="n">Counter_0</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">StatusType</span> <span class="n">ret</span><span class="p">;</span>
  <span class="n">TickType</span> <span class="n">tick</span><span class="p">;</span>
  <span class="n">TaskStateRefType</span> <span class="n">taskState</span><span class="p">;</span>
  <span class="n">ScheduleTableStatusType</span> <span class="n">scheduletableStatus</span><span class="p">;</span>
  <span class="n">ApplicationStateType</span> <span class="n">applicationState</span><span class="p">;</span>

<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>

  <span class="n">SetRelAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">StartScheduleTableRel</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">IncrementCounter</span><span class="p">(</span><span class="n">Counter_0</span><span class="p">);</span>

  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OK</span><span class="o">*/</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">Task0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">taskState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">taskState</span> <span class="o">=</span> <span class="n">TASK_STATE_WAITING</span> <span class="o">*/</span>
  <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">scheduletableStatus</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">scheduletableStatus</span> <span class="o">=</span> <span class="n">SCHEDULETABLE_RUNNING</span> <span class="o">*/</span>

  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span><span class="o">/*</span> <span class="n">Activating</span> <span class="n">Task0</span> <span class="n">to</span> <span class="n">terminate</span> <span class="n">App1</span><span class="o">*/</span>

<span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">==</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

  <span class="n">ret</span> <span class="o">=</span> <span class="n">GetAlarm</span><span class="p">(</span><span class="n">Alarm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tick</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ACCESS</span><span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetTaskState</span><span class="p">(</span><span class="n">OsTask_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">taskState</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ACCESS</span><span class="o">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">GetScheduleTableStatus</span><span class="p">(</span><span class="n">OsScheduleTable_0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">scheduletableStatus</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">E_OS_ACCESS</span><span class="o">*/</span>
<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_TERMINATED</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="n">NO_RESTART</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Example</span><span class="mf">.2</span>
<span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">RestartTask</span><span class="p">:</span> <span class="n">Task_Restart</span>
<span class="n">Task0</span><span class="p">:</span><span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
<span class="n">Task_Restart</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ApplicationStateType</span> <span class="n">applicationState</span><span class="p">;</span>

  <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>

  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">==</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

<span class="o">/*</span> <span class="n">step</span> <span class="mi">4</span><span class="o">*/</span>
<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_RESTARTING</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="n">RESTART</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task_Restart</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span><span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>如果重新启动的OS-Application配置了重启任务，则该任务将在重新启动时被激活。</p>
<p>If the OS-Application to be restarted is configured with a restart task, that task is activated during the restart.</p>
</li>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="allowaccess">
<h2>AllowAccess<a class="headerlink" href="#allowaccess" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">AllowAccess</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service sets the own state of an OS-Application from APPLICATION_RESTARTING to APPLICATION_ACCESSIBLE.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_STATE</p></td>
<td><p>The OS-Application of the caller is in the wrong state</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Call level at wrong context.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Interrupts are disabled/suspended, OS shall ignore the service.</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Example</span><span class="mf">.1</span>
<span class="n">App0</span><span class="p">:</span>
<span class="n">TaskInit</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">Preemptive</span> <span class="n">Policy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span> <span class="n">Autostart</span><span class="p">:</span><span class="kc">True</span>
<span class="n">App1</span><span class="p">:</span>
<span class="n">RestartTask</span><span class="p">:</span> <span class="n">Task_Restart</span>
<span class="n">Task0</span><span class="p">:</span><span class="n">Priority</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span><span class="p">,</span>
<span class="n">AccessingApplication</span><span class="p">:</span> <span class="n">App0</span>
<span class="n">Task_Restart</span><span class="p">:</span> <span class="n">Priority</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="n">PreemptivePolicy</span><span class="p">:</span><span class="n">FULL</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">TaskInit</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">ApplicationStateType</span> <span class="n">applicationState</span><span class="p">;</span>

  <span class="o">/*</span> <span class="n">step</span> <span class="mi">1</span><span class="o">*/</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>

  <span class="n">ActivateTask</span><span class="p">(</span><span class="n">Task0</span><span class="p">);</span>

<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">==</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">while</span><span class="p">(</span><span class="n">applicationState</span> <span class="o">!=</span> <span class="n">APPLICATION_ACCESSIBLE</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
<span class="p">}</span>

<span class="o">/*</span> <span class="n">step</span> <span class="mi">4</span><span class="o">*/</span>
<span class="n">GetApplicationState</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">applicationState</span><span class="p">);</span>
  <span class="o">/*</span> <span class="n">applicationState</span> <span class="o">=</span> <span class="n">APPLICATION_ACCESSIBLE</span> <span class="o">*/</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task0</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">2</span><span class="o">*/</span>
  <span class="n">TerminateApplication</span><span class="p">(</span><span class="n">App1</span><span class="p">,</span> <span class="n">RESTART</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TASK</span><span class="p">(</span><span class="n">Task_Restart</span><span class="p">)</span>
<span class="p">{</span>
<span class="o">/*</span> <span class="n">step</span> <span class="mi">3</span><span class="o">*/</span>
<span class="n">AllowAccess</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
<section id="getapplicationstate">
<h2>GetApplicationState<a class="headerlink" href="#getapplicationstate" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">StatusType</span> <span class="n">GetApplicationState</span><span class="p">(</span><span class="n">ApplicationType</span> <span class="n">Application</span><span class="p">,</span> <span class="n">ApplicationStateRefType</span> <span class="n">Value</span><span class="p">)</span>
</pre></div>
</div>
<p>This service returns the current state of an OS-Application.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>TRUE</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Application</p></td>
<td><p>Application number user want to get</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>Value</p></td>
<td><p>ACCESSIBLE:accessible RESTARTING:Restarting TERMINATED:ended</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>StatusType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>No errors</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_ID</p></td>
<td><p>&lt;Application&gt; is not valid.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_CALLEVEL</p></td>
<td><p>Call level at wrong context.</p></td>
</tr>
<tr class="row-odd"><td><p>E_OS_DISABLEDINT</p></td>
<td><p>Interrupts are disabled/suspended, OS shall ignore the service.</p></td>
</tr>
<tr class="row-even"><td><p>E_OS_ILLEGAL_ADDRESS</p></td>
<td><p>The address of Value is invalid.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>在SC3，SC4下有效</p>
<p>Valid under SC3 and SC4</p>
</li>
</ul>
</div>
</section>
</section>

</main>
                        
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">OS-APP(Functions)</a><ul>
<li><a class="reference internal" href="#getapplicationid">GetApplicationID</a></li>
<li><a class="reference internal" href="#getcurrentapplicationid">GetCurrentApplicationID</a></li>
<li><a class="reference internal" href="#checkobjectaccess">CheckObjectAccess</a></li>
<li><a class="reference internal" href="#checkobjectownership">CheckObjectOwnership</a></li>
<li><a class="reference internal" href="#terminateapplication">TerminateApplication</a></li>
<li><a class="reference internal" href="#allowaccess">AllowAccess</a></li>
<li><a class="reference internal" href="#getapplicationstate">GetApplicationState</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>