<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>CanSM &mdash; EasyXMen_docs 1.0.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="../../../genindex.html" />
            <link rel="search" title="Search" href="../../../search.html" />
            <link rel="top" title="EasyXMen_docs 1.0.0 documentation" href="#" />
            <link rel="next" title="CanTp" href="../CanTp/CanTp.html" />
            <link rel="prev" title="CanNm" href="../CanNm/CanNm.html" />
    </head>
<body>
    <script type="text/javascript" src="../../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="../../../index.html"
                        title="Wagtail"
                        class="logo navbar-brand"
                    >
                        <img src="../../../_static/img/xmen_logo.png" width="45" height="59" alt="Wagtail"
                            class="logo-img"
                        />
                        开源小满EasyXMen
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">参考手册:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Bfx/Bfx.html">Bfx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BswM/BswM.html">BswM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanIf/CanIf.html">CanIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanNm/CanNm.html">CanNm</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CanSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTp/CanTp.html">CanTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTsyn/CanTsyn.html">CanTsyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Com/Com.html">Com</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComM/ComM.html">ComM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crc/Crc.html">Crc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Det/Det.html">Det</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CryIf/CryIf.html">CryIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Crypto_62/Crypto_62.html">Crypto_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CsM/CsM.html">CsM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dcm/Dcm.html">Dcm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dem/Dem.html">Dem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dlt/Dlt.html">Dlt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DoIP/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../E2E/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EcuM/EcuM.html">EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ea/Ea.html">Ea</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Eep_62/Eep_62.html">Eep_62</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthIf/EthIf.html">EthIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSM/EthSM.html">EthSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTrcv/EthTrcv.html">EthTrcv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthTSyn/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fee/Fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fim/Fim.html">Fim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FlashTest/FlashTest.html">FlsTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IpduM/IpduM.html">IpduM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IStdLib/IStdLib.html">IStdLib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KeyM/KeyM.html">KeyM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LdCom/LdCom.html">LdCom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinIf/LinIf.html">LinIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LinSM/LinSM.html">LinSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemIf/MemIf.html">MemIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemMap/MemMap.html">MemMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MemLayout/MemLayout.html">MemLayout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Nm/Nm.html">Nm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NvM/NvM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Os/Os.html">Os</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PduR/PduR.html">PduR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RamTest/RamTest.html">RamTst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Rte/Rte.html">Rte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iRte/iRte.html">iRte</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Sd/Sd.html">Sd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SecOC/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SoAd/SoAd.html">SoAd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SomeIpTp/SomeIpTp.html">SomeIpTp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StbM/StbM.html">StbM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TcpIp/TcpIp.html">TcpIp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../UdpNm/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgIf/WdgIf.html">WdgIf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../WdgM/WdgM.html">WdgM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Xcp/Xcp.html">Xcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tm/Tm.html">Tm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CDD_FVM/CDD_FVM.html">CDD_FVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EthSwt/EthSwt.html">EthSwt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CanTrcv/CanTrcv.html">CanTrcv</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">集成手册:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/BswM%26EcuM.html">BswM&amp;EcuM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CAN.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CANNM.html">CANNM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/CanTSyn.html">CanTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/DoIP.html">DoIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/E2E.html">E2E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/Eth.html">Eth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/EthTSyn.html">EthTSyn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/FlashTest.html">FlashTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinMaster.html">LinMaster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/LinSlave.html">LINSlave</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/NVM.html">NvM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/OBD.html">OBD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/RamTest.html">RamTest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SecOC.html">SecOC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/SOMEIP.html">SOMEIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UdpNm.html">UdpNm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonCAN.html">UDSOnCan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/UDSonLIN.html">UDSonLIN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/WDG.html">WDG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/XCP.html">XCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E9%9B%86%E6%88%90%E6%89%8B%E5%86%8C/%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.html">总体架构</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">工程说明:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/RH850U2A16_R7F702300BFABA_C_Demo.html">RH850U2A16_R7F702300BFABA_C_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/TC397_Demo.html">TC397_Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B%E8%AF%B4%E6%98%8E/S32K148_Demo.html">S32K148_Demo</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">CanSM</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="../../../_sources/sub/参考手册/CanSM/CanSM.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="cansm">
<h1>CanSM<a class="headerlink" href="#cansm" title="Link to this heading">¶</a></h1>
<section id="document-information">
<h2>文档信息（Document Information）<a class="headerlink" href="#document-information" title="Link to this heading">¶</a></h2>
<section id="version-history">
<h3>版本历史（Version History）<a class="headerlink" href="#version-history" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>日期（Date）</p></th>
<th class="head"><p>作者（Author）</p></th>
<th class="head"><p>版本（Version）</p></th>
<th class="head"><p>状态（Status）</p></th>
<th class="head"><p>说明（Description）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2025/3/7</p></td>
<td><p>xiaojian.liang</p></td>
<td><p>V0.1</p></td>
<td><p>发布（Release）</p></td>
<td><p>首次发布（First release）</p></td>
</tr>
<tr class="row-odd"><td><p>2025/04/04</p></td>
<td><p>xiaojian.liang</p></td>
<td><p>V1.0</p></td>
<td><p>发布（Release）</p></td>
<td><p>正式发布（Official release）</p></td>
</tr>
</tbody>
</table>
</section>
<section id="reference-document">
<h3>参考文档（Reference Document）<a class="headerlink" href="#reference-document" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
<col style="width: 16.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>编号（Number）</p></th>
<th class="head"><p>分类（Classification）</p></th>
<th class="head"><p>标题（Title）</p></th>
<th class="head"><p>版本（Version）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>AUTOSAR</p></td>
<td><p>AUTOSAR_SWS_CANStateManager.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>AUTOSAR</p></td>
<td><p>AUTOSAR_SWS_COMManager.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>AUTOSAR</p></td>
<td><p>AUTOSAR_SWS_NetworkManagementInterface.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>AUTOSAR</p></td>
<td><p>AUTOSAR_SWS_BSWModeManager.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>AUTOSAR</p></td>
<td><p>AUTOSAR_SWS_CANInterface.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>AUTOSAR</p></td>
<td><p>AUTOSAR_SWS_CANNetworkManagement.pdf</p></td>
<td><p>R23-11</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="terms-and-abbreviations">
<h2>术语与简写（Terms and Abbreviations）<a class="headerlink" href="#terms-and-abbreviations" title="Link to this heading">¶</a></h2>
<section id="terms">
<h3>术语（Terms）<a class="headerlink" href="#terms" title="Link to this heading">¶</a></h3>
<blockquote>
<div></div></blockquote>
<p>None</p>
</section>
<section id="abbreviation">
<h3>简写（Abbreviation）<a class="headerlink" href="#abbreviation" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 16.7%" />
<col style="width: 33.3%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>缩写词（Abbreviation）</p></th>
<th class="head"><p>英文全称（Full English name）</p></th>
<th class="head"><p>中文解释（Chinese explanation）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CanSM</p></td>
<td><p>CAN State Manager</p></td>
<td><p>CAN 状态管理</p></td>
</tr>
<tr class="row-odd"><td><p>BswM</p></td>
<td><p>BSW Mode Manager</p></td>
<td><p>基础软件模式管理</p></td>
</tr>
<tr class="row-even"><td><p>EcuM</p></td>
<td><p>Ecu State Manager</p></td>
<td><p>Ecu 状态管理</p></td>
</tr>
<tr class="row-odd"><td><p>CanIf</p></td>
<td><p>Can Interface</p></td>
<td><p>CAN 接口模块</p></td>
</tr>
<tr class="row-even"><td><p>DEM</p></td>
<td><p>Diagnostic Event Manager</p></td>
<td><p>诊断事件处理</p></td>
</tr>
<tr class="row-odd"><td><p>DET</p></td>
<td><p>Default Error Tracer</p></td>
<td><p>默认错误检测</p></td>
</tr>
<tr class="row-even"><td><p>EcuM</p></td>
<td><p>ECU State Manager</p></td>
<td><p>ECU 状态管理模块</p></td>
</tr>
<tr class="row-odd"><td><p>PN</p></td>
<td><p>Partial Network</p></td>
<td><p>部分网络</p></td>
</tr>
<tr class="row-even"><td><p>ComM</p></td>
<td><p>Com Manager</p></td>
<td><p>通讯管理模块</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="introduction">
<h2>简介（Introduction）<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>CanSM 模块负责 CAN 网络的控制流抽象，它使用 CanIf 模块的 API，根据 ComM 模块的模式请求更改已配置的 CAN 网络的通信模式。CAN 控制器模式和 CAN 收发器模式的任何更改将由 CanIf 模块通知 CanSM 模块。根据 CanIf 通知和 CanSM 状态机的状态，CanSM 模块将通知 ComM 和 BswM。</p>
<p>The CanSM module is responsible for the control flow abstraction of the CAN network. It uses the API of the CanIf module to change the communication mode of the configured CAN network according to the mode request from the ComM module. Any changes in the CAN controller mode and CAN transceiver mode will be notified to the CanSM module by the CanIf module. Based on the CanIf notification and the state of the CanSM state machine, the CanSM module will notify the ComM and BswM.</p>
<figure class="align-center" id="layered-software-architecture-from-cansm-point-of-view">
<img alt="Layered Software Architecture from-CanSM point of view" src="../../../_images/Layered-Software-Architecture-from-CanSM-point-of-view.png" />
<figcaption>
<p><span class="caption-text">Layered Software Architecture from-CanSM point of view</span><a class="headerlink" href="#layered-software-architecture-from-cansm-point-of-view" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="functional-description">
<h2>功能描述（Functional Description）<a class="headerlink" href="#functional-description" title="Link to this heading">¶</a></h2>
<section id="features">
<h3>特性（Features）<a class="headerlink" href="#features" title="Link to this heading">¶</a></h3>
<section id="state-machine">
<h4>状态机（State machine）<a class="headerlink" href="#state-machine" title="Link to this heading">¶</a></h4>
<p>CAN 总线的状态管理器 CanSM，负责实现 CAN 网络控制流程的抽象。CanSM 提供 API 以便 ComM 来请求 CAN 网络进行通信模式的切换。ComM 请求切换网络模式的时候，会传递一个参数（用来标识是哪个网络）。对应网络收到这个请求之后，会执行对应的通信模式切换。在网络通信模式切换的过程中，会执行对应的 CAN 外设控制和 PDU 处理。</p>
<p>CanSM, the state manager of the CAN bus, is responsible for implementing the abstraction of CAN network control processes. CanSM provides an API for ComM to request the CAN network to switch communication modes. When ComM requests to switch the network mode, it will pass a parameter (used to identify which network it is). After receiving this request, the corresponding network will execute the corresponding communication mode switch. During the switching of network communication modes, the corresponding CAN peripheral control and PDU processing will be performed.</p>
<figure class="align-center" id="cansm-bsm">
<img alt="CANSM_BSM, state machine diagram for one CAN network" src="../../../_images/CANSM_BSM.png" />
<figcaption>
<p><span class="caption-text">CANSM_BSM, state machine diagram for one CAN network</span><a class="headerlink" href="#cansm-bsm" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>上电后，CanSM 会默认处于 CANSM_BSM_S_NOT_INITIALIZED 状态，在经过初始化后，状态将切换至 CANSM_BSM_S_PRE_NOCOM。如果 EcuM 调用 CanSM_StartWakeUpSource 通知 CanSM 唤醒源被启动，那么状态机将切换至 CANSM_BSM_WUVALIDATION 状态。如果接收到 ComM 的 FULL_COMMUNICATION 请求，那么状态机将切换至 CANSM_BSM_S_PRE_FULLCOM 状态。在 CanSM 通知上层 ComM 和 BswM 底层网络已经切换至 FULL_COMMUNICATION，并且调用 CanIf_SetPduMode 更新 PDU 通道状态后，状态机将切换至 CANSM_BSM_S_FULLCOM。</p>
<p>After power-on, CanSM will be in the CANSM_BSM_S_NOT_INITIALIZED state by default. After initialization, the state will switch to CANSM_BSM_S_PRE_NOCOM. If EcuM calls CanSM_StartWakeUpSource to notify CanSM that the wake-up source has been activated, the state machine will switch to the CANSM_BSM_WUVALIDATION state. If a FULL_COMMUNICATION request from ComM is received, the state machine will switch to the CANSM_BSM_S_PRE_FULLCOM state. After CanSM notifies the upper-layer ComM and BswM that the underlying network has switched to FULL_COMMUNICATION and calls CanIf_SetPduMode to update the PDU channel state, the state machine will switch to CANSM_BSM_S_FULLCOM.</p>
<p>在 CANSM_BSM_S_FULLCOM 状 态 中 如 果 接 收 到 ComM 的 SILENT_COMMUNICATION 请求，状态将切换至 CANSM_BSM_S_SILENTCOM，或接收到 ComM 的 NO_COMMUNICATION 请求，状态将切换至 CANSM_BSM_S_PRE_NOCOM。</p>
<p>In the CANSM_BSM_S_FULLCOM state, if a SILENT_COMMUNICATION request from ComM is received, the state will switch to CANSM_BSM_S_SILENTCOM; or if a NO_COMMUNICATION request from ComM is received, the state will switch to CANSM_BSM_S_PRE_NOCOM.</p>
<p>在CANSM_BSM_S_FULLCOM 状态中如果 CanSM_SetBaudrate 接口被上层调用，需要调用 BswM_CanSM_CurrentState 通知 BSWM 当前状态为 CANSM_BSWM_CHANGE_BAUDRATE，状态机将切换至 CANSM_BSM_S_CHANGE_BAUDRATE。</p>
<p>In the CANSM_BSM_S_FULLCOM state, if the CanSM_SetBaudrate interface is called by the upper layer, BswM_CanSM_CurrentState needs to be invoked to notify BSWM that the current state is CANSM_BSWM_CHANGE_BAUDRATE, and the state machine will switch to CANSM_BSM_S_CHANGE_BAUDRATE.</p>
<p>在 CANSM_BSM_S_CHANGE_BAUDRATE 中进行波特率修改的相关操作，操作结束后根据已有的 ComM 的网络请求状态来决定切换至哪个状态机。</p>
<p>In CANSM_BSM_S_CHANGE_BAUDRATE, perform operations related to baud rate modification. After the operations are completed, determine which state the state machine switches to based on the existing network request status of ComM.</p>
</section>
<section id="bus-off-bus-off-recovery-function">
<h4>Bus-off 恢复功能（Bus-off recovery function）<a class="headerlink" href="#bus-off-bus-off-recovery-function" title="Link to this heading">¶</a></h4>
<p>CanSM 可以配置快恢复时间 CanSMBorTimeL1 和慢恢复时时间 CanSMBorTimeL2，以及经过多少次快恢复切换为慢恢复的次数 CanSMBorCounterL1ToL2。当底层发生 bus-off 时，会调用 CanSM 的 CanSM_ControllerBusOff 函数进行通知。CanSM 会调用 CanIf 的 CanIf_SetControllerMode 函数将控制器状态设置为 CAN_CS_STARTED，当接收到底层调用的 CanSM_ControllerModeIndication 的设置成功的通知后，开始 bus-off 定时器的计时，当 bus-off 快恢复的时间超时后，调用 CanIf_SetPduMode 设置 Pdu 传输状态为 CANIF_ONLINE，当快恢复的次数超过配置参数 CanSMBorCounterL1ToL2 时，将按照慢恢复的时间进行恢复。</p>
<p>CanSM can be configured with a fast recovery time (CanSMBorTimeL1), a slow recovery time (CanSMBorTimeL2), and the number of fast recoveries after which it switches to slow recovery (CanSMBorCounterL1ToL2). When a bus-off occurs at the underlying layer, the CanSM_ControllerBusOff function of CanSM will be called for notification. CanSM will invoke the CanIf_SetControllerMode function of CanIf to set the controller state to CAN_CS_STARTED. After receiving a successful setting notification from the underlying layer via CanSM_ControllerModeIndication, it starts the timing of the bus-off timer. When the bus-off fast recovery time times out, CanIf_SetPduMode is called to set the PDU transmission state to CANIF_ONLINE. When the number of fast recoveries exceeds the configured parameter CanSMBorCounterL1ToL2, recovery will be performed according to the slow recovery time.</p>
</section>
</section>
<section id="deviation">
<h3>偏差（Deviation）<a class="headerlink" href="#deviation" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
<section id="extension">
<h3>扩展（Extension）<a class="headerlink" href="#extension" title="Link to this heading">¶</a></h3>
<p>None</p>
</section>
</section>
<section id="integration">
<h2>集成（Integration）<a class="headerlink" href="#integration" title="Link to this heading">¶</a></h2>
<section id="file-list">
<h3>文件列表（File list）<a class="headerlink" href="#file-list" title="Link to this heading">¶</a></h3>
<section id="static-files">
<h4>静态文件（Static files）<a class="headerlink" href="#static-files" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件（File）</p></th>
<th class="head"><p>描述（Description）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CanSM.h</p></td>
<td><p>CanSM 模块头文件，通过加载该头文件访问 CanSM 公开的函数和数据类型</p>
<p>CanSM module header file, through which the public functions and data types of CanSM can be accessed by including this header file</p>
</td>
</tr>
<tr class="row-odd"><td><p>CanSM_CanIf.h</p></td>
<td><p>CanSM模块提供给CanIf，CanNm 模块使用的函数</p>
<p>The CanSM module provides functions for the CanIf and CanNm modules to use</p>
</td>
</tr>
<tr class="row-even"><td><p>CanSM.c</p></td>
<td><p>CanSM模块实现源文件，各API实现在该文件中</p>
<p>CanSM module implementation source file, where all API implementations are contained</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="dynamic-file">
<h4>动态文件（Dynamic file）<a class="headerlink" href="#dynamic-file" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>文件（File）</p></th>
<th class="head"><p>描述（Description）</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CanSM_Cfg.h</p></td>
<td><p>用于定义 CanSM 模块预编译时用到的非 PB 宏</p>
<p>Used to define non-PB macros used by the CanSM module during precompilation</p>
</td>
</tr>
<tr class="row-odd"><td><p>CanSM_PBcfg.h</p></td>
<td><p>用于定义 CanSM 模块预编译时用到的 PB 宏和数据类型定义</p>
<p>Used to define PB macros and data type definitions used by the CanSM module during precompilation</p>
</td>
</tr>
<tr class="row-even"><td><p>CanSM_Cfg.c</p></td>
<td><p>配置参数源文件，包含各个非 PB 配置项的定义</p>
<p>Configuration parameter source file, containing definitions of various non-PB configuration items</p>
</td>
</tr>
<tr class="row-odd"><td><p>CanSM_PBcfg.c</p></td>
<td><p>配置参数源文件，包含各个PB 配置项的定义</p>
<p>Configuration parameter source file, containing definitions of various PB configuration items</p>
</td>
</tr>
<tr class="row-even"><td><p>CanSM_MemMap.h</p></td>
<td><p>CanSM 模块函数和变量存储位置定义文件</p>
<p>File for defining the storage locations of CanSM module functions and variables</p>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="error-handling">
<h3>错误处理（Error handling）<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h3>
<section id="development-errors">
<h4>开发错误（Development errors）<a class="headerlink" href="#development-errors" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Value[hex]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CANSM_E_UNINIT</p></td>
<td><p>0x01</p></td>
<td><p>API service used without module initialization</p></td>
</tr>
<tr class="row-odd"><td><p>CANSM_E_PARAM_POINTER</p></td>
<td><p>0x02</p></td>
<td><p>API service called with wrong pointer</p></td>
</tr>
<tr class="row-even"><td><p>CANSM_E_INVALID_NETWORK_HANDLE</p></td>
<td><p>0x03</p></td>
<td><p>API service called with wrong parameter</p></td>
</tr>
<tr class="row-odd"><td><p>CANSM_E_PARAM_CONTROLLER</p></td>
<td><p>0x04</p></td>
<td><p>API service called with wrong parameter</p></td>
</tr>
<tr class="row-even"><td><p>CANSM_E_PARAM_TRANSCEIVER</p></td>
<td><p>0x05</p></td>
<td><p>API service called with wrong parameter</p></td>
</tr>
<tr class="row-odd"><td><p>CANSM_E_INVALID_PARTITION_CONTEXT</p></td>
<td><p>0x06</p></td>
<td><p>API service called on wrong partition context</p></td>
</tr>
<tr class="row-even"><td><p>CANSM_E_ALREADY_INITIALIZED</p></td>
<td><p>0x07</p></td>
<td><p>Init API service called if CanSM is already initialized</p></td>
</tr>
<tr class="row-odd"><td><p>CANSM_E_NOT_IN_NO_COM</p></td>
<td><p>0x0B</p></td>
<td><p>DeInit API service called when not all CAN networks are in state CANSM_NO_COMMUNICATION</p></td>
</tr>
</tbody>
</table>
</section>
<section id="product-error">
<h4>产品错误（Product error）<a class="headerlink" href="#product-error" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CANSM_E_BUS_OFF</p></td>
<td><p>The bus-off recovery state machine of a CAN network has detected a certain amount of sequential bus-offs without successful recovery</p></td>
</tr>
</tbody>
</table>
</section>
<section id="runtime-error">
<h4>运行时错误（Runtime error）<a class="headerlink" href="#runtime-error" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error code</p></th>
<th class="head"><p>Value[hex]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CANSM_E_MODE_REQUEST_TIMEOUT</p></td>
<td><p>0x0A</p></td>
<td><p>Mode request for a network failed more often than allowed by configuration</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="interface-description">
<h2>接口描述（Interface Description）<a class="headerlink" href="#interface-description" title="Link to this heading">¶</a></h2>
<section id="type-definition">
<h3>类型定义（Type definition）<a class="headerlink" href="#type-definition" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 12.5%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CanSM_ConfigType</p></td>
<td><p>struct</p></td>
<td><p>This type defines a data structure for the post build parameters of the CanSM. At initialization the CanSM gets a pointer to a structure of this type to get access to its configuration data, which is necessary for initialization.</p></td>
</tr>
<tr class="row-odd"><td><p>CanSM_BswMCurrentStateType</p></td>
<td><p>enum</p></td>
<td><p>Can specific communication modes / states notified to the BswM module.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="provided-services">
<h3>提供的服务（Provided services）<a class="headerlink" href="#provided-services" title="Link to this heading">¶</a></h3>
<section id="cansm-init">
<h4>CanSM_Init<a class="headerlink" href="#cansm-init" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_Init</span><span class="p">(</span><span class="n">const</span> <span class="n">CanSM_ConfigType</span> <span class="o">*</span><span class="n">ConfigPtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This service initializes the CanSM module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ConfigPtr</p></td>
<td><p>Pointer to init structure for the post build parameters of the CanSM</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-deinit">
<h4>CanSM_DeInit<a class="headerlink" href="#cansm-deinit" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_DeInit</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>This service de-initializes the CanSM module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-requestcommode">
<h4>CanSM_RequestComMode<a class="headerlink" href="#cansm-requestcommode" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">CanSM_RequestComMode</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">network</span><span class="p">,</span> <span class="n">ComM_ModeType</span> <span class="n">ComM_Mode</span><span class="p">)</span>
</pre></div>
</div>
<p>This service shall change the communication mode of a CAN network to the requested one.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Asynchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (only for different network handles)</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>network</p></td>
<td><p>Handle of destined communication network for request</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ComM_Mode</p></td>
<td><p>Requested communication mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Service accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Service denied</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cansm-getcurrentcommode">
<h4>CanSM_GetCurrentComMode<a class="headerlink" href="#cansm-getcurrentcommode" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">CanSM_GetCurrentComMode</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">network</span><span class="p">,</span> <span class="n">ComM_ModeType</span> <span class="o">*</span><span class="n">ComM_ModePtr</span><span class="p">)</span>
</pre></div>
</div>
<p>This service shall put out the current communication mode of a CAN network.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>network</p></td>
<td><p>Network handle, whose current communication mode shall be put out</p></td>
</tr>
<tr class="row-odd"><td><p>[out]</p></td>
<td><p>ComM_ModePtr</p></td>
<td><p>Pointer, where to put out the current communication mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Service accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Service denied</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cansm-getversioninfo">
<h4>CanSM_GetVersionInfo<a class="headerlink" href="#cansm-getversioninfo" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_GetVersionInfo</span><span class="p">(</span><span class="n">Std_VersionInfoType</span> <span class="o">*</span><span class="n">VersionInfo</span><span class="p">)</span>
</pre></div>
</div>
<p>This service puts out the version information of this module (module ID, vendor ID, vendor specific version numbers related to BSW00407)</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[out]</p></td>
<td><p>VersionInfo</p></td>
<td><p>Pointer to where to store the version information of this module.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-setbaudrate">
<h4>CanSM_SetBaudrate<a class="headerlink" href="#cansm-setbaudrate" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">CanSM_SetBaudrate</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">Network</span><span class="p">,</span> <span class="n">uint16</span> <span class="n">BaudRateConfigID</span><span class="p">)</span>
</pre></div>
</div>
<p>This service shall start an asynchronous process to change the baud rate for the configured CAN controllers of a certain CAN network.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant for different Networks. Non reentrant for the same Network.</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Network</p></td>
<td><p>Handle of the addressed CAN network for the baud rate change</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>BaudRateConfigID</p></td>
<td><p>references a baud rate configuration by ID (see CanController BaudRateConfigID)</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Controller mode request has been accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Controller mode request has not been accepted</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cansm-setecupassive">
<h4>CanSM_SetEcuPassive<a class="headerlink" href="#cansm-setecupassive" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">CanSM_SetEcuPassive</span><span class="p">(</span><span class="n">boolean</span> <span class="n">CanSM_Passive</span><span class="p">)</span>
</pre></div>
</div>
<p>This function can be used to set all CanSM channels of the ECU to a receive only mode.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>CanSM_Passive</p></td>
<td><p>TRUE: set all CanSM channels to passive, i.e. receive only FALSE: set all CanSM channels back to non-passive</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Request accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Request denied</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cansm-startwakeupsource">
<h4>CanSM_StartWakeupSource<a class="headerlink" href="#cansm-startwakeupsource" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">CanSM_StartWakeupSource</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">network</span><span class="p">)</span>
</pre></div>
</div>
<p>This function shall be called by EcuM when a wakeup source shall be started.</p>
<p><strong>Sync/Async</strong></p>
<p><strong>Reentrancy</strong></p>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>network</p></td>
<td><p>Affected CAN network</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Request accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Request denied</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cansm-stopwakeupsource">
<h4>CanSM_StopWakeupSource<a class="headerlink" href="#cansm-stopwakeupsource" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Std_ReturnType</span> <span class="n">CanSM_StopWakeupSource</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">network</span><span class="p">)</span>
</pre></div>
</div>
<p>This function shall be called by EcuM when a wakeup source shall be stopped.</p>
<p><strong>Sync/Async</strong></p>
<p><strong>Reentrancy</strong></p>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>network</p></td>
<td><p>Affected CAN network</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>Std_ReturnType</p>
</dd>
</dl>
<p><strong>Return values</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>E_OK</p></td>
<td><p>Request accepted</p></td>
</tr>
<tr class="row-odd"><td><p>E_NOT_OK</p></td>
<td><p>Request denied</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id1">
<h3>提供的服务（Provided services）<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<section id="cansm-controllerbusoff">
<h4>CanSM_ControllerBusOff<a class="headerlink" href="#cansm-controllerbusoff" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_ControllerBusOff</span><span class="p">(</span><span class="n">uint8</span> <span class="n">ControllerId</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback function notifies the CanSM about a bus-off event on a certain CAN controller, which needs to be considered with the specified bus-off recovery handling for the impacted CAN network.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (only for different CanControllers)</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ControllerId</p></td>
<td><p>CAN controller, which detected a bus-off event</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-controllermodeindication">
<h4>CanSM_ControllerModeIndication<a class="headerlink" href="#cansm-controllermodeindication" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_ControllerModeIndication</span><span class="p">(</span><span class="n">uint8</span> <span class="n">ControllerId</span><span class="p">,</span> <span class="n">Can_ControllerStateType</span> <span class="n">ControllerMode</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback shall notify the CanSM module about a CAN controller mode change.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant (only for different CAN controllers)</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>ControllerId</p></td>
<td><p>CAN controller, whose mode has changed</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>ControllerMode</p></td>
<td><p>Notified CAN controller mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-transceivermodeindication">
<h4>CanSM_TransceiverModeIndication<a class="headerlink" href="#cansm-transceivermodeindication" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_TransceiverModeIndication</span><span class="p">(</span><span class="n">uint8</span> <span class="n">TransceiverId</span><span class="p">,</span> <span class="n">CanTrcv_TrcvModeType</span> <span class="n">TransceiverMode</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback shall notify the CanSM module about a CAN transceiver mode change.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant for different CAN Transceivers</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TransceiverId</p></td>
<td><p>CAN transceiver, whose mode has changed</p></td>
</tr>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>TransceiverMode</p></td>
<td><p>Notified CAN transceiver mode</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-txtimeoutexception">
<h4>CanSM_TxTimeoutException<a class="headerlink" href="#cansm-txtimeoutexception" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_TxTimeoutException</span><span class="p">(</span><span class="n">NetworkHandleType</span> <span class="n">Channel</span><span class="p">)</span>
</pre></div>
</div>
<p>This function shall notify the CanSM module, that the CanNm has detected for the affected partial CAN network a tx timeout exception, which shall be recovered within the respective network state machine of the CanSM module.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Channel</p></td>
<td><p>Affected CAN network</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-cleartrcvwufflagindication">
<h4>CanSM_ClearTrcvWufFlagIndication<a class="headerlink" href="#cansm-cleartrcvwufflagindication" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_ClearTrcvWufFlagIndication</span><span class="p">(</span><span class="n">uint8</span> <span class="n">Transceiver</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback function shall indicate the CanIf_ClearTrcvWufFlag API process end for the notified CAN Transceiver.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant for different CAN Transceivers</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Transceiver</p></td>
<td><p>Requested Transceiver</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-checktransceiverwakeflagindication">
<h4>CanSM_CheckTransceiverWakeFlagIndication<a class="headerlink" href="#cansm-checktransceiverwakeflagindication" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_CheckTransceiverWakeFlagIndication</span><span class="p">(</span><span class="n">uint8</span> <span class="n">Transceiver</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback function indicates the CanIf_CheckTrcvWakeFlag API process end for the notified CAN Transceiver.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant for different CAN Transceivers</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>Transceiver</p></td>
<td><p>Requested Transceiver</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
<section id="cansm-confirmpnavailability">
<h4>CanSM_ConfirmPnAvailability<a class="headerlink" href="#cansm-confirmpnavailability" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_ConfirmPnAvailability</span><span class="p">(</span><span class="n">uint8</span> <span class="n">TransceiverId</span><span class="p">)</span>
</pre></div>
</div>
<p>This callback function indicates that the transceiver is running in PN communication mode.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Reentrant</p>
</dd>
</dl>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dir</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[in]</p></td>
<td><p>TransceiverId</p></td>
<td><p>CAN transceiver, which was checked for PN availability</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
</section>
<section id="configuration-function">
<h3>配置函数（Configuration function）<a class="headerlink" href="#configuration-function" title="Link to this heading">¶</a></h3>
<section id="cansm-mainfunction">
<h4>CanSM_MainFunction<a class="headerlink" href="#cansm-mainfunction" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CanSM_MainFunction_</span><span class="o">&lt;</span><span class="n">CanSMNetwork</span><span class="o">.</span><span class="n">ShortName</span><span class="o">&gt;</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
</pre></div>
</div>
<p>Scheduled function of the CanSM.</p>
<dl class="simple">
<dt><strong>Sync/Async</strong></dt><dd><p>Synchronous</p>
</dd>
<dt><strong>Reentrancy</strong></dt><dd><p>Non Reentrant</p>
</dd>
<dt><strong>Return type</strong></dt><dd><p>void</p>
</dd>
</dl>
</section>
</section>
<section id="dependent-services">
<h3>依赖的服务（Dependent services）<a class="headerlink" href="#dependent-services" title="Link to this heading">¶</a></h3>
<section id="mandatory-interface">
<h4>强制接口（Mandatory interface）<a class="headerlink" href="#mandatory-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BswM_CanSM_CurrentState</p></td>
<td><p>BswM_CanSM.h</p></td>
<td><p>Function called by CanSM to indicate its current state.</p></td>
</tr>
<tr class="row-odd"><td><p>CanIf_CheckTrcvWakeFlag</p></td>
<td><p>CanIf.h</p></td>
<td><p>Requests the CanIf module to check the Wake flag of the designated CAN transceiver.</p></td>
</tr>
<tr class="row-even"><td><p>CanIf_ClearTrcvWufFlag</p></td>
<td><p>CanIf.h</p></td>
<td><p>Requests the CanIf module to clear the WUF flag of the designated CAN transceiver.</p></td>
</tr>
<tr class="row-odd"><td><p>CanIf_GetPduMode</p></td>
<td><p>CanIf.h</p></td>
<td><p>This service reports the current mode of a requested PDU channel.</p></td>
</tr>
<tr class="row-even"><td><p>CanIf_GetTxConfirmationState</p></td>
<td><p>CanIf.h</p></td>
<td><p>This service reports, if any TX confirmation has been done for the whole CAN controller since thelast CAN controller start.</p></td>
</tr>
<tr class="row-odd"><td><p>CanIf_SetControllerMode</p></td>
<td><p>CanIf.h</p></td>
<td><p>This service calls the corresponding CAN Driver service for changing of the CAN controller mode.</p></td>
</tr>
<tr class="row-even"><td><p>CanIf_SetPduMode</p></td>
<td><p>CanIf.h</p></td>
<td><p>This service sets the requested mode at the L-PDUs of a predefined logical PDU channel.</p></td>
</tr>
<tr class="row-odd"><td><p>CanIf_SetTrcvMode</p></td>
<td><p>CanIf.h</p></td>
<td><p>This service changes the operation mode of the tansceiver TransceiverId, via calling the corresponding CAN Transceiver Driver service.</p></td>
</tr>
<tr class="row-even"><td><p>CanNm_ConfirmPnAvailability</p></td>
<td><p>CanNm.h</p></td>
<td><p>Enables the PN filter functionality on the indicated NM channel. Availability: The API is only available if CanNmGlobalPnSupport is TRUE.</p></td>
</tr>
<tr class="row-odd"><td><p>ComM_BusSM_ModeIndication</p></td>
<td><p>ComM.h</p></td>
<td><p>Indication of the actual bus mode by the corresponding Bus State Manager. ComM shall propagate the indicated state to the users with means of the RTE and BswM.</p></td>
</tr>
<tr class="row-even"><td><p>Dem_SetEventStatus</p></td>
<td><p>Dem.h</p></td>
<td><p>Called by SW-Cs or BSW modules to report monitor status information to the Dem. BSW modules calling Dem_SetEventStatus can safely ignore the return value. This API will be available only if ({Dem/DemConfigSet/DemEventParameter/DemEventReportingType} == STANDARD_REPORTING)</p></td>
</tr>
<tr class="row-odd"><td><p>Det_ReportRuntimeError</p></td>
<td><p>Det.h</p></td>
<td><p>Service to report runtime errors. If a callout has been configured then this callout shall be called.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="optional-interface">
<h4>可选接口（Optional interface）<a class="headerlink" href="#optional-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CanIf_SetBaudrate</p></td>
<td><p>CanIf.h</p></td>
<td><p>This service shall set the baud rate configuration of the CAN controller. Depending on necessary baud rate modifications the controller might have to reset.</p></td>
</tr>
<tr class="row-odd"><td><p>Det_ReportError</p></td>
<td><p>Det.h</p></td>
<td><p>Service to report development errors.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration-interface">
<h4>配置接口（Configuration interface）<a class="headerlink" href="#configuration-interface" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 11.1%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>API Function</p></th>
<th class="head"><p>Header File</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>void &lt;User_GetBusOffDelay&gt;(NetworkHandleType network, uint8* delayCyclesPtr)</p></td>
<td><p>Configuration parameter CanSM/CanSMGeneral/CanSMGetBusOffDelayHeader</p></td>
<td><p>This callout function returns the number of CanSM base cycles to wait additionally to L1/L2 after a BusOff occurred.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="configuration">
<h2>配置（configuration）<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>因 CanSM 依赖 CanNM 接口 CanNm_ConfirmPnAvailability，所以需要确保 CanNM 在 CanSM 之前初始化，这通常是在 EcuMDriverInitListBswM 中配置的。</p>
<p>Since CanSM depends on the CanNM interface CanNm_ConfirmPnAvailability, it is necessary to ensure that CanNM is initialized before CanSM. This is usually configured in EcuMDriverInitListBswM.</p>
<figure class="align-center" id="ecumdriverinitlistbswm">
<img alt="../../../_images/EcuMDriverInitListBswM.png" src="../../../_images/EcuMDriverInitListBswM.png" />
<figcaption>
<p><span class="caption-text">EcuMDriverInitListBswM</span><a class="headerlink" href="#ecumdriverinitlistbswm" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="../CanNm/CanNm.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>CanNm
    </a>
    <a class="float-right" href="../CanTp/CanTp.html" title="Next">
        CanTp <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">CanSM</a><ul>
<li><a class="reference internal" href="#document-information">文档信息（Document Information）</a><ul>
<li><a class="reference internal" href="#version-history">版本历史（Version History）</a></li>
<li><a class="reference internal" href="#reference-document">参考文档（Reference Document）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terms-and-abbreviations">术语与简写（Terms and Abbreviations）</a><ul>
<li><a class="reference internal" href="#terms">术语（Terms）</a></li>
<li><a class="reference internal" href="#abbreviation">简写（Abbreviation）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#introduction">简介（Introduction）</a></li>
<li><a class="reference internal" href="#functional-description">功能描述（Functional Description）</a><ul>
<li><a class="reference internal" href="#features">特性（Features）</a><ul>
<li><a class="reference internal" href="#state-machine">状态机（State machine）</a></li>
<li><a class="reference internal" href="#bus-off-bus-off-recovery-function">Bus-off 恢复功能（Bus-off recovery function）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deviation">偏差（Deviation）</a></li>
<li><a class="reference internal" href="#extension">扩展（Extension）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integration">集成（Integration）</a><ul>
<li><a class="reference internal" href="#file-list">文件列表（File list）</a><ul>
<li><a class="reference internal" href="#static-files">静态文件（Static files）</a></li>
<li><a class="reference internal" href="#dynamic-file">动态文件（Dynamic file）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling">错误处理（Error handling）</a><ul>
<li><a class="reference internal" href="#development-errors">开发错误（Development errors）</a></li>
<li><a class="reference internal" href="#product-error">产品错误（Product error）</a></li>
<li><a class="reference internal" href="#runtime-error">运行时错误（Runtime error）</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#interface-description">接口描述（Interface Description）</a><ul>
<li><a class="reference internal" href="#type-definition">类型定义（Type definition）</a></li>
<li><a class="reference internal" href="#provided-services">提供的服务（Provided services）</a><ul>
<li><a class="reference internal" href="#cansm-init">CanSM_Init</a></li>
<li><a class="reference internal" href="#cansm-deinit">CanSM_DeInit</a></li>
<li><a class="reference internal" href="#cansm-requestcommode">CanSM_RequestComMode</a></li>
<li><a class="reference internal" href="#cansm-getcurrentcommode">CanSM_GetCurrentComMode</a></li>
<li><a class="reference internal" href="#cansm-getversioninfo">CanSM_GetVersionInfo</a></li>
<li><a class="reference internal" href="#cansm-setbaudrate">CanSM_SetBaudrate</a></li>
<li><a class="reference internal" href="#cansm-setecupassive">CanSM_SetEcuPassive</a></li>
<li><a class="reference internal" href="#cansm-startwakeupsource">CanSM_StartWakeupSource</a></li>
<li><a class="reference internal" href="#cansm-stopwakeupsource">CanSM_StopWakeupSource</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">提供的服务（Provided services）</a><ul>
<li><a class="reference internal" href="#cansm-controllerbusoff">CanSM_ControllerBusOff</a></li>
<li><a class="reference internal" href="#cansm-controllermodeindication">CanSM_ControllerModeIndication</a></li>
<li><a class="reference internal" href="#cansm-transceivermodeindication">CanSM_TransceiverModeIndication</a></li>
<li><a class="reference internal" href="#cansm-txtimeoutexception">CanSM_TxTimeoutException</a></li>
<li><a class="reference internal" href="#cansm-cleartrcvwufflagindication">CanSM_ClearTrcvWufFlagIndication</a></li>
<li><a class="reference internal" href="#cansm-checktransceiverwakeflagindication">CanSM_CheckTransceiverWakeFlagIndication</a></li>
<li><a class="reference internal" href="#cansm-confirmpnavailability">CanSM_ConfirmPnAvailability</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-function">配置函数（Configuration function）</a><ul>
<li><a class="reference internal" href="#cansm-mainfunction">CanSM_MainFunction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dependent-services">依赖的服务（Dependent services）</a><ul>
<li><a class="reference internal" href="#mandatory-interface">强制接口（Mandatory interface）</a></li>
<li><a class="reference internal" href="#optional-interface">可选接口（Optional interface）</a></li>
<li><a class="reference internal" href="#configuration-interface">配置接口（Configuration interface）</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">配置（configuration）</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
            <div class="text-center">
                    &copy; Copyright 2025, i-soft
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.2.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>