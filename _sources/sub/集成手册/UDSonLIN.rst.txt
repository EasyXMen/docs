=================
UDSonLIN
=================

ç›®æ ‡
====

æœ¬æ–‡æ¡£æ—¨åœ¨é€šè¿‡ä¸€ä¸ªLINè¯Šæ–­çš„ç¤ºä¾‹å·¥ç¨‹çš„é…ç½®ï¼Œå‘ç”¨æˆ·å±•ç¤ºåè®®æ ˆçš„é›†æˆè¿‡ç¨‹ã€‚é€šè¿‡é˜…è¯»æœ¬æ–‡æ¡£ï¼Œç”¨æˆ·å¯ä»¥äº†è§£ORIENTAISé…ç½®å·¥å…·çš„é…ç½®è¿‡ç¨‹ï¼Œä»¥åŠå¦‚ä½•åº”ç”¨é…ç½®å·¥å…·ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ã€‚

ä¸ºäº†è®©ç”¨æˆ·æ›´æ¸…æ™°çš„äº†è§£å·¥å…·çš„ä½¿ç”¨ï¼Œæ‰€ç”¨çš„é…ç½®å‡é€ä¸€æ‰‹åŠ¨å®Œæˆã€‚ç”¨æˆ·åœ¨äº†è§£äº†é…ç½®çš„åŸºæœ¬è¿‡ç¨‹åï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆé…ç½®ã€‚

ç¼©å†™è¯å’Œæœ¯è¯­
============

.. table:: è¡¨ ç¼©å†™è¯å’Œæœ¯è¯­

   +-----------------+---------------------------------------------------+
   | **ç¼©å†™è¯/æœ¯è¯­** |                      **æè¿°**                     |
   +-----------------+---------------------------------------------------+
   | ASW             | Application Software åº”ç”¨è½¯ä»¶                     |
   +-----------------+---------------------------------------------------+
   | BSW             | Basic Software åŸºç¡€è½¯ä»¶                           |
   +-----------------+---------------------------------------------------+
   | MCAL            | Micro Controller Abstraction Layer å¾®æ§åˆ¶å™¨æŠ½è±¡å±‚ |
   +-----------------+---------------------------------------------------+
   | LINIF           | LIN Interface Module LINæ¥å£æ¨¡å—                  |
   +-----------------+---------------------------------------------------+
   | LINTP           | LIN Transport Layer Module LINä¼ è¾“æ¨¡å—            |
   +-----------------+---------------------------------------------------+
   | ComM            | Communication Manager Module é€šä¿¡ç®¡ç†æ¨¡å—         |
   +-----------------+---------------------------------------------------+
   | EcuM            | ECU State Manager Module ECUçŠ¶æ€ç®¡ç†æ¨¡å—          |
   +-----------------+---------------------------------------------------+
   | PduR            | PDU Router Module PDUè·¯ç”±å™¨æ¨¡å—                   |
   +-----------------+---------------------------------------------------+
   | Dcm             | Diagnostic Communication Manager è¯Šæ–­é€šä¿¡æ¨¡å—     |
   +-----------------+---------------------------------------------------+
   | Dem             | Diagnostic Event Manager è¯Šæ–­äº‹ä»¶ç®¡ç†æ¨¡å—         |
   +-----------------+---------------------------------------------------+
   | BswM            | Basic Software Mode Manager åŸºç¡€è½¯ä»¶æ¨¡å¼ç®¡ç†å™¨    |
   +-----------------+---------------------------------------------------+
   | Rte             | Runtime Environment è¿è¡Œæ—¶ç¯å¢ƒ                    |
   +-----------------+---------------------------------------------------+
   | iRte            | i-Soft Runtime Environment æ™®ååŸºç¡€æ¨¡å—è¿è¡Œæ—¶ç¯å¢ƒ |
   +-----------------+---------------------------------------------------+

å‚è€ƒæ–‡æ¡£
========

[1]å‚è€ƒæ‰‹å†Œ_LinIf.pdf

[2]å‚è€ƒæ‰‹å†Œ_PduR.pdf

[3]å‚è€ƒæ‰‹å†Œ_Dcm.pdf

[4]å‚è€ƒæ‰‹å†Œ_Dem.pdf

[5]å‚è€ƒæ‰‹å†Œ\_ UDSonCAN.pdf

åè®®æ ˆé›†æˆ
==========

é¡¹ç›®äº¤ä»˜çš„å†…å®¹ä¸ºï¼šåè®®æ ˆæºç å’ŒORIENTAIS
Studioé…ç½®å·¥å…·ã€‚åè®®æ ˆç»†åˆ†ä¸ºåè®®æ ˆçš„å„æ¨¡å—åŠå…¶å¯¹åº”çš„é…ç½®å·¥å…·æ¨¡å—ã€‚

åè®®æ ˆå„é…ç½®æ¨¡å—çš„åŠŸèƒ½ä»‹ç»ï¼Œå‚è§è¡¨ åè®®æ ˆå„é…ç½®æ¨¡å—ä»‹ç»ã€‚

ä½¿ç”¨åè®®æ ˆæºç å’Œé…ç½®å·¥å…·ï¼Œè¿›è¡Œåè®®æ ˆçš„é›†æˆçš„æ­¥éª¤ï¼Œå‚è§è¡¨
åè®®æ ˆé›†æˆçš„æ­¥éª¤ã€‚

.. table:: è¡¨ åè®®æ ˆå„é…ç½®æ¨¡å—ä»‹ç»

   +------------+-------------------------------------------------------------------------------------------------------+
   | **æ¨¡å—å** |                                                **åŠŸèƒ½**                                               |
   +------------+-------------------------------------------------------------------------------------------------------+
   | Lin        | LINé©±åŠ¨é…ç½®ã€‚(ç”±EBå·¥å…·å¯¼å…¥ï¼Œè¯¦è§ç« èŠ‚ï¼ˆLinæ¨¡å—é…ç½®ï¼‰)                                                  |
   +------------+-------------------------------------------------------------------------------------------------------+
   | LinIf      | LinIfæ¨¡å—ä¸»è¦å¤„ç†ä¸Šå±‚æ¨¡å—ä¸åº•å±‚é©±åŠ¨çš„ä¹‹é—´PDUçš„ä¼ é€’ï¼Œä¸ºä¸Šå±‚æ¨¡å—æä¾›ç»Ÿä¸€çš„æ¥å£æ¥ç®¡ç†ä¸åŒçš„LINç¡¬ä»¶æ¨¡å—ã€‚ |
   +------------+-------------------------------------------------------------------------------------------------------+
   | EcuC       | ç”¨äºè¾…åŠ©é…ç½®å·¥å…·å®Œæˆé…ç½®çš„æ¨¡å—ã€‚ä¸»è¦æä¾›Pduçš„å®šä¹‰ï¼Œå…¶å®ƒæ¨¡å—é€šè¿‡å…³è”EcuCä¸­Pduï¼Œç›¸äº’å…³è”èµ·æ¥ã€‚          |
   +------------+-------------------------------------------------------------------------------------------------------+
   | PduR       | PDU Routerä¸»è¦ä¸ºç›¸å…³æ¨¡å—æä¾›åŸºäºI-PDUçš„è·¯ç”±æœåŠ¡ã€‚åœ¨UDSonLINæ ˆä¸­ï¼Œä¸»è¦æ˜¯æä¾›LinTPä¸DCMä¹‹é—´çš„è·¯ç”±æœåŠ¡ã€‚ |
   +------------+-------------------------------------------------------------------------------------------------------+
   | Dcm        | ä¾æ®ISO15765-3å’ŒISO14229-1æ ‡å‡†æè¿°ï¼Œå®ç°è¯Šæ–­è¯·æ±‚æŠ¥æ–‡çš„è§£æï¼Œå“åº”(æ­£å“åº”å’Œè´Ÿå“åº”)ä¸æ‰§è¡Œã€‚              |
   +------------+-------------------------------------------------------------------------------------------------------+
   | Dem        | å®ç°è¯Šæ–­æ•…éšœçš„å­˜å‚¨ä¸ç®¡ç†åŠŸèƒ½ï¼Œæä¾›APIæ¥å£ä¾›å…¶ä»–æ¨¡å—è¯»å–DTCå’Œå¯¹åº”çš„å†»ç»“å¸§æ•°æ®å’Œæ‰©å±•æ•°æ®ã€‚              |
   +------------+-------------------------------------------------------------------------------------------------------+

.. table:: è¡¨ åè®®æ ˆé›†æˆçš„æ­¥éª¤

   +----------+----------------------------------------+------------------------------------------------------+
   | **æ­¥éª¤** | **æ“ä½œ**                               | **è¯´æ˜**                                             |
   +==========+========================================+======================================================+
   | 1        | ORIENTAIS                              | è‹¥é…ç½®å·¥å…·å·²ç»æ­å»ºï¼Œåˆ™ä»…éœ€è¿›è¡Œåè®®æ ˆæ¨¡å—çš„åŠ è½½æ“ä½œã€‚ |
   |          | Stuidoé…ç½®å·¥å…·å·¥ç¨‹æ­å»ºå’Œåè®®æ ˆæ¨¡å—åŠ è½½ |                                                      |
   +----------+----------------------------------------+------------------------------------------------------+
   | 2        | æ¨¡å—é…ç½®åŠé…ç½®æ–‡ä»¶ç”Ÿæˆ                 | NA                                                   |
   +----------+----------------------------------------+------------------------------------------------------+
   | 3        | ä»£ç é›†æˆ                               | ç°æœ‰å·¥ç¨‹ã€åè®®æ ˆæºä»£ç å’Œé…ç½®ç”Ÿæˆæ–‡ä»¶çš„é›†æˆã€‚         |
   +----------+----------------------------------------+------------------------------------------------------+
   | 4        | éªŒè¯æµ‹è¯•                               | NA                                                   |
   +----------+----------------------------------------+------------------------------------------------------+

.. note::
   **åè®®æ ˆé›†æˆä¹‹å‰ï¼Œç”¨æˆ·é¡»ç¡®ä¿å·²ç»æœ‰åŸºç¡€å·¥ç¨‹ï¼Œä¸”æœ¬åè®®æ ˆç›¸å…³çš„å…¶ä»–åè®®æ ˆèƒ½æ­£å¸¸å·¥ä½œã€‚**

æ–°å»ºORIENTAIS Stuidoé…ç½®å·¥ç¨‹åŠæ¨¡å—åŠ è½½
--------------------------------------

#. å®‰è£…ORIENTAIS Studioè½¯ä»¶åï¼ŒåŒå‡»è½¯ä»¶å›¾æ ‡æ‰“å¼€è½¯ä»¶ã€‚

   |image1|

   å›¾ ä¸»ç•Œé¢

#. èœå•æ FileğŸ¡ªNewğŸ¡ªProjectï¼Œæ–°å»ºå·¥ç¨‹ã€‚

   |image2|

   å›¾ æ–°å»ºå·¥ç¨‹

#. åœ¨å¼¹å‡ºçš„æ–°å»ºçª—å£ä¸­é€‰æ‹©Autosarä¸‹çš„ [BSW Project]ï¼Œé€‰æ‹©Nextã€‚

   |image3|

   å›¾ æ–°å»ºå·¥ç¨‹

#. åœ¨å¼¹å‡ºçš„çª—å£ä¸­è¾“å…¥å·¥ç¨‹åï¼Œé€‰æ‹©Finishã€‚

   |image4|
   
   å›¾ è¾“å…¥å·¥ç¨‹å

#. é€‰æ‹©[Bsw_Builder]ï¼Œå³é”®å•å‡»ï¼Œé€‰æ‹©New ECU Configurationã€‚

   |image5|

   å›¾ æ–°å»ºECU

#. åœ¨å¼¹å‡ºçš„çª—å£ä¸­è¾“å…¥ECUåï¼Œç„¶åé€‰æ‹©Nextã€‚

   |image6|

   å›¾ é€‰æ‹©MCU

#. åœ¨å¼¹å‡ºçš„çª—å£ä¸­å‹¾é€‰éœ€æ·»åŠ çš„æ¨¡å—ï¼Œç‚¹å‡»Finishã€‚

   |image7|

   å›¾ é€‰æ‹©æ¨¡å—

#. æ–°å»ºå·¥ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œæ­¥éª¤â‘¦ä¸­æ·»åŠ çš„æ¨¡å—å·²ç»è¢«åŠ å…¥åˆ°å·¥ç¨‹ä¸­ã€‚

   |image8|

   å›¾ æ·»åŠ æ¨¡å—

æ¨¡å—é…ç½®åŠç”Ÿäº§ä»£ç 
------------------

æ¨¡å—é…ç½®
~~~~~~~~

æ¨¡å—çš„å…·ä½“é…ç½®ï¼Œå–å†³äºå…·ä½“çš„é¡¹ç›®éœ€æ±‚ã€‚

.. table:: è¡¨ åè®®æ ˆå„æ¨¡å—é…ç½®å‚è€ƒæ–‡æ¡£

   +----------+----------------------------------------+-------------------+
   | **æ¨¡å—** | **å‚è€ƒæ–‡æ¡£**                           | **è¯´æ˜**          |
   +==========+========================================+===================+
   | Lin      | MCALå¯¹åº”çš„Liné…ç½®æ‰‹å†Œ                  |                   |
   +----------+----------------------------------------+-------------------+
   | LinIf    | å‚è€ƒæ‰‹å†ŒLinIf.pdf                      |                   |
   +----------+----------------------------------------+-------------------+
   | Dcm      | å‚è€ƒæ‰‹å†ŒDcm.pdf                        |                   |
   +----------+----------------------------------------+-------------------+
   | PduR     | å‚è€ƒæ‰‹å†ŒPduR.pdf                       |                   |
   +----------+----------------------------------------+-------------------+
   | Dem      | å‚è€ƒæ‰‹å†ŒDem.pdf                        |                   |
   +----------+----------------------------------------+-------------------+

é…ç½®ä»£ç ç”Ÿæˆ
~~~~~~~~~~~~

#. åœ¨ORIENTAIS Stuidoä¸»ç•Œé¢å·¦æ–¹ï¼Œé€‰æ‹©å¯¹åº”çš„åè®®æ ˆï¼Œå•å‡»å³é”®å¼¹å‡ºValidate
   Allå’ŒGenerate Allèœå•ã€‚

   |image9|

   å›¾ æ£€éªŒéªŒè¯

#. é€‰æ‹©Validate Allå¯¹æœ¬åè®®æ ˆå„é…ç½®é€‰é¡¹è¿›è¡Œæ ¡éªŒï¼Œæ²¡æœ‰é”™è¯¯æç¤ºä¿¡æ¯å³æ ¡éªŒé€šè¿‡ã€‚è‹¥æœ‰é”™è¯¯ä¿¡æ¯ï¼Œè¯·æŒ‰ç…§é”™è¯¯æç¤ºä¿®æ”¹ã€‚

#. é€‰æ‹©Generate Allï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚å³ä¸‹è§’çš„Consoleçª—å£è¾“å‡ºç”Ÿæˆçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ã€‚

   |image10|

   å›¾ ç”Ÿæˆé…ç½®æ–‡ä»¶

#. å°†ORIENTAIS Studioåˆ‡æ¢åˆ°Resourceæ¨¡å¼ï¼Œå³å¯æŸ¥çœ‹ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ã€‚

   |image11|

   å›¾ é…ç½®æ–‡ä»¶

å‘åŠŸèƒ½é›†æˆ
----------

ä»£ç é›†æˆ 
~~~~~~~~~

åè®®æ ˆä»£ç åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šé¡¹ç›®æä¾›çš„åè®®æ ˆæºç å’ŒORIENTAIS
Studioé…ç½®ç”Ÿæˆä»£ç ã€‚

ç”¨æˆ·é¡»å°†åè®®æ ˆæºç å’Œç« èŠ‚ï¼ˆé…ç½®ä»£ç ç”Ÿæˆï¼‰ç”Ÿæˆçš„æºä»£ç æ·»åŠ åˆ°é›†æˆå¼€å‘å·¥å…·çš„å¯¹åº”æ–‡ä»¶å¤¹ã€‚åè®®æ ˆé›†æˆçš„æ–‡ä»¶ç»“æ„ï¼Œè§ç« èŠ‚ï¼ˆæºä»£ç é›†æˆï¼‰ã€‚

.. note::
   **åè®®æ ˆé›†æˆä¹‹å‰ï¼Œç”¨æˆ·é¡»ç¡®ä¿å·²ç»æœ‰åŸºç¡€å·¥ç¨‹ï¼Œä¸”æœ¬åè®®æ ˆç›¸å…³çš„å…¶ä»–åè®®æ ˆèƒ½æ­£å¸¸å·¥ä½œã€‚**

é›†æˆæ³¨æ„äº‹é¡¹
~~~~~~~~~~~~

å¯¹äºé›†æˆè¿‡ç¨‹ä¸­ï¼Œåè®®æ ˆç‰¹æ®Šè¦æ±‚å’Œç”¨æˆ·ç»å¸¸å‡ºç°çš„é—®é¢˜ï¼Œå½’ç±»æ€»ç»“å½¢æˆ è¡¨
åè®®æ ˆé›†æˆçº¦æŸæ¸…å•ã€‚ç”¨æˆ·éœ€é€ä¸€æ’æŸ¥è¡¨ä¸­çš„çº¦æŸé¡¹ï¼Œä»¥é¿å…é›†æˆé—®é¢˜å‡ºç°ã€‚

.. table:: è¡¨ åè®®æ ˆé›†æˆçº¦æŸæ¸…å•

   +----------+----------+---------------------------------------------------------------------------------------------------------+
   | **ç¼–å·** | **ç±»åˆ«** | **çº¦æŸé™åˆ¶**                                                                                            |
   +==========+==========+=========================================================================================================+
   | **1**    | ä¸­æ–­     | é€šä¿¡æ ˆæœ‰ä¸­æ–­ã€è½®è¯¢æˆ–æ··åˆä¸‰ç§å·¥ä½œæ¨¡å¼ã€‚è‹¥é€‰å–ä¸­æ–­æˆ–æ··åˆæ¨¡å¼ï¼Œç”¨æˆ·éœ€åœ¨OSé…ç½®å¯¹åº”çš„ä¸­æ–­å¹¶å¡«å……ä¸­æ–­æœåŠ¡APIã€‚ |
   +----------+----------+---------------------------------------------------------------------------------------------------------+
   | **2**    | å †æ ˆ     | ç”¨æˆ·éœ€ç¡®ä¿ä¸ºä»»åŠ¡å †æ ˆå’Œä¸­æ–­å †æ ˆåˆ†é…è¶³å¤Ÿçš„å †æ ˆç©ºé—´ã€‚                                                      |
   +----------+----------+---------------------------------------------------------------------------------------------------------+
   | **3**    | å¤´æ–‡ä»¶   | - æ·»åŠ åè®®æ ˆä»£ç ä¹‹åï¼Œç”¨æˆ·éœ€æ›´æ–°é›†æˆå¼€å‘å·¥å…·ä¸­çš„å¤´æ–‡ä»¶è·¯å¾„ã€‚                                            |
   |          |          |                                                                                                         |
   |          |          | - è°ƒç”¨åè®®æ ˆAPIçš„æºæ–‡ä»¶ï¼Œéœ€è¦åŒ…å«åè®®æ ˆçš„å¤´æ–‡ä»¶ã€‚                                                       |
   +----------+----------+---------------------------------------------------------------------------------------------------------+
   | **4**    | åˆå§‹åŒ–   | UDSonLINçš„åˆå§‹åŒ–é¡ºåºä¸ºï¼šLin_Initï¼Œ LinIf_Initï¼Œ PduR_Initï¼Œ LinTp_Initï¼ŒDcm \_Initï¼ŒDem_PreInitï¼Œ       |
   |          |          | Dem_Initã€‚                                                                                              |
   +----------+----------+---------------------------------------------------------------------------------------------------------+
   | **5**    | å‘¨æœŸå‡½æ•° | Dcm_MainFunctionï¼ŒDem_MainFunctionå’ŒLinIf_MainFunctionéœ€è¦è¢«å‘¨æœŸæ€§ä»»åŠ¡å‡½æ•°è°ƒç”¨ã€‚                        |
   +----------+----------+---------------------------------------------------------------------------------------------------------+

é›†æˆç¤ºä¾‹
========

æœ¬ç« èŠ‚é€šè¿‡æ™®é€šçš„LINè¯Šæ–­æ ˆä¸ºä¾‹ï¼Œå‘ç”¨æˆ·å±•ç¤ºLINè¯Šæ–­æ ˆçš„é›†æˆè¿‡ç¨‹ã€‚ç”¨æˆ·å¯ä»¥æ®æ­¤ç†Ÿæ‚‰LINè¯Šæ–­æ ˆé…ç½®å·¥å…·çš„é…ç½®è¿‡ç¨‹ï¼Œä»¥åŠå¦‚ä½•åº”ç”¨é…ç½®å·¥å…·ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ã€‚

ä¸ºè®©ç”¨æˆ·æ›´æ¸…æ™°çš„äº†è§£å·¥å…·çš„ä½¿ç”¨ï¼Œæ‰€ç”¨çš„é…ç½®å‡é€ä¸€æ‰‹åŠ¨å®Œæˆã€‚å·¥å…·æœ‰é…ç½®æ–‡ä»¶ï¼ˆarxmlæ–‡ä»¶ï¼‰ç”Ÿæˆå’Œå¯¼å…¥åŠŸèƒ½ï¼Œå¦‚æœæœ‰é…ç½®å¥½çš„arxmlæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å·¥å…·ä¸­çš„arxmlæ–‡ä»¶å¯¼å…¥åŠŸèƒ½ï¼Œå¿«é€Ÿå®Œæˆé…ç½®ã€‚

.. note::
   **æœ¬ç¤ºä¾‹ä¸ä»£è¡¨ç”¨æˆ·çš„å®é™…é…ç½®æƒ…å†µï¼Œç”¨æˆ·éœ€è¦æ ¹æ®è‡ªå·±çš„å®é™…éœ€æ±‚ï¼Œå†³å®šå„ä¸ªå‚æ•°çš„é…ç½®ã€‚**

é›†æˆç›®æ ‡

é›†æˆåçš„å·¥ç¨‹ä¸ºä»èŠ‚ç‚¹LINï¼Œé›†æˆå®Œæˆåçš„å·¥ç¨‹å¯ä»¥è¿›è¡Œè¯Šæ–­æœåŠ¡

ä¿¡å·è®¾ç½®å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

.. table:: è¡¨

   +--------------------------+------------+--------+------------+-------------------------------+
   | **å¸§åç§°**               | **å¸§ç±»å‹** | **ID** | **Tx\\Rx** | **èŠ‚ç‚¹åœ°å€**                  |
   +==========================+============+========+============+===============================+
   | **LinIfFrame_MasterReq** | è¯Šæ–­å¸§     | 0x3C   | RX         | **ç‰©ç†åœ°å€ï¼š0x0A              |
   |                          |            |        |            | åŠŸèƒ½åœ°å€ï¼š0x7e**              |
   +--------------------------+------------+--------+------------+-------------------------------+
   | **LinIfFrame_SlaveResp** | è¯Šæ–­å¸§     | 0x3D   | TX         | **ç‰©ç†åœ°å€ï¼š0x0A**            |
   +--------------------------+------------+--------+------------+-------------------------------+

æ¨¡å—çš„é…ç½®
----------

æ–°å»ºé…ç½®å·¥ç¨‹åŠæ¨¡å—åŠ è½½æ“ä½œï¼Œè¯·å‚è€ƒæœ¬æ–‡æ¡£ç« èŠ‚ï¼ˆæ¨¡å—é…ç½®åŠç”Ÿäº§ä»£ç ï¼‰ã€‚

Linæ¨¡å—é…ç½®
~~~~~~~~~~~

é…ç½®è¯Šæ–­åè®®æ ˆä¹‹å‰éœ€è¦ä½¿ç”¨ MCAL å·¥å…·é…ç½® Lin
æ¨¡å—ï¼Œä½†æ˜¯åªæ¶‰åŠåˆ°ä¸è¯Šæ–­æ ˆä¸­æŠ¥æ–‡æ”¶å‘æœ‰å…³ç³»çš„éƒ¨åˆ†ï¼ˆä¸»è¦æ˜¯
HardwareObejectï¼‰ã€‚è¯¥é›†æˆç¤ºä¾‹ä¸ºä»èŠ‚ç‚¹LINï¼Œéœ€è¦å°†LINé…ç½®ä¸ºä»èŠ‚ç‚¹ã€‚å…·ä½“é…ç½®é€‰é¡¹è¯·å‚è€ƒ
MCALå·¥å…·çš„å‚è€ƒæ‰‹å†Œè¿›è¡Œé…ç½®ã€‚

EcuCæ¨¡å—é…ç½®
~~~~~~~~~~~~

#. åŒå‡»EcuCæ¨¡å—ï¼Œæ‰“å¼€EcuCæ¨¡å—é…ç½®ç•Œé¢ã€‚

   |image12|

   å›¾ EcuCé…ç½®

#. åœ¨EcucConfigSetsæ ç›®ä¸Šå³é”®ï¼Œé€‰æ‹©EcucConfigSetã€‚å†åœ¨EcucConfigSetä¸Šå³é”®ï¼Œé€‰æ‹©NewğŸ¡ªEcucPduCollectionã€‚

   |image13|

   å›¾ EcucConfigSet

   Â·PduLengthTypeEnum
   é€‰æ‹©UINT16ï¼ˆè¿™ä¸ªå‚æ•°æ˜¯å®šä¹‰å­˜å‚¨æ•°æ®é•¿åº¦æ—¶ä½¿ç”¨çš„å˜é‡çš„é•¿åº¦ï¼Œç¤ºä¾‹é€‰æ‹©UINT16ï¼Œè‹¥é…ç½®çš„æŠ¥æ–‡é•¿åº¦éƒ½æ˜¯8ï¼Œä¸ä¼šè¶…è¿‡255ï¼Œé€‰æ‹©UINT8å³å¯ï¼‰

#. åœ¨EcucPduCollectionä¸Šå³é”®ï¼Œé€‰æ‹©Pduï¼Œä¼šç”Ÿæˆä¸€ä¸ªPduçš„é…ç½®ç•Œé¢ã€‚

   |image14|

   å›¾ æ–°å»ºPdu

   è¿™é‡ŒæŒ‰ç…§å‘é€å’Œæ¥æ”¶ï¼Œå¯ä»¥å°†Pduåå­—æ”¹ä¸ºæŠ¥æ–‡çš„åå­—ã€‚LINè¯Šæ–­éœ€è¦é…ç½®6ä¸ªPduï¼Œåˆ†åˆ«ç”¨äºLinTpã€Dcmã€‚

   |image14|

   å›¾ é…ç½®Pdu

#. ä¸ºæ¯ä¸ª Pdu é…ç½® Lengthï¼ˆæ ¹æ®é¡¹ç›®ä¸åŒé…ç½®ä¸åŒçš„ Pdu é•¿åº¦ï¼‰ã€‚

   |image15|\ |image16|

   å›¾ é…ç½®Pduçš„Length

.. note::
   Dcm Pdu é•¿åº¦å¿…é¡»ä¸/Dcm/DcmConfigSet/DcmDsl/DcmDslBuffer é‡Œé¢é…ç½®çš„
   Dcm Txã€RxBufferé•¿åº¦ä¸€è‡´ã€‚

LinIfæ¨¡å—é…ç½®
~~~~~~~~~~~~~

#. åŒå‡»LinIfæ¨¡å—ï¼Œæ‰“å¼€LinIfæ¨¡å—çš„é…ç½®ç•Œé¢ã€‚

   |image17|

   å›¾ LinIfé…ç½®

#. LinIfGeneralæ ‡ç­¾é¡µä½¿èƒ½LinIfTpSupportedé€‰é¡¹ã€‚

#. åœ¨LinIfGlobalConfigæ ‡ç­¾é¡µä¸‹ä¾æ¬¡æ‰“å¼€LinIfGlobalConfigs
   ->LinIfGlobalConfig
   ->LinIfChannel_1->LinIfFramesæ–°å»ºLinFrameç”¨äºè¯Šæ–­è¯·æ±‚ã€‚

   |image18|

   å›¾ æ–°å»ºLinFrame

#. ç„¶åå³å‡»LinIfChannel_1æ–°å»ºLinFrameç”¨äºè¯Šæ–­å“åº”ã€‚

   |image19|

   å›¾ æ–°å»ºå“åº”æŠ¥æ–‡

#. åŒå‡»LinTpæ¨¡å—ï¼Œè¿›å…¥LinTpé…ç½®é¡µé¢ï¼ŒLinTpGeneralé…ç½®ç•Œé¢ä¸éœ€è¦é…ç½®

   |image20|

   å›¾ LinTpGeneralé…ç½®ç•Œé¢

#. é€‰æ‹©LinTpGlobalConfigæ ‡ç­¾ï¼ŒLinTpGlobalConfig->LinTpChannelConfigsæ–°å»ºä¸€ä¸ªLinTpChannelConfigã€‚å†å…³è”å¯¹åº”çš„ComMChannelã€‚

   |image21|

   å›¾ å…³è”Channel

#. é€‰æ‹©LinTpRxNSdusæ–°å»ºç‰©ç†åœ°å€çš„Sduï¼Œæ ¹æ®éœ€æ±‚é…ç½®å¯¹åº”çš„Ncrï¼ŒNADå…³è”å¯¹åº”çš„ComMChannel

   |image22|

   å›¾ æ–°å»ºç‰©ç†åœ°å€Sdu

#. é€‰æ‹©LinTpRxNSdusæ–°å»ºåŠŸèƒ½åœ°å€çš„Sduï¼Œæ ¹æ®éœ€æ±‚é…ç½®å¯¹åº”çš„Ncrï¼ŒNADå…³è”å¯¹åº”çš„ComMChannelã€‚

   |image23|

   å›¾ æ–°å»ºåŠŸèƒ½åœ°å€Sdu

#. é€‰æ‹©LinTpTxNSdusæ–°å»ºå“åº”çš„Sduï¼Œæ ¹æ®éœ€æ±‚é…ç½®å¯¹åº”çš„Nasï¼ŒNcsï¼ŒNADï¼Œå…³è”å¯¹åº”çš„LinChannelå’ŒComMChannelã€‚

   |image24|

   å›¾ æ–°å»ºå“åº”Sdu

PduRæ¨¡å—é…ç½®
~~~~~~~~~~~~

#. åŒå‡»PduRæ¨¡å—ï¼Œæ‰“å¼€PduRæ¨¡å—çš„é…ç½®ç•Œé¢ã€‚åœ¨PduRBswModulesä¸­æ·»åŠ Dcmå’ŒLinTpã€‚

   |image25|

   å›¾ PduRæ¨¡å—é…ç½®

#. æ‰“å¼€PduRRoutingTablesæ ‡ç­¾é¡µï¼Œæ·»åŠ 3ä¸ªPduRRoutingPathã€‚

   |image26|

   å›¾ æ·»åŠ PduRRoutingPath

#. é…ç½®è¯Šæ–­åŠŸèƒ½å¯»å€è¯·æ±‚ï¼ˆFuncReqï¼‰ã€ç‰©ç†å¯»å€è¯·æ±‚ï¼ˆPhysReqï¼‰ã€å“åº”ï¼ˆRespï¼‰çš„è·¯ç”±è·¯å¾„ã€‚è¯Šæ–­è¯·æ±‚çš„PduRRoutingPathçš„PduRSrcPdué€‰æ‹©LinTpå¯¹åº”çš„PDUï¼ŒPduRDestPDUé€‰æ‹©Dcmå¯¹åº”çš„PDUã€‚è¯Šæ–­å“åº”çš„PduRRoutingPathçš„åˆ™ç›¸åã€‚

   |image27|

   å›¾ é…ç½®ç‰©ç†å¯»å€è·¯ç”±

   |image28|

   å›¾ é…ç½®åŠŸèƒ½å¯»å€è·¯ç”±

   |image29|

   å›¾ é…ç½®å“åº”è·¯ç”±

Dcmæ¨¡å—é…ç½®
~~~~~~~~~~~

Dcmæ¨¡å—é…ç½®å¯å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonLIN.pdfã€‹ä¸­Dcmçš„é…ç½®ï¼ŒLinçš„è¯Šæ–­é…ç½®åªéœ€ä¿®æ”¹DcmDslæ¨¡å—ï¼š

æ·»åŠ å¯¹åº”çš„Linè¯Šæ–­çš„bufferï¼š

|image30|

å›¾ DCMé…ç½®-DCMConfigSets

æ·»åŠ DcmDslProtocol:

|image31|

å›¾ DCMé…ç½®-DCMConfigSets

Demæ¨¡å—é…ç½®
~~~~~~~~~~~

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonLIN.pdfã€‹ä¸­çš„Demé…ç½®ã€‚

BswMæ¨¡å—é…ç½®
~~~~~~~~~~~~

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonLIN.pdfã€‹ä¸­çš„BswMé…ç½®ã€‚

æºä»£ç é›†æˆ
----------

è¯Šæ–­æ ˆæºä»£ç é›†æˆæ­¥éª¤å¦‚ä¸‹ï¼š

#. åœ¨ MCAL å·¥ç¨‹çš„åŸºç¡€ä¸Šï¼ŒåŒæ­¥ç« æ·»åŠ çš„ Lin æ¨¡å—é…ç½®æ–‡ä»¶ã€‚

#. ä»åŸºçº¿ä¸­å–å‡ºç« ï¼ˆä»£ç é›†æˆï¼‰ä¸­ç›¸å…³çš„æºä»£ç æ·»åŠ åˆ°å·¥ç¨‹ä¸­ã€‚

#. å°†åœ¨ç« ï¼ˆæ¨¡å—é…ç½®ï¼‰ä¸­ ORIENTAS é…ç½®ç”Ÿæˆçš„è¯Šæ–­ç›¸å…³é…ç½®æ–‡ä»¶æ·»åŠ åˆ°å·¥ç¨‹ä¸­ã€‚

#. æ·»åŠ ç›¸å…³å¤´æ–‡ä»¶ç›®å½•ã€‚

åè®®æ ˆè°ƒåº¦é›†æˆ
--------------

è¯Šæ–­æ ˆè°ƒåº¦é›†æˆæ­¥éª¤å¦‚ä¸‹ï¼š

#. è¯Šæ–­æ ˆè°ƒåº¦é›†æˆï¼Œéœ€è¦é€ä¸€æ’æŸ¥å¹¶å®ç°è¡¨
   è¯Šæ–­æ ˆé›†æˆçº¦æŸæ¸…å•æ‰€ç½—åˆ—çš„é—®é¢˜ï¼Œä»¥é¿å…é›†æˆå‡ºç°å·®é”™ã€‚

#. ç¼–è¯‘é“¾æ¥ä»£ç ï¼Œå°†ç”Ÿæˆçš„elfæ–‡ä»¶çƒ§å†™è¿›èŠ¯ç‰‡ã€‚

ä½¿ç”¨iRteé›†æˆ
~~~~~~~~~~~~

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonLIN.pdfã€‹ä¸­çš„ä½¿ç”¨iRteé›†æˆã€‚

ä½¿ç”¨Rteé›†æˆ
~~~~~~~~~~~

è¯·å‚è€ƒã€Šé›†æˆæ‰‹å†Œ_UDSonLIN.pdfã€‹ä¸­çš„ä½¿ç”¨Rteé›†æˆã€‚

éªŒè¯ç»“æœ
--------

æ ¹æ®é›†æˆç›®æ ‡ï¼Œå…±é…ç½®äº†3ä¸ªæŠ¥æ–‡ï¼Œå…¶ä¸­2ä¸ªæ¥æ”¶æŠ¥æ–‡åˆ†åˆ«ä¸ºè¯Šæ–­ç‰©ç†å¯»å€åŠè¯Šæ–­åŠŸèƒ½å¯»å€ï¼Œ1ä¸ªå‘é€æŠ¥æ–‡ä¸ºè¯Šæ–­å“åº”ã€‚

   |image32|

   å›¾ éªŒè¯ç»“æœ

.. |image1| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image2.png
   :width: 5.76736in
   :height: 3.10347in
.. |image2| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image3.png
   :width: 5.76736in
   :height: 3.10694in
.. |image3| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image4.png
   :width: 3.79528in
   :height: 3.62205in
.. |image4| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image5.png
   :width: 3.8072in
   :height: 2.92887in
.. |image5| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image6.png
   :width: 3.82677in
   :height: 3.51969in
.. |image6| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image7.png
   :width: 5.76736in
   :height: 3.10694in
.. |image7| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image8.png
   :width: 4.96934in
   :height: 8.30117in
.. |image8| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image9.png
   :width: 5.76736in
   :height: 3.10347in
.. |image9| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image10.png
   :width: 5.76736in
   :height: 3.10694in
.. |image10| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image11.png
   :width: 5.76736in
   :height: 3.10347in
.. |image11| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image12.png
   :width: 5.76736in
   :height: 3.10347in
.. |image12| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image13.png
   :width: 5.76736in
   :height: 2.60694in
.. |image13| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image14.png
   :width: 5.76736in
   :height: 2.60694in
.. |image14| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image15.png
   :width: 5.76736in
   :height: 2.60694in
.. |image15| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image16.png
   :width: 5.76736in
   :height: 2.61111in
.. |image16| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image17.png
   :width: 5.76736in
   :height: 2.60694in
.. |image17| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image18.png
   :width: 5.76736in
   :height: 2.60694in
.. |image18| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image19.png
   :width: 5.76736in
   :height: 2.60694in
.. |image19| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image20.png
   :width: 5.76736in
   :height: 2.60694in
.. |image20| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image21.png
   :width: 5.76736in
   :height: 2.60694in
.. |image21| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image22.png
   :width: 5.76736in
   :height: 2.60694in
.. |image22| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image23.png
   :width: 5.76736in
   :height: 2.60694in
.. |image23| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image24.png
   :width: 5.76736in
   :height: 2.60694in
.. |image24| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image25.png
   :width: 5.76736in
   :height: 2.60694in
.. |image25| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image26.png
   :width: 5.76736in
   :height: 2.60694in
.. |image26| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image27.png
   :width: 5.76736in
   :height: 2.60694in
.. |image27| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image28.png
   :width: 5.76736in
   :height: 2.60694in
.. |image28| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image29.png
   :width: 5.76736in
   :height: 2.60694in
.. |image29| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image30.png
   :width: 5.76736in
   :height: 2.60694in
.. |image30| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image31.png
   :width: 5.76736in
   :height: 2.60694in
.. |image31| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image32.png
   :width: 5.76736in
   :height: 2.60694in
.. |image32| image:: /_static/é›†æˆæ‰‹å†Œ/é›†æˆæ‰‹å†Œ_UDSonLIN/image33.png
   :width: 5.76736in
   :height: 2.60694in